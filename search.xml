<?xml version="1.0" encoding="utf-8"?>
<search>
  
  
    
    <entry>
      <title><![CDATA[iOSåŠ¨ç”»è¿›é˜¶ - å®ç°ç‚«é…·çš„ä¸Šæ‹‰åˆ·æ–°åŠ¨æ•ˆ]]></title>
      <url>http://imwcl.com/2017/03/17/iOS%E5%8A%A8%E7%94%BB%E8%BF%9B%E9%98%B6-%E5%AE%9E%E7%8E%B0%E7%82%AB%E9%85%B7%E7%9A%84%E4%B8%8A%E6%8B%89%E5%88%B7%E6%96%B0%E5%8A%A8%E6%95%88/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ€è¿‘æ’¸äº†ä¸€ä¸ªä¸Šæ‹‰åˆ·æ–°çš„å°è½®å­ï¼Œåªè¦éµå¾ªä¸€ä¸ªåè®®å°±èƒ½è‡ªå®šä¹‰è‡ªå·±åŠ¨æ•ˆçš„ä¸Šæ‹‰åˆ·æ–°å’ŒåŠ è½½ï¼Œæˆ‘è‡ªå·±ä¹Ÿå†™äº†å‡ ä¸ªåŠ¨æ•ˆè¿›å»ï¼Œä¸‹é¢æ˜¯ä¸€ä¸ªæ¯”è¾ƒå¥½çš„åŠ¨æ•ˆçš„å®ç°è¿‡ç¨‹</p>
</blockquote>
<p>å…ˆä¸Šæ•ˆæœå›¾å’Œ<a href="https://github.com/CRAnimation/CRRefresh" target="_blank" rel="external">githubåœ°å€</a>ï¼Œæœ‰å…¶ä»–å¥½çš„åŠ¨æ•ˆå¤§å®¶ä¹Ÿå¯ä»¥äº¤æµ~</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/CRRefresh/CRRefresh3.gif" alt=""></p>
<p>åŠ¨æ•ˆçš„<a href="https://uimovement.com/ui/2408/pull-to-refresh/" target="_blank" rel="external">åŸåœ°å€</a>ï¼Œåœ¨uimovementç½‘ç«™ä¸Šçœ‹åˆ°è¿™ä¸ªåŠ¨æ•ˆæ—¶æ„Ÿè§‰ç‰¹åˆ«6ï¼Œå°±æƒ³è‡ªå·±å®ç°ä¸€ä¸‹ï¼Œè´¹äº†å¾ˆé•¿æ—¶é—´ï¼Œæ¢äº†å‡ ç§æ–¹æ¡ˆç»ˆäºå®ç°å‡ºæ¥äº†ï¼Œä¸‹é¢æ˜¯å®ç°çš„æ­¥éª¤ï¼š</p>
<a id="more"></a>
<h1 id="åˆ†æåŠ¨æ•ˆ"><a href="#åˆ†æåŠ¨æ•ˆ" class="headerlink" title="åˆ†æåŠ¨æ•ˆ"></a>åˆ†æåŠ¨æ•ˆ</h1><p>å†™ä¸€ä¸ªåŠ¨æ•ˆçš„ç¬¬ä¸€æ­¥å°±åº”è¯¥ä»”ç»†çš„å»åˆ†æå®ƒï¼ŒæŠŠå®ƒçš„æ¯ä¸€å¸§å±•å¼€æ¥çœ‹ï¼Œæ‰¾ä¸€ä¸ªæœ€åˆé€‚çš„æ–¹å¼æ¥å®ç°å®ƒï¼Œä¸‹é¢æ˜¯æˆ‘åˆ†æè¿‡ç¨‹ï¼š</p>
<ul>
<li>çœ‹åˆ°æ›²çº¿ï¼Œè‚¯å®šä¼šæƒ³åˆ°<code>CAShapeLayer</code>å’Œ<code>UIBezierPath</code>è¿™ä¸€å¯¹æ­æ¡£ï¼Œç›¸å¯¹äº<code>CoreGraphics</code>è€Œè¨€ï¼Œå®ƒå³ç®€å•æœ‰é«˜æ•ˆï¼›</li>
<li>æ›²çº¿çš„æ‹‰æ‹½æ•ˆæœå¯ä»¥ç”¨ <code>CADisplayLink</code>åŠ ä¸Šä¸€ä¸ªå‚è€ƒçš„<code>view</code>ï¼Œä»¥å‚è€ƒ<code>view</code>ä¸º<code>UIBezierPath</code>çš„ä¸€ä¸ª<code>controlPoint</code>ï¼Œç§»åŠ¨å‚è€ƒ<code>view</code>æ¥å®ç°æ›²çº¿æ‹‰æ‹½çš„æ•ˆæœï¼›</li>
<li>æ›²çº¿çš„å›å¼¹æ•ˆæœè€ƒè™‘å†ä¸‰åå†³å®šä½¿ç”¨<code>CAKeyframeAnimation</code>é…åˆ<code>CAShapeLayer</code>æ¥ä½¿ç”¨ï¼Œæœ¬æ¥æ‰“ç®—ä½¿ç”¨<code>CASpringanimation</code>æ¥å®ç°ï¼Œä½†æ˜¯è€ƒè™‘å®ƒæ˜¯<code>iOS9</code>å‡ºçš„ï¼Œè€Œæˆ‘çš„è½®å­æœ€ä½æ”¯æŒiOS8ï¼Œå°±æ”¾å¼ƒç”¨å®ƒäº†ï¼›</li>
<li>å°çƒæ˜¯å®ç°å’Œå¼¹å‡ºå°±ç›¸å¯¹ç®€å•äº†ï¼Œä½¿ç”¨<code>CAShapeLayer</code>æ¥å®ç°å°çƒï¼Œç”¨<code>CABasicAnimation</code>æ¥å®ç°å°çƒçš„ç§»åŠ¨ï¼›</li>
<li>å°çƒå¤–å±‚åœ†ç¯æ—‹è½¬çš„æ•ˆæœï¼Œé¦–å…ˆä¹Ÿæ˜¯ç”¨<code>CAShapeLayer</code>æ¥å®ç°åœ†ç¯ï¼Œç„¶åé…åˆ<code>CABasicAnimation</code>æ§åˆ¶<code>CAShapeLayer</code>çš„<code>strokeEnd</code>å’Œ<code>transform.rotation.z</code>ä¸€ç›´æ¥å®ç°å¤–å±‚åœ†ç¯æ—‹è½¬çš„æ•ˆæœï¼›</li>
<li>æœ€åå°±æ˜¯æ¯”è¾ƒå¤æ‚çš„å°±æ˜¯å°çƒå’Œæ›²çº¿çš„è¿æ¥å¤„çš„å¤„ç†ï¼Œæˆ‘çš„å®ç°æ–¹å¼æ˜¯é€šè¿‡<code>CADisplayLink</code>åœ¨åŠ¨ç”»çš„è¿‡ç¨‹ä¸­å®æ—¶çš„å»ç›‘å¬å°çƒå’Œæ›²çº¿çš„ä½ç½®ï¼Œè®¡ç®—å‡º<code>UIBezierPath</code>ç”¨ä¸€ä¸ª<code>CAShapeLayer</code>æ¥ç²¾ç¡®çš„è¿æ¥å°çƒå’Œæ›²çº¿éƒ¨åˆ†ã€‚</li>
</ul>
<p>å¥½äº†ï¼Œä»¥ä¸Šæ˜¯å¤§æ¦‚è¿‡ç¨‹ï¼Œå¦‚æœå¤§å®¶æœ‰å¦å¤–çš„æ›´å¥½çš„å®ç°æ–¹å¼ï¼Œä¹Ÿå¯ä»¥ä¸€èµ·æ¥è®¨è®ºã€‚</p>
<h1 id="ç»˜åˆ¶æ›²çº¿å’Œæ›²çº¿çš„æ‹‰æ‹½"><a href="#ç»˜åˆ¶æ›²çº¿å’Œæ›²çº¿çš„æ‹‰æ‹½" class="headerlink" title="ç»˜åˆ¶æ›²çº¿å’Œæ›²çº¿çš„æ‹‰æ‹½"></a>ç»˜åˆ¶æ›²çº¿å’Œæ›²çº¿çš„æ‹‰æ‹½</h1><p>æˆ‘ä»¬ç”¨<code>CAShapeLayer</code>å’Œ<code>UIBezierPath</code>è¿™ä¸€å¯¹æ­æ¡£æ¥å®ç°æ›²çº¿çš„ç»˜åˆ¶ï¼Œä¸‹é¢ä»¥ä¸€ä¸ªå‚è€ƒ<code>view</code>æ¥ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹ï¼Œä¸‹é¢æ˜¯ä¸»è¦ä»£ç å’Œæ•ˆæœå›¾ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/CRRefresh/CRRefresh4.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// é€šè¿‡ä¼ é€’çš„yåæ ‡æ¥ç»˜åˆ¶æ›²çº¿</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">wave</span><span class="params">(<span class="number">_</span> y: CGFloat, execute: CGFloat)</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.execute = execute</span><br><span class="line">    waveLayer.path = wavePath(x: <span class="number">0</span>, y: y)</span><br><span class="line">    <span class="keyword">if</span> !isAnimation &#123;</span><br><span class="line">        <span class="keyword">var</span> trans = <span class="type">CGAffineTransform</span>.identity</span><br><span class="line">        trans = trans.translatedBy(x: <span class="number">0</span>, y: y)</span><br><span class="line">        reference.transform = trans</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è®¡ç®—path</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">wavePath</span><span class="params">(x: CGFloat, y: CGFloat)</span></span> -&gt; <span class="type">CGPath</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> w = frame.width</span><br><span class="line">    <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">    <span class="keyword">if</span> y &lt; execute &#123;</span><br><span class="line">        path.move(to: .zero)</span><br><span class="line">        path.addLine(to: .<span class="keyword">init</span>(x: w, y: <span class="number">0</span>))</span><br><span class="line">        path.addLine(to: .<span class="keyword">init</span>(x: w, y: y))</span><br><span class="line">        path.addLine(to: .<span class="keyword">init</span>(x: <span class="number">0</span>, y: y))</span><br><span class="line">        path.addLine(to: .zero)</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        path.move(to: .zero)</span><br><span class="line">        path.addLine(to: .<span class="keyword">init</span>(x: w, y: <span class="number">0</span>))</span><br><span class="line">        path.addLine(to: .<span class="keyword">init</span>(x: w, y: execute))</span><br><span class="line">        path.addQuadCurve(to: .<span class="keyword">init</span>(x: <span class="number">0</span>, y: execute), controlPoint: .<span class="keyword">init</span>(x: w/<span class="number">2</span>, y: y))</span><br><span class="line">        path.addLine(to: .zero)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> path.cgPath</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ›²çº¿çš„å›å¼¹æ•ˆæœ"><a href="#æ›²çº¿çš„å›å¼¹æ•ˆæœ" class="headerlink" title="æ›²çº¿çš„å›å¼¹æ•ˆæœ"></a>æ›²çº¿çš„å›å¼¹æ•ˆæœ</h1><p>æ›²çº¿çš„å›å¼¹ä½¿ç”¨<code>CAKeyframeAnimation</code>åŠ åˆ°å‚è€ƒçš„<code>view</code>ä¸Šï¼Œç„¶åç”¨<code>CADisplayLink</code>ç›‘å¬å‚è€ƒ<code>view</code>çš„åæ ‡åšä¸º<code>controlPoint</code>æ¥å®ç°æ›²çº¿çš„å›å¼¹æ•ˆæœï¼Œä¸‹é¢æ˜¯ä¸»è¦ä»£ç å’Œæ•ˆæœå›¾ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/CRRefresh/CRRefresh5.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å¼€å§‹åŠ¨ç”»</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">startAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">    isAnimation = <span class="literal">true</span></span><br><span class="line">    addDisPlay()</span><br><span class="line">    boundAnimation(x: <span class="number">0</span>, y: execute)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CAKeyframeAnimationåŠ¨ç”»</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">boundAnimation</span><span class="params">(x: CGFloat, y: CGFloat)</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> bounce = <span class="type">CAKeyframeAnimation</span>(keyPath: <span class="string">"transform.translation.y"</span>)</span><br><span class="line">    bounce.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: kCAMediaTimingFunctionEaseIn)</span><br><span class="line">    bounce.duration = bounceDuration</span><br><span class="line">    bounce.values = [</span><br><span class="line">        reference.frame.origin.y,</span><br><span class="line">        y * <span class="number">0.5</span>,</span><br><span class="line">        y * <span class="number">1.2</span>,</span><br><span class="line">        y * <span class="number">0.8</span>,</span><br><span class="line">        y * <span class="number">1.1</span>,</span><br><span class="line">        y</span><br><span class="line">    ]</span><br><span class="line">    bounce.isRemovedOnCompletion = <span class="literal">true</span></span><br><span class="line">    bounce.fillMode = kCAFillModeForwards</span><br><span class="line">    bounce.delegate = <span class="keyword">self</span></span><br><span class="line">    reference.layer.add(bounce, forKey: <span class="string">"return"</span>)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·»åŠ å’Œç§»é™¤CADisplayLink</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">addDisPlay</span><span class="params">()</span></span> &#123;</span><br><span class="line">    displayLink = <span class="type">CADisplayLink</span>(target: <span class="keyword">self</span>, selector: #selector(displayAction))</span><br><span class="line">    displayLink?.add(to: .main, forMode: .commonModes)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">removeDisPlay</span><span class="params">()</span></span> &#123;</span><br><span class="line">    displayLink?.invalidate()</span><br><span class="line">    displayLink = <span class="literal">nil</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// CADisplayLinkç»‘å®šçš„æ–¹æ³•</span></span><br><span class="line"><span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">displayAction</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> frame = reference.layer.presentation()?.frame &#123;</span><br><span class="line">        <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">            <span class="keyword">let</span> path = <span class="keyword">self</span>.displayWavePath(x: <span class="number">0</span>, y: frame.origin.y + referenceHeight/<span class="number">2</span>)</span><br><span class="line">            <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                <span class="keyword">self</span>.waveLayer.path = path</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// é€šè¿‡è¿™ä¸ªæ–¹æ³•è·å–path</span></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">displayWavePath</span><span class="params">(x: CGFloat, y: CGFloat)</span></span> -&gt; <span class="type">CGPath</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> w = frame.width</span><br><span class="line">    <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">    path.move(to: .zero)</span><br><span class="line">    path.addLine(to: .<span class="keyword">init</span>(x: w, y: <span class="number">0</span>))</span><br><span class="line">    path.addLine(to: .<span class="keyword">init</span>(x: w, y: execute))</span><br><span class="line">    path.addQuadCurve(to: .<span class="keyword">init</span>(x: <span class="number">0</span>, y: execute), controlPoint: .<span class="keyword">init</span>(x: w/<span class="number">2</span>, y: y))</span><br><span class="line">    path.addLine(to: .zero)</span><br><span class="line">    <span class="keyword">return</span> path.cgPath</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å¤–å±‚åœ†ç¯çš„åŠ¨ç”»"><a href="#å¤–å±‚åœ†ç¯çš„åŠ¨ç”»" class="headerlink" title="å¤–å±‚åœ†ç¯çš„åŠ¨ç”»"></a>å¤–å±‚åœ†ç¯çš„åŠ¨ç”»</h1><p>å°çƒå’Œå¤–å±‚åœ†ç¯æˆ‘ä»¬ç”¨<code>CAShapeLayer</code>æ¥ç»˜åˆ¶ï¼Œè¿™é‡Œä¸»è¦è®²çš„æ˜¯åŠ¨ç”»çš„å®ç°ï¼ŒåŠ¨ç”»ä¸»è¦ç”±ä¸¤ä¸ªéƒ¨åˆ†ç»„æˆï¼š</p>
<ul>
<li><code>CABasicAnimation</code>æ§åˆ¶å¤–å±‚åœ†ç¯çš„<code>strokeEnd</code>çš„åŠ¨ç”»ï¼›</li>
<li><code>CABasicAnimation</code>æ§åˆ¶å¤–å±‚åœ†ç¯çš„<code>transform.rotation.z</code>çš„æ—‹è½¬åŠ¨ç”»ï¼›</li>
</ul>
<table>
<thead>
<tr>
<th style="text-align:center">å¤–å±‚åœ†ç¯çš„<code>strokeEnd</code>åŠ¨ç”»</th>
<th style="text-align:center">å¤–å±‚åœ†ç¯çš„<code>transform.rotation.z</code>çš„æ—‹è½¬åŠ¨ç”»</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center"><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/CRRefresh/CRRefresh6.gif" alt=""></td>
<td style="text-align:center"><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/CRRefresh/CRRefresh7.gif" alt=""></td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢æ˜¯å…³é”®ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">animation</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">self</span>.isHidden = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">let</span> rotate = <span class="type">CABasicAnimation</span>(keyPath: <span class="string">"transform.rotation.z"</span>)</span><br><span class="line">    rotate.fromValue = <span class="number">0</span></span><br><span class="line">    rotate.toValue = <span class="type">M_PI</span> * <span class="number">2</span></span><br><span class="line">    rotate.duration = <span class="number">1</span></span><br><span class="line">    rotate.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: kCAMediaTimingFunctionLinear)</span><br><span class="line">    rotate.repeatCount = <span class="type">HUGE</span></span><br><span class="line">    rotate.fillMode = kCAFillModeForwards</span><br><span class="line">    rotate.isRemovedOnCompletion = <span class="literal">false</span></span><br><span class="line">    <span class="keyword">self</span>.add(rotate, forKey: rotate.keyPath)</span><br><span class="line">    strokeEndAnimation()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">strokeEndAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> endPoint = <span class="type">CABasicAnimation</span>(keyPath: <span class="string">"strokeEnd"</span>)</span><br><span class="line">    endPoint.fromValue = <span class="number">0</span></span><br><span class="line">    endPoint.toValue = <span class="number">1</span></span><br><span class="line">    endPoint.duration = <span class="number">1.8</span></span><br><span class="line">    endPoint.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: kCAMediaTimingFunctionEaseOut)</span><br><span class="line">    endPoint.repeatCount = <span class="type">HUGE</span></span><br><span class="line">    endPoint.fillMode = kCAFillModeForwards</span><br><span class="line">    endPoint.isRemovedOnCompletion = <span class="literal">false</span></span><br><span class="line">    endPoint.delegate = <span class="keyword">self</span></span><br><span class="line">    add(endPoint, forKey: endPoint.keyPath)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å°çƒä¸Šå‡å’Œè¿æ¥å¤„çš„å¤„ç†"><a href="#å°çƒä¸Šå‡å’Œè¿æ¥å¤„çš„å¤„ç†" class="headerlink" title="å°çƒä¸Šå‡å’Œè¿æ¥å¤„çš„å¤„ç†"></a>å°çƒä¸Šå‡å’Œè¿æ¥å¤„çš„å¤„ç†</h1><p>å°çƒä¸Šå‡åŠ¨ç”»å¾ˆç®€å•ï¼Œä¸€ä¸ª<code>CABasicAnimation</code>åŠ¨ç”»å°±å®ç°äº†ï¼Œä¸»è¦éº»çƒ¦çš„æ˜¯è¿æ¥å¤„çš„åŠ¨ç”»å®ç°ï¼Œæˆ‘çš„æ–¹æ¡ˆæ˜¯åœ¨å°çƒåŠ¨ç”»è¿‡ç¨‹ä¸­é€šè¿‡<code>CADisplayLink</code>å®æ—¶ç›‘å¬å°çƒå’Œå‚è€ƒ<code>view</code>çš„ä½ç½®ï¼Œè®¡ç®—å‡ºè´æ–¯å°”æ›²çº¿ï¼Œç„¶åé€šè¿‡ä¸€ä¸ªåä¸º<code>linkLayer: CAShapeLayer</code>çš„<code>layer</code>æ¥è¿æ¥å®ƒä»¬ï¼Œç„¶åè®©å®ƒä»¬åœ¨ç‰¹å®šçš„åœ°æ–¹æ–­å¼€ï¼Œä¸‹é¢æ˜¯ä¸»è¦ä»£ç å’Œæ•ˆæœå›¾ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/CRRefresh/CRRefresh8.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@objc</span> <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">displayAction</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> offY = ballLayer.circleLayer.presentation()?.frame.origin.y</span><br><span class="line">    <span class="keyword">let</span> frame1 = ballLayer.frame</span><br><span class="line">    <span class="keyword">let</span> frame2 = wavelayer.reference.layer.presentation()?.frame</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> offY = offY, <span class="keyword">let</span> frame2 = frame2 &#123;</span><br><span class="line">            <span class="type">DispatchQueue</span>.global().async &#123;</span><br><span class="line">                <span class="comment">// åˆ¤æ–­æ˜¯çƒæ˜¯å‘ä¸Šè¿˜æ˜¯ä¸‹ï¼Œfalseä¸ºä¸Š,é€Ÿåº¦å¿«æ—¶ï¼Œè·å–çš„ä½ç½®ä¸åŠæ—¶ï¼Œå‘ä¸‹æ—¶éœ€è¦è°ƒæ•´ä½ç½®</span></span><br><span class="line">                <span class="keyword">let</span> isIncrement = (offY - <span class="keyword">self</span>.previousOffY) &gt; <span class="number">0</span></span><br><span class="line">                <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">                <span class="keyword">let</span> x1 = frame1.origin.x + (isIncrement ? <span class="number">4</span> : <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">let</span> y1 = frame1.origin.y + offY</span><br><span class="line">                <span class="keyword">let</span> w1 = frame1.size.width - (isIncrement ? <span class="number">8</span> : <span class="number">0</span>)</span><br><span class="line">                <span class="keyword">let</span> h1 = frame1.size.height</span><br><span class="line">                <span class="keyword">let</span> x2 = frame2.origin.x</span><br><span class="line">                <span class="keyword">let</span> y2 = frame2.origin.y</span><br><span class="line">                <span class="keyword">let</span> w2 = frame2.size.width</span><br><span class="line">                <span class="keyword">let</span> h2 = frame2.size.height</span><br><span class="line">                <span class="keyword">let</span> subY = y2 - y1</span><br><span class="line">                <span class="comment">// y1å’Œy2çš„é—´è·</span></span><br><span class="line">                <span class="keyword">let</span> subScale = subY/<span class="keyword">self</span>.execute/<span class="number">2</span></span><br><span class="line">                <span class="comment">// æ–­å¼€çš„è·ç¦»ä¸º10</span></span><br><span class="line">                <span class="keyword">let</span> executeSub = <span class="keyword">self</span>.ballLayer.circleLayer.moveUpDist + offY</span><br><span class="line">                <span class="keyword">if</span> executeSub &lt; <span class="number">10</span> &#123;</span><br><span class="line">                    <span class="keyword">if</span> !isIncrement &#123;</span><br><span class="line">                        <span class="keyword">let</span> executeSubScale = executeSub/<span class="number">10</span></span><br><span class="line">                        path.move(to: .<span class="keyword">init</span>(x: x1 - <span class="number">15</span>, y: y2 + h2/<span class="number">2</span> + <span class="number">15</span>))</span><br><span class="line">                        path.addLine(to: .<span class="keyword">init</span>(x: x1 + w1 + <span class="number">15</span>, y: y2 + h2/<span class="number">2</span> + <span class="number">15</span>))</span><br><span class="line">                        path.addQuadCurve(to: .<span class="keyword">init</span>(x: x1 - <span class="number">15</span>, y: y2 + h2/<span class="number">2</span> + <span class="number">15</span>), controlPoint: .<span class="keyword">init</span>(x: x1 + w1/<span class="number">2</span>, y: y2 + h2/<span class="number">2</span> - <span class="keyword">self</span>.execute/<span class="number">6</span> * executeSubScale))</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    path.move(to: .<span class="keyword">init</span>(x: x2 , y: y2 + h2))</span><br><span class="line">                    path.addLine(to: .<span class="keyword">init</span>(x: x2 + w2, y: y2 + h2))</span><br><span class="line">                    path.addQuadCurve(to: .<span class="keyword">init</span>(x: x1 + w1, y: y1 + h1/<span class="number">2</span>), controlPoint: .<span class="keyword">init</span>(x: x1 + w1 - w1*<span class="number">2</span>*subScale, y: y1 + (y2 - y1)/<span class="number">2</span> + h1/<span class="number">2</span> + h2/<span class="number">2</span>))</span><br><span class="line">                    path.addLine(to: .<span class="keyword">init</span>(x: x1, y: y1 + h1/<span class="number">2</span>))</span><br><span class="line">                    path.addQuadCurve(to: .<span class="keyword">init</span>(x: x2 , y: y2 + h2), controlPoint: .<span class="keyword">init</span>(x: x1 + w1*<span class="number">2</span>*subScale, y: y1 + (y2 - y1)/<span class="number">2</span> + h1/<span class="number">2</span> + h2/<span class="number">2</span>))</span><br><span class="line">                    <span class="keyword">if</span> y1 + h1 &lt;= <span class="keyword">self</span>.execute, isIncrement &#123;</span><br><span class="line">                        <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                            <span class="keyword">self</span>.wavelayer.startDownAnimation()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="type">DispatchQueue</span>.main.async &#123;</span><br><span class="line">                    <span class="keyword">self</span>.linkLayer.path = path.cgPath</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">self</span>.previousOffY = offY</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æˆ‘è§‰å¾—æˆ‘è¿™ä¸ªåœ°æ–¹çš„å¤„ç†ä¸æ˜¯å¾ˆå¥½ï¼Œä½†æ˜¯ç®€å•ç²—æš´çš„è§£å†³äº†é—®é¢˜ï¼Œå¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„å»ºè®®ï¼Œå¯ä»¥æå‡ºæ¥ï¼Œå¤§å®¶ä¸€èµ·äº¤æµå­¦ä¹ ~</p>
<blockquote>
<p>å®Œæ•´çš„ä»£ç ï¼Œå¤§å®¶å¯ä»¥å»<a href="https://github.com/CRAnimation/CRRefresh" target="_blank" rel="external">githubåœ°å€</a>å»ä¸‹è½½ï¼Œæ¬¢è¿å¤§å®¶starå’Œå‘è¡¨æ„è§å’Œè´¡çŒ®ä»£ç ï¼Œæœ‰å¥½çš„åŠ¨æ•ˆçš„è¯ä¹Ÿå¯ä»¥æä¾›ï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 03æœˆ17æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[æ‰‹æŠŠæ‰‹æ•™ä½ å‘å¸ƒè‡ªå·±çš„å¼€æºæ¡†æ¶åˆ°CocoaPods]]></title>
      <url>http://imwcl.com/2017/03/17/%E6%89%8B%E6%8A%8A%E6%89%8B%E6%95%99%E4%BD%A0%E5%8F%91%E5%B8%83%E8%87%AA%E5%B7%B1%E7%9A%84%E5%BC%80%E6%BA%90%E6%A1%86%E6%9E%B6%E5%88%B0CocoaPods/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å¶å°”ä¼šå‘å¸ƒè‡ªå·±çš„å¼€æºæ¡†æ¶åˆ°CocoaPodsä¸Šï¼Œä½†æ˜¯æ¯æ¬¡éƒ½å¿˜è®°å‘½ä»¤è¡Œï¼Œå†™è¿™ç¯‡åšå®¢çš„ç›®çš„æ˜¯ä¸ºäº†è®°å½•ä¸‹æ¥æ­¥éª¤ï¼Œæ–¹ä¾¿ä»¥åç¿»é˜…ä½¿ç”¨</p>
</blockquote>
<h1 id="ä¸€ã€å…ˆå°†ä»£ç ä¼ åˆ°githubä¸Š"><a href="#ä¸€ã€å…ˆå°†ä»£ç ä¼ åˆ°githubä¸Š" class="headerlink" title="ä¸€ã€å…ˆå°†ä»£ç ä¼ åˆ°githubä¸Š"></a>ä¸€ã€å…ˆå°†ä»£ç ä¼ åˆ°githubä¸Š</h1><p>è¿™æ­¥æ¯”è¾ƒç®€å•ï¼Œå¤§è‡´è¯´ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// åˆ›å»ºæœ¬åœ°ä»“åº“</span><br><span class="line">git init</span><br><span class="line">// æ·»åŠ åç§°ä¸ºoriginçš„è¿œç¨‹è¿æ¥</span><br><span class="line">git remote add origin &apos;ä½ çš„githubé¡¹ç›®åœ°å€&apos;</span><br><span class="line">// å°†æœ¬åœ°ä»£ç åŠ å…¥æœ¬åœ°ä»“åº“é‡Œ</span><br><span class="line">git add .</span><br><span class="line">// æäº¤ä¿®æ”¹åˆ°æœ¬åœ°ä»“åº“</span><br><span class="line">git commit -m &apos;ä½ çš„ä¿®æ”¹è®°å½•&apos;</span><br><span class="line">// æ¨é€masteråˆ†æ”¯çš„ä»£ç åˆ°åç§°ä¸ºoriginçš„è¿œç¨‹ä»“åº“</span><br><span class="line">git push origin master</span><br></pre></td></tr></table></figure>
<a id="more"></a>
<h1 id="äºŒã€ç»™ä½ gitæ‰“ä¸Štag"><a href="#äºŒã€ç»™ä½ gitæ‰“ä¸Štag" class="headerlink" title="äºŒã€ç»™ä½ gitæ‰“ä¸Štag"></a>äºŒã€ç»™ä½ gitæ‰“ä¸Štag</h1><p>æ‰“tagçš„ç›®çš„å°±ç›¸å½“äºç»™ä½ çš„å¼€æºæ¡†æ¶åˆ¶å®šç‰ˆæœ¬å·ï¼Œæ¯ä¸ªç‰ˆæœ¬ä¸€ä¸ªtagï¼Œä¸‹é¢æ˜¯æ‰“tagçš„æµç¨‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// æŸ¥çœ‹æœ¬åœ°tag</span><br><span class="line">git tag</span><br><span class="line">// æ·»åŠ æœ¬åœ°tag 1.0.0</span><br><span class="line">git tag -a 1.0.0 -m &apos;release 1.0.0&apos;</span><br><span class="line">// å°†tagä¼ åˆ°è¿œç¨‹</span><br><span class="line">git push origin --tags</span><br></pre></td></tr></table></figure>
<h2 id="tagçš„å…¶ä»–æ“ä½œ"><a href="#tagçš„å…¶ä»–æ“ä½œ" class="headerlink" title="tagçš„å…¶ä»–æ“ä½œ"></a>tagçš„å…¶ä»–æ“ä½œ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// åˆ é™¤æœ¬åœ°tag</span><br><span class="line">git tag -d 1.0.0</span><br><span class="line">// åˆ é™¤è¿œç¨‹tag</span><br><span class="line">git push origin -d tag 1.0.0</span><br></pre></td></tr></table></figure>
<h1 id="ä¸‰ã€æ³¨å†ŒTrunk"><a href="#ä¸‰ã€æ³¨å†ŒTrunk" class="headerlink" title="ä¸‰ã€æ³¨å†ŒTrunk"></a>ä¸‰ã€æ³¨å†Œ<strong>Trunk</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk register ä½ çš„é‚®ç®± &apos;ä½ çš„ç”¨æˆ·å&apos; --description=&apos;ä½ çš„æè¿°&apos;</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸçš„è¯å°±ä¼šå—åˆ°ä¸€ä»½é‚®ä»¶ï¼Œç‚¹å‡»é‚®ä»¶ä¸­çš„é“¾æ¥åéªŒè¯ä¸€ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk me</span><br></pre></td></tr></table></figure>
<p>æˆåŠŸçš„è¯ä¼šè¿”å›ä»¥ä¸‹ç±»ä¼¼å­—æ®µï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">- Name:     WCL</span><br><span class="line">- Email:    wangchonglei93@icloud.com</span><br><span class="line">- Since:    January 10th, 21:32</span><br><span class="line">- Pods:</span><br><span class="line">  - WCLImagePickerController</span><br><span class="line">  - WCLShineButton</span><br><span class="line">  - CRRefresh</span><br><span class="line">- Sessions:</span><br><span class="line">  - January 10th, 21:32 - July 22nd, 07:38. IP: 58.132.205.59</span><br></pre></td></tr></table></figure>
<p>å¦‚æœä½ çš„podæ˜¯ç”±å¤šäººç»´æŠ¤çš„ï¼Œä½ ä¹Ÿå¯ä»¥æ·»åŠ å…¶ä»–ç»´æŠ¤è€…ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk add-owner ARAnalytics kyle@cocoapods.org</span><br></pre></td></tr></table></figure>
<h1 id="å››ã€åˆ›å»ºè‡ªå·±é¡¹ç›®çš„Podspecæè¿°æ–‡ä»¶"><a href="#å››ã€åˆ›å»ºè‡ªå·±é¡¹ç›®çš„Podspecæè¿°æ–‡ä»¶" class="headerlink" title="å››ã€åˆ›å»ºè‡ªå·±é¡¹ç›®çš„Podspecæè¿°æ–‡ä»¶"></a>å››ã€<strong>åˆ›å»ºè‡ªå·±é¡¹ç›®çš„Podspecæè¿°æ–‡ä»¶</strong></h1><p>ä¸Šä¼ åˆ°cocoapodsæ—¶ä¸»è¦å°±ä¾èµ–ç€.podspecçš„æè¿°æ–‡ä»¶æ¥è¿›è¡Œé…ç½®çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬è¦å…ˆå»ºç«‹ä¸€ä¸ª.podspecçš„æè¿°æ–‡ä»¶ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// åˆå§‹åŒ–.podspecæ–‡ä»¶</span><br><span class="line">pod spec create ä½ çš„é¡¹ç›®å</span><br></pre></td></tr></table></figure>
<p>åˆæ­¥äº†è§£.podspecæ–‡ä»¶ï¼š</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Pod::Spec.new do |s|</span><br><span class="line">  s.name         = "ä½ çš„é¡¹ç›®å"</span><br><span class="line">  s.version      = "é¡¹ç›®çš„ç‰ˆæœ¬"</span><br><span class="line">  s.summary      = "é¡¹ç›®çš„æè¿°"</span><br><span class="line">  s.homepage     = "é¡¹ç›®çš„ä¸»é¡µï¼Œä¸€èˆ¬ä¸ºgithubåœ°å€å°±è¡Œ"</span><br><span class="line">  s.license      = "è®¸å¯è¯ï¼šä¸€èˆ¬ä¸º MIT"</span><br><span class="line">  s.author             = &#123; "ä½œè€…å" =&gt; "ä½ çš„é‚®ç®±" &#125;</span><br><span class="line">  // æ”¯æŒçš„æœ€ä½ç‰ˆæœ¬ï¼Œæ¯”å¦‚ios 8.0</span><br><span class="line">  s.platform     = :ios, "8.0"</span><br><span class="line">  // æºä»£ç åœ°å€ï¼Œä¹Ÿå°±æ˜¯ä½ githubä¸Šçš„åœ°å€</span><br><span class="line">  s.source       = &#123; :git =&gt; "ä½ çš„githubåœ°å€", :tag =&gt; "é¡¹ç›®çš„tag" &#125;</span><br><span class="line">  // æºä»£ç çš„æ–‡ä»¶è·¯å¾„</span><br><span class="line">  s.source_files  = "WCL", "WCL/**/*.&#123;h,m&#125;" , "WCL/*.&#123;swift&#125;"</span><br><span class="line">  // èµ„æºæ–‡ä»¶è·¯å¾„</span><br><span class="line">  s.resources     = "WCL.png", "WCL/**/*.&#123;bundle&#125;" , "WCL/*.&#123;bundle&#125;"</span><br><span class="line">  // ç”¨åˆ°çš„æ¡†æ¶</span><br><span class="line">  s.framework  = "UIKit"</span><br><span class="line">  // ä¾èµ–çš„ç¬¬ä¸‰æ–¹åº“</span><br><span class="line">  s.dependency "JSONKit", "~&gt; 1.4"</span><br></pre></td></tr></table></figure>
<p>ç¼–è¾‘å®Œpodspecæ–‡ä»¶åï¼Œéœ€è¦éªŒè¯ä¸€ä¸‹è¿™ä¸ªæ–‡ä»¶æ˜¯å¦å¯ç”¨ï¼Œå¦‚æœæœ‰ä»»ä½•WARNINGæˆ–è€…ERRORéƒ½æ˜¯ä¸å¯ä»¥çš„ï¼Œå®ƒå°±ä¸èƒ½è¢«æ·»åŠ åˆ°Spec Repoä¸­ï¼Œä¸è¿‡xcodeçš„WARNINGæ˜¯å¯ä»¥å­˜åœ¨çš„ï¼ŒéªŒè¯éœ€è¦æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod spec lint ä½ çš„podspecæ–‡ä»¶å.podspec</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡çš„è¯å°±éªŒè¯æˆåŠŸï¼Œå¤±è´¥ä¼šå‘Šè¯‰ä½ é”™è¯¯çš„ä½ç½®ï¼Œä¸€èˆ¬å¾ˆè¯¦ç»†</p>
<h1 id="äº”ã€ä¼ åˆ°CocoaPodsä¸Š"><a href="#äº”ã€ä¼ åˆ°CocoaPodsä¸Š" class="headerlink" title="äº”ã€ä¼ åˆ°CocoaPodsä¸Š"></a>äº”ã€ä¼ åˆ°CocoaPodsä¸Š</h1><p>pod trunk push å‘½ä»¤ä¼šé¦–å…ˆéªŒè¯ä½ æœ¬åœ°çš„podspecæ–‡ä»¶(æ˜¯å¦æœ‰é”™è¯¯)ï¼Œä¹‹åä¼šä¸Šä¼ specæ–‡ä»¶åˆ°trunkï¼Œæœ€åä¼šå°†ä½ ä¸Šä¼ çš„podspecæ–‡ä»¶è½¬æ¢ä¸ºéœ€è¦çš„jsonæ–‡ä»¶ã€‚åœ¨å·¥ç¨‹æ ¹ç›®å½•(åŒ…å«æœ‰.podspec)ä¸‹æ‰§è¡Œå‘½ä»¤ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pod trunk push</span><br></pre></td></tr></table></figure>
<p>æ²¡æœ‰é”™è¯¯çš„è¯ï¼Œä¼šæç¤ºä½ æˆåŠŸï¼Œå¹¶è¿”å›ä¸€ä¸‹ç±»ä¼¼ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">--------------------------------------------------------------------------------</span><br><span class="line"> ğŸ‰  Congrats</span><br><span class="line"></span><br><span class="line"> ğŸš€  CRRefresh (1.0.0) successfully published</span><br><span class="line"> ğŸ“…  March 16th, 07:14</span><br><span class="line"> ğŸŒ  https://cocoapods.org/pods/CRRefresh</span><br><span class="line"> ğŸ‘  Tell your friends!</span><br><span class="line">--------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šæ˜¯åŸºæœ¬æµç¨‹ï¼Œå¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿äº¤æµï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 03æœˆ 09æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftè®¾è®¡æ¨¡å¼å­¦ä¹  - å¤–è§‚æ¨¡å¼]]></title>
      <url>http://imwcl.com/2017/03/09/swift%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="å¤–è§‚æ¨¡å¼"><a href="#å¤–è§‚æ¨¡å¼" class="headerlink" title="å¤–è§‚æ¨¡å¼"></a>å¤–è§‚æ¨¡å¼</h1><p>å¤–è§‚æ¨¡å¼ï¼ˆFacadeï¼‰ï¼Œä¸ºå­ç³»ç»Ÿä¸­çš„ä¸€ç»„æ¥å£æä¾›ä¸€ä¸ªä¸€è‡´çš„ç•Œé¢ï¼Œå®šä¹‰ä¸€ä¸ªé«˜å±‚æ¥å£ï¼Œè¿™ä¸ªæ¥å£ä½¿å¾—è¿™ä¸€å­ç³»ç»Ÿæ›´åŠ å®¹æ˜“ä½¿ç”¨ã€‚</p>
<h2 id="å¤–è§‚æ¨¡å¼çš„åŸºæœ¬å®ç°"><a href="#å¤–è§‚æ¨¡å¼çš„åŸºæœ¬å®ç°" class="headerlink" title="å¤–è§‚æ¨¡å¼çš„åŸºæœ¬å®ç°"></a>å¤–è§‚æ¨¡å¼çš„åŸºæœ¬å®ç°</h2><p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/Facade.png" alt=""></p>
<a id="more"></a>
<p>ä¸Šå›¾æ˜¯å¤–è§‚æ¨¡å¼çš„UMLå›¾ï¼Œä¸‹é¢æ˜¯åŸºæœ¬çš„ä»£ç å®ç°è¿‡ç¨‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MARK: å¤–è§‚ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Facade</span> </span>&#123;</span><br><span class="line">    <span class="keyword">let</span> one   = <span class="type">SubSystemOne</span>()</span><br><span class="line">    <span class="keyword">let</span> two   = <span class="type">SubSystemTwo</span>()</span><br><span class="line">    <span class="keyword">let</span> three = <span class="type">SubSystemThree</span>()</span><br><span class="line">    <span class="keyword">let</span> four  = <span class="type">SubSystemFour</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">methodA</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"æ–¹æ³•ç»„A"</span>)</span><br><span class="line">        one.methodOne()</span><br><span class="line">        two.methodTwo()</span><br><span class="line">        three.methodThree()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">methodB</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"æ–¹æ³•ç»„B"</span>)</span><br><span class="line">        two.methodTwo()</span><br><span class="line">        three.methodThree()</span><br><span class="line">        four.methodFour()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//MARK: å­ç³»ç»Ÿç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubSystemOne</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">methodOne</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å­ç³»ç»Ÿæ–¹æ³•ä¸€"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubSystemTwo</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">methodTwo</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å­ç³»ç»Ÿæ–¹æ³•äºŒ"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubSystemThree</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">methodThree</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å­ç³»ç»Ÿæ–¹æ³•ä¸‰"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SubSystemFour</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">methodFour</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å­ç³»ç»Ÿæ–¹æ³•å››"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å¤–è§‚æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆè´­ä¹°åŸºé‡‘ï¼‰"><a href="#å¤–è§‚æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆè´­ä¹°åŸºé‡‘ï¼‰" class="headerlink" title="å¤–è§‚æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆè´­ä¹°åŸºé‡‘ï¼‰"></a>å¤–è§‚æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆè´­ä¹°åŸºé‡‘ï¼‰</h2><p>åœ¨ç”Ÿæ´»ä¸­å¾ˆå¤šåœ°æ–¹ä¹Ÿç”¨åˆ°å¤–è§‚æ¨¡å¼ï¼Œæ¯”å¦‚è´­ä¹°åŸºé‡‘ï¼Œæˆ‘ä»¬ä»åŸºé‡‘æœºæ„é‚£é‡Œè´­ä¹°åŸºé‡‘ï¼Œç„¶åä»–ä»¬å¸®æˆ‘ä»¬ç®¡ç†æˆ‘ä»¬çš„åŸºé‡‘ï¼Œå»æ“ä½œå’Œè¿è¡Œï¼Œæˆ‘ä»¬åªç®¡è´­ä¹°å’Œå–å‡ºå°±è¡Œäº†ï¼Œè€Œä¸ç”¨å»ç®¡ä»–ä»¬å†…éƒ¨çš„æ“ä½œï¼Œä¸‹é¢æ˜¯UMLå›¾å’Œå…·ä½“å®ç°ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%A4%96%E8%A7%82%E6%A8%A1%E5%BC%8F/Fund.png" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/// åŸºé‡‘ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fund</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> gu1 = <span class="type">Stock1</span>()</span><br><span class="line">    <span class="keyword">var</span> gu2 = <span class="type">Stock2</span>()</span><br><span class="line">    <span class="keyword">var</span> gu3 = <span class="type">Stock3</span>()</span><br><span class="line">    <span class="keyword">var</span> nd  = <span class="type">NationalDebt</span>()</span><br><span class="line">    <span class="keyword">var</span> rt  = <span class="type">Realty</span>()</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">buyFund</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ä¹°å…¥åŸºé‡‘"</span>)</span><br><span class="line">        gu1.buy()</span><br><span class="line">        gu2.buy()</span><br><span class="line">        gu3.buy()</span><br><span class="line">        nd.buy()</span><br><span class="line">        rt.buy()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">shellFund</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"\nå–å‡ºåŸºé‡‘"</span>)</span><br><span class="line">        gu1.shell()</span><br><span class="line">        gu2.shell()</span><br><span class="line">        gu3.shell()</span><br><span class="line">        nd.shell()</span><br><span class="line">        rt.shell()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//è‚¡ç¥¨ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stock1</span>: <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dealName: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"è‚¡ç¥¨ä¸€"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stock2</span>: <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dealName: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"è‚¡ç¥¨äºŒ"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stock3</span>: <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dealName: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"è‚¡ç¥¨ä¸‰"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">NationalDebt</span>: <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dealName: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"å›½å€º"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Realty</span>: <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dealName: <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"æˆ¿åœ°äº§"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> dealName: <span class="type">String</span> &#123;<span class="keyword">get</span>&#125;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">shell</span><span class="params">()</span></span></span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">buy</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">extension</span> <span class="title">Deal</span> </span>&#123;</span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">shell</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(dealName)</span>å–å‡º"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">mutating</span> <span class="function"><span class="keyword">func</span> <span class="title">buy</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(dealName)</span>ä¹°å…¥"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p> ä¸‹é¢æˆ‘ä»¬è°ƒç”¨ä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> jijin = <span class="type">Fund</span>()</span><br><span class="line"><span class="comment">// åŸºé‡‘è´­ä¹°</span></span><br><span class="line">jijin.buyFund()</span><br><span class="line"><span class="comment">// åŸºé‡‘èµå›</span></span><br><span class="line">jijin.shellFund()</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯è°ƒç”¨çš„ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">ä¹°å…¥åŸºé‡‘</span><br><span class="line">è‚¡ç¥¨ä¸€ä¹°å…¥</span><br><span class="line">è‚¡ç¥¨äºŒä¹°å…¥</span><br><span class="line">è‚¡ç¥¨ä¸‰ä¹°å…¥</span><br><span class="line">å›½å€ºä¹°å…¥</span><br><span class="line">æˆ¿åœ°äº§ä¹°å…¥</span><br><span class="line"></span><br><span class="line">å–å‡ºåŸºé‡‘</span><br><span class="line">è‚¡ç¥¨ä¸€å–å‡º</span><br><span class="line">è‚¡ç¥¨äºŒå–å‡º</span><br><span class="line">è‚¡ç¥¨ä¸‰å–å‡º</span><br><span class="line">å›½å€ºå–å‡º</span><br><span class="line">æˆ¿åœ°äº§å–å‡º</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯ç®€å•çš„å¤–è§‚æ¨¡å¼çš„å®ç°ï¼Œå®šä¹‰é«˜å±‚æ¥å£ï¼ŒåŸºé‡‘çš„ä¹°å…¥å’Œå–å‡ºï¼Œå»ä½¿ç”¨æ•´ä¸ªåŸºé‡‘ç³»ç»Ÿï¼Œè€Œä¸ç”¨å»ç®¡å†…éƒ¨æ˜¯æ€ä¹ˆæ“ä½œçš„ã€‚</p>
<h2 id="å¤–è§‚æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#å¤–è§‚æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="å¤–è§‚æ¨¡å¼çš„ä¼˜ç‚¹"></a>å¤–è§‚æ¨¡å¼çš„ä¼˜ç‚¹</h2><p>ï¼ˆ1ï¼‰å®ç°äº†å­ç³»ç»Ÿä¸å®¢æˆ·ç«¯ä¹‹é—´çš„æ¾è€¦åˆå…³ç³»ã€‚</p>
<p>ï¼ˆ2ï¼‰å®¢æˆ·ç«¯å±è”½äº†å­ç³»ç»Ÿç»„ä»¶ï¼Œå‡å°‘äº†å®¢æˆ·ç«¯æ‰€éœ€å¤„ç†çš„å¯¹è±¡æ•°ç›®ï¼Œå¹¶ä½¿å¾—å­ç³»ç»Ÿä½¿ç”¨èµ·æ¥æ›´åŠ å®¹æ˜“ã€‚</p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 03æœˆ 09æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftè®¾è®¡æ¨¡å¼å­¦ä¹  - æ¨¡æ¿æ–¹æ³•æ¨¡å¼]]></title>
      <url>http://imwcl.com/2017/02/24/swift%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼</h1><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œå®šä¹‰ä¸€ä¸ªæ“ä½œä¸­ç®—æ³•çš„éª¨æ¶ï¼Œè€Œå°†ä¸€äº›æ­¥éª¤å»¶è¿Ÿåˆ°å­ç±»ä¸­ã€‚æ¨¡æ¿æ–¹æ³•ä½¿å¾—å­ç±»å¯ä»¥ä¸æ”¹å˜ä¸€ä¸ªç®—æ³•çš„ç»“æ„å³å¯é‡å®šä¹‰è¯¥ç®—æ³•çš„æŸäº›ç‰¹å®šæ­¥éª¤ã€‚</p>
<h2 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åŸºæœ¬å®ç°"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åŸºæœ¬å®ç°" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åŸºæœ¬å®ç°"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„åŸºæœ¬å®ç°</h2><p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/TemplateMethod.png" alt=""></p>
<a id="more"></a>
<p>ä¸Šå›¾æ˜¯åŸºæœ¬æ¨¡æ¿æ¨¡å¼çš„UMLå›¾ï¼Œè¿™ç§è®¾è®¡æ¨¡å¼åœ¨å¾ˆå¤šåœ°æ–¹éƒ½æœ‰ç”¨åˆ°ï¼Œä¸‹é¢æ˜¯åŸºæœ¬å®ç°çš„ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">AbstractClass</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">primitiveOperation1</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">primitiveOperation2</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">templateMethod</span><span class="params">()</span></span> &#123;</span><br><span class="line">        primitiveOperation1()</span><br><span class="line">        primitiveOperation2()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClassA</span>: <span class="title">AbstractClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">primitiveOperation1</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å…·ä½“ç±»Aæ–¹æ³•1å®ç°"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">primitiveOperation2</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å…·ä½“ç±»Aæ–¹æ³•2å®ç°"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteClassB</span>: <span class="title">AbstractClass</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">primitiveOperation1</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å…·ä½“ç±»Bæ–¹æ³•1å®ç°"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">primitiveOperation2</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"å…·ä½“ç±»Bæ–¹æ³•2å®ç°"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¡«è¡¨æ ¼ï¼‰"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¡«è¡¨æ ¼ï¼‰" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¡«è¡¨æ ¼ï¼‰"></a><strong>æ¨¡æ¿æ–¹æ³•æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¡«è¡¨æ ¼ï¼‰</strong></h2><p>åœ¨ç”Ÿæ´»ä¸­å¾ˆå¤šåœ°æ–¹ç”¨åˆ°çš„æ¨¡æ¿æ–¹æ³•æ¨¡å¼ï¼Œæ¯”å¦‚æˆ‘ä»¬å¡«ä¸€ä»½è¡¨æ ¼ï¼Œæˆ‘ä»¬è¦æŒ‰ç…§è¡¨æ ¼çš„æ¨¡æ¿å¼€å§‹å¡«ï¼Œåªéœ€è¦å¡«å…³é”®éƒ¨åˆ†ï¼Œè€Œä¸ç”¨å°†è¡¨æ ¼çš„æ‰€æœ‰æ–‡å­—ç‚’ä¸€éï¼Œä¸‹é¢æ˜¯UMLå’Œä»£ç ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E6%A8%A1%E6%9D%BF%E6%96%B9%E6%B3%95%E6%A8%A1%E5%BC%8F/TemplateTable.png" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è¡¨æ ¼çš„æ¨¡æ¿</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">TemplateTable</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showTable</span><span class="params">()</span></span> &#123;</span><br><span class="line">        fillName()</span><br><span class="line">        fillSex()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fillName</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ä½ çš„åå­—ï¼š<span class="subst">\(yourName()</span>)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">fillSex</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ä½ çš„æ€§åˆ«ï¼š<span class="subst">\(yourSex()</span>)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">yourName</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">yourSex</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">""</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// wclå¡«å†™çš„è¡¨æ ¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WCLTable</span>: <span class="title">TemplateTable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">yourName</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"wcl"</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">yourSex</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"male"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// scyå¡«å†™çš„è¡¨æ ¼</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SCYTable</span>: <span class="title">TemplateTable</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">yourName</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"scy"</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">yourSex</span><span class="params">()</span></span> -&gt; <span class="type">String</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"female"</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬è°ƒç”¨ä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wcl = <span class="type">WCLTable</span>()</span><br><span class="line">wcl.showTable()</span><br><span class="line"><span class="keyword">let</span> scy = <span class="type">SCYTable</span>()</span><br><span class="line">scy.showTable()</span><br></pre></td></tr></table></figure>
<p> ä¸‹é¢æ˜¯è°ƒç”¨çš„ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">ä½ çš„åå­—ï¼šwcl</span><br><span class="line">ä½ çš„æ€§åˆ«ï¼šmale</span><br><span class="line">ä½ çš„åå­—ï¼šscy</span><br><span class="line">ä½ çš„æ€§åˆ«ï¼šfemale</span><br></pre></td></tr></table></figure>
<h2 id="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç‰¹ç‚¹"><a href="#æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç‰¹ç‚¹" class="headerlink" title="æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç‰¹ç‚¹"></a>æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç‰¹ç‚¹</h2><p>æ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯é€šè¿‡æŠŠä¸å˜è¡Œä¸ºæ¬ç§»åˆ°è¶…ç±»ï¼Œå»é™¤å­ç±»ä¸­é‡å¤ä»£ç æ¥ä½“ç°å®ƒçš„ä¼˜åŠ¿ï¼Œå®ƒæä¾›äº†ä¸€ä¸ªå¾ˆå¥½çš„ä»£ç å¤ç”¨å¹³å°ã€‚</p>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æˆ‘å¯¹æ¨¡æ¿æ–¹æ³•æ¨¡å¼çš„ç†è§£ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿å¤§å®¶äº¤æµï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 02æœˆ 24æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftè®¾è®¡æ¨¡å¼å­¦ä¹  - ä»£ç†æ¨¡å¼]]></title>
      <url>http://imwcl.com/2017/02/21/swift%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p><a href="https://github.com/631106979/SwiftDesignPattern" target="_blank" rel="external">è®¾è®¡æ¨¡å¼å­¦ä¹ çš„demoåœ°å€</a>ï¼Œæ¬¢è¿å¤§å®¶å­¦ä¹ äº¤æµ</p>
</blockquote>
<h1 id="ä»£ç†æ¨¡å¼"><a href="#ä»£ç†æ¨¡å¼" class="headerlink" title="ä»£ç†æ¨¡å¼"></a>ä»£ç†æ¨¡å¼</h1><p>ä»£ç†æ¨¡å¼ä¸ºå…¶ä»–å¯¹è±¡æä¾›ä¸€ç§ä»£ç†ä»¥æ§åˆ¶å¯¹è¿™ä¸ªå¯¹è±¡çš„è®¿é—®ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä¸€ä¸ªå¯¹è±¡ä¸é€‚åˆæˆ–è€…ä¸èƒ½ç›´æ¥å¼•ç”¨å¦ä¸€ä¸ªå¯¹è±¡ï¼Œè€Œä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ã€‚</p>
<h2 id="ä»£ç†æ¨¡å¼çš„ç»„æˆ"><a href="#ä»£ç†æ¨¡å¼çš„ç»„æˆ" class="headerlink" title="ä»£ç†æ¨¡å¼çš„ç»„æˆ"></a>ä»£ç†æ¨¡å¼çš„ç»„æˆ</h2><ul>
<li><strong>æŠ½è±¡è§’è‰²</strong>ï¼šé€šè¿‡æ¥å£æˆ–æŠ½è±¡ç±»å£°æ˜çœŸå®è§’è‰²å®ç°çš„ä¸šåŠ¡æ–¹æ³•ã€‚</li>
<li><strong>ä»£ç†è§’è‰²</strong>ï¼šå®ç°æŠ½è±¡è§’è‰²ï¼Œæ˜¯çœŸå®è§’è‰²çš„ä»£ç†ï¼Œé€šè¿‡çœŸå®è§’è‰²çš„ä¸šåŠ¡é€»è¾‘æ–¹æ³•æ¥å®ç°æŠ½è±¡æ–¹æ³•ï¼Œå¹¶å¯ä»¥é™„åŠ è‡ªå·±çš„æ“ä½œã€‚</li>
<li><strong>çœŸå®è§’è‰²</strong>ï¼šå®ç°æŠ½è±¡è§’è‰²ï¼Œå®šä¹‰çœŸå®è§’è‰²æ‰€è¦å®ç°çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¾›ä»£ç†è§’è‰²è°ƒç”¨ã€‚</li>
</ul>
<a id="more"></a>
<h2 id="ä»£ç†æ¨¡å¼çš„åŸºæœ¬å®ç°"><a href="#ä»£ç†æ¨¡å¼çš„åŸºæœ¬å®ç°" class="headerlink" title="ä»£ç†æ¨¡å¼çš„åŸºæœ¬å®ç°"></a>ä»£ç†æ¨¡å¼çš„åŸºæœ¬å®ç°</h2><p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E4%BB%A3%E7%90%86%E6%A8%A1%E5%BC%8F/Proxy.png" alt=""></p>
<p>ä¸Šå›¾æ˜¯æœ€åŸºæœ¬çš„ä»£ç†æ¨¡å¼çš„ç»“æ„å›¾ï¼Œä¸‹é¢å°†ç”¨<strong>Swift</strong>ä»£ç æ¥å®ç°ä¸€ä¸ªåŸºæœ¬ä»£ç†æ¨¡å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">request</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RealSubject</span>: <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">request</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"çœŸå®çš„è¯·æ±‚"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Proxy</span>: <span class="title">Subject</span> </span>&#123;</span><br><span class="line">    <span class="comment">// çœŸå®çš„å¯¹è±¡</span></span><br><span class="line">    <span class="keyword">var</span> realSubject: <span class="type">RealSubject</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">request</span><span class="params">()</span></span> &#123;</span><br><span class="line">        realSubject?.request()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªæœ€åŸºæœ¬çš„ä»£ç†æ¨¡å¼çš„æ„æˆï¼Œè¿™æ ·å¯ä»¥ç”¨<code>Proxy</code>æ¥ä»£æ›¿<code>RealSubject</code>ï¼Œä»è€Œå¯¹å®¢æˆ·ç«¯éšè—çœŸå®çš„å¯¹è±¡ã€‚</p>
<h2 id="ä»£ç†æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¿«é€’äºæ·˜å®å–å®¶çš„å…³ç³»ï¼‰"><a href="#ä»£ç†æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¿«é€’äºæ·˜å®å–å®¶çš„å…³ç³»ï¼‰" class="headerlink" title="ä»£ç†æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¿«é€’äºæ·˜å®å–å®¶çš„å…³ç³»ï¼‰"></a>ä»£ç†æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå¿«é€’äºæ·˜å®å–å®¶çš„å…³ç³»ï¼‰</h2><p>åœ¨ç”Ÿæ´»ä¸­å¾ˆå¤šåœ°æ–¹å­˜åœ¨ç€ä»£ç†æ¨¡å¼ï¼Œæ¯”å¦‚æ·˜å®å–å®¶ä¸å¿«é€’çš„é—®é¢˜ï¼Œæˆ‘ä»¬ä¹°ä¸œè¥¿éœ€è¦æ·˜å®å–å®¶è¿›è¡Œé…é€ï¼Œä½†æ˜¯å…¶å®ä»–ä»¬å¹¶æ²¡æœ‰é…é€çš„åŠŸèƒ½ï¼Œå®é™…ä¸Šæ˜¯ç”±å¿«é€’å…¬å¸è¿›è¡Œçš„é…é€ï¼Œæ·˜å®å°±ç›¸å½“äºå¿«é€’å…¬å¸çš„ä»£ç†ï¼Œä¹°å®¶ä¹Ÿä¸ç”¨å…³å¿ƒæ·˜å®å–å®¶æ˜¯æ€ä¹ˆé€è´§è¿‡æ¥çš„ï¼Œä¸‹é¢æ˜¯å¤§æ¦‚çš„å®ç°æ–¹å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªé…é€çš„æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Deliver</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> goodsName: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">deliverGoods</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å¿«é€’å…¬å¸ç»§æ‰¿é…é€çš„æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Express</span>: <span class="title">Deliver</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> goodsName: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(goodsName: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.goodsName = goodsName</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">deliverGoods</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ç”±é¡ºä¸°å¿«é€’é…é€<span class="subst">\(goodsName)</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ·˜å®å–å®¶ä¹Ÿç»§æ‰¿é…é€çš„æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Taobao</span>: <span class="title">Deliver</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å®é™…ä¸Šæ˜¯ç”±å¿«é€’å…¬å¸é…é€</span></span><br><span class="line">    <span class="keyword">var</span> express: <span class="type">Express</span></span><br><span class="line">    <span class="keyword">var</span> goodsName: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(goodsName: <span class="type">String</span>) &#123;</span><br><span class="line">        express = <span class="type">Express</span>(goodsName: goodsName)</span><br><span class="line">        <span class="keyword">self</span>.goodsName = goodsName</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ä¹°äº†ä¸€ä¸ª<span class="subst">\(goodsName)</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">deliverGoods</span><span class="params">()</span></span> &#123;</span><br><span class="line">        express.deliverGoods()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸‹ä»¥ä¸Šä»£ç çœ‹çœ‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> tb = <span class="type">Taobao</span>(goodsName: <span class="string">"ç”µè„‘"</span>)</span><br><span class="line">tb.deliverGoods()</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æ‰“å°ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¹°äº†ä¸€ä¸ªç”µè„‘</span><br><span class="line">ç”±é¡ºä¸°å¿«é€’é…é€ç”µè„‘</span><br></pre></td></tr></table></figure>
<h2 id="ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹"><a href="#ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹" class="headerlink" title="ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹"></a>ä»£ç†æ¨¡å¼çš„ä¼˜ç‚¹</h2><ol>
<li>èŒè´£æ¸…æ™°ï¼ŒçœŸå®çš„è§’è‰²å°±æ˜¯å®ç°å®é™…çš„ä¸šåŠ¡é€»è¾‘ï¼Œä¸ç”¨å…³å¿ƒå…¶ä»–éæœ¬èŒè´£çš„äº‹åŠ¡ï¼Œé€šè¿‡åæœŸçš„ä»£ç†å®Œæˆä¸€ä»¶å®Œæˆäº‹åŠ¡ï¼Œé™„å¸¦çš„ç»“æœå°±æ˜¯ç¼–ç¨‹ç®€æ´æ¸…æ™°ã€‚</li>
<li>ä»£ç†å¯¹è±¡å¯ä»¥åœ¨å®¢æˆ·ç«¯å’Œç›®æ ‡å¯¹è±¡ä¹‹é—´èµ·åˆ°ä¸­ä»‹çš„ä½œç”¨ï¼Œè¿™æ ·èµ·åˆ°äº†ä¸­ä»‹çš„ä½œç”¨å’Œä¿æŠ¤äº†ç›®æ ‡å¯¹è±¡çš„ä½œç”¨ã€‚</li>
<li>é«˜æ‰©å±•æ€§</li>
</ol>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æˆ‘å¯¹äºä»£ç†æ¨¡å¼çš„ç†è§£ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿å¤§å®¶äº¤æµï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 02æœˆ 21æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftè®¾è®¡æ¨¡å¼å­¦ä¹  - åŸå‹æ¨¡å¼]]></title>
      <url>http://imwcl.com/2017/02/20/swift%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<blockquote>
<p><a href="https://github.com/631106979/SwiftDesignPattern" target="_blank" rel="external">è®¾è®¡æ¨¡å¼å­¦ä¹ çš„demoåœ°å€</a>ï¼Œæ¬¢è¿å¤§å®¶å­¦ä¹ äº¤æµ</p>
</blockquote>
<h1 id="åŸå‹æ¨¡å¼"><a href="#åŸå‹æ¨¡å¼" class="headerlink" title="åŸå‹æ¨¡å¼"></a>åŸå‹æ¨¡å¼</h1><p>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚</p>
<h2 id="å®šä¹‰"><a href="#å®šä¹‰" class="headerlink" title="å®šä¹‰"></a>å®šä¹‰</h2><p>ç”¨åŸå‹å®ä¾‹æŒ‡å®šåˆ›å»ºå¯¹è±¡çš„ç§ç±»ï¼Œå¹¶ä¸”é€šè¿‡æ‹·è´è¿™äº›åŸå‹åˆ›å»ºæ–°çš„å¯¹è±¡ã€‚<code>Prototype</code>åŸå‹æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ<code>Prototype</code>æ¨¡å¼å…è®¸ä¸€ä¸ªå¯¹è±¡å†åˆ›å»ºå¦å¤–ä¸€ä¸ªå¯å®šåˆ¶çš„å¯¹è±¡ï¼Œæ ¹æœ¬æ— éœ€çŸ¥é“ä»»ä½•å¦‚ä½•åˆ›å»ºçš„ç»†èŠ‚,å·¥ä½œåŸç†æ˜¯:é€šè¿‡å°†ä¸€ä¸ªåŸå‹å¯¹è±¡ä¼ ç»™é‚£ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡ï¼Œè¿™ä¸ªè¦å‘åŠ¨åˆ›å»ºçš„å¯¹è±¡é€šè¿‡è¯·æ±‚åŸå‹å¯¹è±¡æ‹·è´å®ƒä»¬è‡ªå·±æ¥å®æ–½åˆ›å»ºã€‚å®ƒä¸»è¦é¢å¯¹çš„é—®é¢˜æ˜¯ï¼šâ€œæŸäº›ç»“æ„å¤æ‚çš„å¯¹è±¡â€çš„åˆ›å»ºå·¥ä½œï¼›ç”±äºéœ€æ±‚çš„å˜åŒ–ï¼Œè¿™äº›å¯¹è±¡ç»å¸¸é¢ä¸´ç€å‰§çƒˆçš„å˜åŒ–ï¼Œä½†æ˜¯ä»–ä»¬å´æ‹¥æœ‰æ¯”è¾ƒç¨³å®šä¸€è‡´çš„æ¥å£ã€‚</p>
<a id="more"></a>
<h2 id="åŸå‹æ¨¡å¼çš„åŸºæœ¬å®ç°"><a href="#åŸå‹æ¨¡å¼çš„åŸºæœ¬å®ç°" class="headerlink" title="åŸå‹æ¨¡å¼çš„åŸºæœ¬å®ç°"></a>åŸå‹æ¨¡å¼çš„åŸºæœ¬å®ç°</h2><p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E5%8E%9F%E5%9E%8B%E6%A8%A1%E5%BC%8F/prototype.png" alt=""></p>
<p>ä¸Šå›¾æ˜¯æœ€åŸºæœ¬çš„åŸå‹æ¨¡å¼çš„ç»“æ„å›¾ï¼Œä¸‹é¢å°†ç”¨<strong>Swift</strong>ä»£ç æ¥å®ç°ä¸€ä¸ªåŸºæœ¬åŸå‹æ¨¡å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªåŸå‹åè®®</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">String</span> &#123; <span class="keyword">get</span> &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">clone</span><span class="params">()</span></span> -&gt; <span class="type">Prototype</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// åŸå‹çš„å…·ä½“å¯¹è±¡</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcretePrototypeA</span>: <span class="title">Prototype</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> id: <span class="type">String</span> = <span class="string">""</span></span><br><span class="line">    <span class="comment">// å®ç°å…‹éš†çš„å…·ä½“æ“ä½œ</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">clone</span><span class="params">()</span></span> -&gt; <span class="type">Prototype</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> p = <span class="type">ConcretePrototypeA</span>()</span><br><span class="line">        p.id = id</span><br><span class="line">        <span class="keyword">return</span> p</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸çŸ¥é“å¤§å®¶æœ‰æ²¡å“Ÿå‘ç°ï¼Œè¿™ä¸ªè®¾è®¡æ¨¡å¼æˆ‘ä»¬åœ¨ä»£ç ä¸­ç»å¸¸ä¼šç”¨åˆ°ï¼Œé‚£å°±æ˜¯<code>NSCopying</code>åè®®ï¼Œé€šè¿‡è¿™ä¸ªåè®®æ¥å®ç°å¯¹è±¡çš„æ·±æ‹·è´ï¼Œä¸‹é¢æˆ‘ä»¬å°±ç”¨<code>NSCopying</code>æ¥å®ç°ä¸€ä¸‹ã€‚</p>
<h2 id="åŸå‹æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆNSCopyingï¼‰"><a href="#åŸå‹æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆNSCopyingï¼‰" class="headerlink" title="åŸå‹æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆNSCopyingï¼‰"></a>åŸå‹æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆNSCopyingï¼‰</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Resume</span>: <span class="title">NSCopying</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> name: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> sex: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> age: <span class="type">String</span></span><br><span class="line">    <span class="keyword">var</span> company: <span class="type">String</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(name: <span class="type">String</span>, sex: <span class="type">String</span>, age: <span class="type">String</span>, company: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.name = name</span><br><span class="line">        <span class="keyword">self</span>.sex = sex</span><br><span class="line">        <span class="keyword">self</span>.age = age</span><br><span class="line">        <span class="keyword">self</span>.company = company</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">disPlay</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"name: <span class="subst">\(name)</span>, sex: <span class="subst">\(sex)</span>, age: <span class="subst">\(age)</span>, company: <span class="subst">\(company)</span>"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">copy</span><span class="params">(with zone: NSZone? = <span class="literal">nil</span>)</span></span> -&gt; <span class="type">Any</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">Resume</span>(name: name, sex: sex, age: age, company: company)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢æ˜¯é€šè¿‡<code>NSCopying</code>æ¥å®ç°åŸå‹æ¨¡å¼çš„ä¾‹å­ï¼Œä¸€ä¸‹æ˜¯ä½¿ç”¨è¿‡ç¨‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> wcl = <span class="type">Resume</span>(name: <span class="string">"wcl"</span>, sex: <span class="string">"male"</span>, age: <span class="string">"23"</span>, company: <span class="string">"beijing"</span>)</span><br><span class="line"><span class="keyword">let</span> scy = wcl.copy() <span class="keyword">as</span>! <span class="type">Resume</span></span><br><span class="line">scy.name = <span class="string">"scy"</span></span><br><span class="line">scy.sex = <span class="string">"female"</span></span><br><span class="line">wcl.disPlay()</span><br><span class="line">scy.disPlay()</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯æ‰“å°çš„ç»“æœ:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">name: wcl, sex: male, age: 23, company: beijing</span><br><span class="line">name: scy, sex: female, age: 23, company: beijing</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æˆ‘å¯¹äºåŸå‹æ¨¡å¼çš„ç†è§£ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿å¤§å®¶äº¤æµï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 02æœˆ 20æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftè®¾è®¡æ¨¡å¼å­¦ä¹  - ç­–ç•¥æ¨¡å¼]]></title>
      <url>http://imwcl.com/2017/02/18/swift%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="ç­–ç•¥æ¨¡å¼"><a href="#ç­–ç•¥æ¨¡å¼" class="headerlink" title="ç­–ç•¥æ¨¡å¼"></a>ç­–ç•¥æ¨¡å¼</h1><p>ç­–ç•¥æ¨¡å¼å®šä¹‰äº†ç®—æ³•å®¶æ—ï¼Œåˆ†åˆ«å°è£…èµ·æ¥ï¼Œè®©å®ƒä»¬ä¹‹é—´å¯ä»¥ç›¸äº’æ›¿æ¢ï¼Œæ­¤æ¨¡å¼è®©ç®—æ³•çš„å˜åŒ–ï¼Œä¸ä¼šå½±å“åˆ°ä½¿ç”¨ç®—æ³•çš„å®¢æˆ·ã€‚</p>
<h2 id="ç­–ç•¥æ¨¡å¼çš„ç»„æˆ"><a href="#ç­–ç•¥æ¨¡å¼çš„ç»„æˆ" class="headerlink" title="ç­–ç•¥æ¨¡å¼çš„ç»„æˆ"></a>ç­–ç•¥æ¨¡å¼çš„ç»„æˆ</h2><ul>
<li>æŠ½è±¡ç­–ç•¥è§’è‰²ï¼ˆStrategyï¼‰ï¼š ç­–ç•¥ç±»ï¼Œé€šå¸¸ç”±ä¸€ä¸ªæ¥å£æˆ–è€…æŠ½è±¡ç±»å®ç°ã€‚</li>
<li>å…·ä½“ç­–ç•¥è§’è‰²ï¼ˆConcreteStrategyï¼‰ï¼šåŒ…è£…äº†ç›¸å…³çš„ç®—æ³•å’Œè¡Œä¸ºã€‚</li>
<li>ç¯å¢ƒè§’è‰²ï¼ˆContextï¼‰ï¼šæŒæœ‰ä¸€ä¸ªç­–ç•¥ç±»çš„å¼•ç”¨ï¼Œæœ€ç»ˆç»™å®¢æˆ·ç«¯è°ƒç”¨ã€‚</li>
</ul>
<a id="more"></a>
<h2 id="ç­–ç•¥æ¨¡å¼çš„åŸºæœ¬å®ç°"><a href="#ç­–ç•¥æ¨¡å¼çš„åŸºæœ¬å®ç°" class="headerlink" title="ç­–ç•¥æ¨¡å¼çš„åŸºæœ¬å®ç°"></a>ç­–ç•¥æ¨¡å¼çš„åŸºæœ¬å®ç°</h2><p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/Strategy.png" alt=""></p>
<p>ä¸Šå›¾æ˜¯æœ€åŸºæœ¬çš„è£…é¥°æ¨¡å¼çš„ç»“æ„å›¾ï¼Œä¸‹é¢å°†ç”¨<a href="http://lib.csdn.net/base/swift" target="_blank" rel="external"><strong>Swift</strong></a>ä»£ç æ¥å®ç°ä¸€ä¸ªåŸºæœ¬ç­–ç•¥æ¨¡å¼ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// ç­–ç•¥ç±»ï¼Œå®šä¹‰æ‰€æœ‰æ”¯æŒ çš„ç®—æ³•çš„å…¬å…±æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">AlgorithmInterface</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// å…·ä½“ç­–ç•¥ç±»ï¼Œå°è£…äº†å…·ä½“çš„ç®—æ³•æˆ–è¡Œä¸ºï¼Œç»§æ‰¿äºStrategy</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyA</span>: <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">AlgorithmInterface</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ConcreteStrategyA"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyB</span>: <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">AlgorithmInterface</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ConcreteStrategyB"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteStrategyC</span>: <span class="title">Strategy</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">AlgorithmInterface</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"ConcreteStrategyC"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Contextä¸Šä¸‹æ–‡ï¼Œç”¨ä¸€ä¸ª ConcreteStrategyæ¥é…ç½®ï¼Œç»´æŠ¤ä¸€ä¸ªå¯¹Strategyå¯¹è±¡çš„å¼•ç”¨</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Context</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> strategy: <span class="type">Strategy</span>?</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">ContextInterface</span><span class="params">()</span></span> &#123;</span><br><span class="line">        strategy?.<span class="type">AlgorithmInterface</span>()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šä»£ç æ˜¯æœ€ç®€å•çš„ç­–ç•¥æ¨¡å¼çš„å®ç°è¿‡ç¨‹ï¼Œå®šä¹‰äº†ä¸€ä¸ª<code>Strategy</code>çš„ç®—æ³•æ—ï¼Œé€šè¿‡å®ƒçš„å­ç±»å¯ä»¥å®ç°ç®—æ³•ï¼ˆ<code>AlgorithmInterface</code>ï¼‰çš„æ›¿æ¢ï¼Œè€Œä¸ä¼šå½±å“åˆ°å®¢æˆ·ç«¯ã€‚</p>
<h2 id="ç”¨ç­–ç•¥æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå•†åœºæ‰“æŠ˜ï¼‰"><a href="#ç”¨ç­–ç•¥æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå•†åœºæ‰“æŠ˜ï¼‰" class="headerlink" title="ç”¨ç­–ç•¥æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå•†åœºæ‰“æŠ˜ï¼‰"></a>ç”¨ç­–ç•¥æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆå•†åœºæ‰“æŠ˜ï¼‰</h2><p>æˆ‘ä»¬çŸ¥é“åœ¨å•†åœºä¸­ä¸€èˆ¬æœ‰å¾ˆå¤šæ‰“æŠ˜ä¼˜æƒ æ–¹æ¡ˆï¼Œç±»ä¼¼è¿™ç§é—®é¢˜å°±å¯ä»¥ç”¨ç­–ç•¥æ¨¡å¼æ¥è§£å†³ï¼Œæ‰“æŠ˜ä¸åŒçš„æ–¹æ¡ˆå°±ç›¸å½“äºä¸åŒçš„ç­–ç•¥ï¼ˆ<code>ConcreteStrategy</code>ï¼‰ï¼Œç„¶åç”¨ä¸€ä¸ª<code>Context</code>ç±»æ¥å®ç°ä¸åŒç®—æ³•çš„åˆ‡æ¢ï¼Œä¸‹é¢æ˜¯å•†åœºæ‰“æŠ˜ç­–ç•¥æ¨¡å¼çš„å®ç°äº<code>UML</code>å›¾ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F/CashSuper.png" alt=""></p>
<p>ä»¥ä¸Šæ˜¯ä¸€ä¸ªç®€å•çš„å•†åœºæ”¶é“¶ç³»ç»Ÿï¼Œ<code>CashNormal</code>ä¸ºæ™®é€šæ”¶è´¹å­ç±»ï¼Œ<code>CashRebate</code>ä¸ºæ‰“æŠ˜æ”¶è´¹å­ç±»ï¼Œ<code>CashReturn</code>ä¸ºè¿”åˆ©æ”¶è´¹å­ç±»ï¼Œä¸‹é¢æ˜¯ä»£ç çš„å®ç°è¿‡ç¨‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Foundation</span><br><span class="line"></span><br><span class="line"><span class="comment">// å®šä¹‰ä¸€ä¸ªæ”¶è´¹çš„ç­–ç•¥æ¥å£</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">CashSuper</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">acceptCash</span><span class="params">(money: Double)</span></span> -&gt; <span class="type">Double</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ™®é€šæ”¶è´¹å­ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CashNormal</span>: <span class="title">CashSuper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æ­£å¸¸åŸä»·è¿”å›</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">acceptCash</span><span class="params">(money: Double)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> money</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// æ‰“æŠ˜æ”¶è´¹å­ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CashRebate</span>: <span class="title">CashSuper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// æŠ˜æ‰£ç‡</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> moneyRebate: <span class="type">Double</span> = <span class="number">1.0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(moneyRebate: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.moneyRebate = moneyRebate</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">acceptCash</span><span class="params">(money: Double)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> money*moneyRebate</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// è¿”åˆ©æ”¶è´¹å­ç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CashReturn</span>: <span class="title">CashSuper</span> </span>&#123;</span><br><span class="line">    <span class="comment">// è¿”åˆ©è¦æ±‚</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> moneyCondition: <span class="type">Double</span> = <span class="number">0</span></span><br><span class="line">    <span class="comment">// è¿”å¤šå°‘</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> moneyReturn: <span class="type">Double</span>    = <span class="number">0</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">init</span>(moneyCondition: <span class="type">Double</span>, moneyReturn: <span class="type">Double</span>) &#123;</span><br><span class="line">        <span class="keyword">self</span>.moneyCondition = moneyCondition</span><br><span class="line">        <span class="keyword">self</span>.moneyReturn    = moneyReturn</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">acceptCash</span><span class="params">(money: Double)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> result = money</span><br><span class="line">        <span class="keyword">if</span> money &gt;= moneyCondition &#123;</span><br><span class="line">            result = money - floor(money / moneyCondition) * moneyReturn</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// contextç±»</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CashContext</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> cs: <span class="type">CashSuper</span>?</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// é€šè¿‡æšä¸¾åˆ¤æ–­ä½¿ç”¨å“ªç§æ–¹å¼</span></span><br><span class="line">    <span class="keyword">init</span>(style: <span class="type">CashStyle</span>) &#123;</span><br><span class="line">        <span class="keyword">switch</span> style &#123;</span><br><span class="line">        <span class="keyword">case</span> .normal:</span><br><span class="line">            cs = <span class="type">CashNormal</span>()</span><br><span class="line">        <span class="keyword">case</span> .rebate(moneyRebate: <span class="keyword">let</span> money):</span><br><span class="line">            cs = <span class="type">CashRebate</span>(moneyRebate: money)</span><br><span class="line">        <span class="keyword">case</span> .<span class="keyword">return</span>(moneyCondition: <span class="keyword">let</span> moneyCondition, moneyReturn: <span class="keyword">let</span> moneyReturn):</span><br><span class="line">            cs = <span class="type">CashReturn</span>(moneyCondition: moneyCondition, moneyReturn: moneyReturn)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">getResult</span><span class="params">(money: Double)</span></span> -&gt; <span class="type">Double</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> cs?.acceptCash(money: money) ?? <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ä¼˜æƒ çš„æšä¸¾ç±»å‹</span></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">CashStyle</span> </span>&#123;</span><br><span class="line">    <span class="keyword">case</span> normal</span><br><span class="line">    <span class="keyword">case</span> rebate(moneyRebate: <span class="type">Double</span>)</span><br><span class="line">    <span class="keyword">case</span> `<span class="keyword">return</span>`(moneyCondition: <span class="type">Double</span>, moneyReturn: <span class="type">Double</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬æµ‹è¯•ä¸€ä¸‹ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> money: <span class="type">Double</span> = <span class="number">300</span></span><br><span class="line"><span class="comment">// æ™®é€š</span></span><br><span class="line"><span class="keyword">let</span> normal = <span class="type">CashContext</span>(style: .normal)</span><br><span class="line"><span class="comment">// æ‰“7æŠ˜</span></span><br><span class="line"><span class="keyword">let</span> rebate = <span class="type">CashContext</span>(style: .rebate(moneyRebate: <span class="number">0.7</span>))</span><br><span class="line"><span class="comment">// æ»¡ä¸€ç™¾è¿”20</span></span><br><span class="line"><span class="keyword">let</span> `<span class="keyword">return</span>` = <span class="type">CashContext</span>(style: .<span class="keyword">return</span>(moneyCondition: <span class="number">100</span>, moneyReturn: <span class="number">20</span>))</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"æ™®é€š: <span class="subst">\(normal.getResult(money: money)</span>)"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"æ‰“8æŠ˜: <span class="subst">\(rebate.getResult(money: money)</span>)"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"æ»¡ä¸€ç™¾è¿”20: <span class="subst">\(`<span class="keyword">return</span>`.getResult(money: money)</span>)"</span>)</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æ˜¯æ‰§è¡Œçš„ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">æ™®é€š: <span class="number">300.0</span></span><br><span class="line">æ‰“<span class="number">8</span>æŠ˜: <span class="number">210.0</span></span><br><span class="line">æ»¡ä¸€ç™¾è¿”<span class="number">20</span>: <span class="number">240.0</span></span><br></pre></td></tr></table></figure>
<h2 id="ç­–ç•¥æ¨¡å¼æ€»ç»“"><a href="#ç­–ç•¥æ¨¡å¼æ€»ç»“" class="headerlink" title="ç­–ç•¥æ¨¡å¼æ€»ç»“"></a>ç­–ç•¥æ¨¡å¼æ€»ç»“</h2><p>æˆ‘ä»¬å¯ä»¥ç†è§£ä¸ºç­–ç•¥å°±æ˜¯ç”¨æ¥å°è£…ç®—æ³•ï¼Œä½†åœ¨å®è·µè¿‡ç¨‹ä¸­ä¸ç”¨é‚£ä¹ˆæ­»æ¿ï¼Œå¯ä»¥ç”¨æ¥å°è£…å‡ ä¹ä»»ä½•ç±»å‹çš„è§„åˆ™ï¼Œåªè¦åœ¨åˆ†æè¿‡ç¨‹ä¸­å¬åˆ°éœ€è¦åœ¨ä¸åŒæ—¶é—´åº”ç”¨ä¸åŒçš„ä¸šåŠ¡è§„åˆ™ï¼Œå°±å¯ä»¥è€ƒè™‘ä½¿ç”¨ç­–ç•¥æ¨¡å¼å¤„ç†è¿™ç§å˜åŒ–çš„å¯èƒ½æ€§ã€‚</p>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æˆ‘å¯¹äºç­–ç•¥æ¨¡å¼çš„ç†è§£ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿å¤§å®¶äº¤æµï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 02æœˆ 18æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSåŠ¨ç”»è¿›é˜¶ - æ‰‹æ‘¸æ‰‹æ•™ä½ å†™ShineButtonåŠ¨ç”»]]></title>
      <url>http://imwcl.com/2017/02/16/iOS%E5%8A%A8%E7%94%BB%E8%BF%9B%E9%98%B6-%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E5%86%99ShineButton%E5%8A%A8%E7%94%BB/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å‰æ®µæ—¶é—´åœ¨githubä¸Šçœ‹è§ä¸€ä¸ªéå¸¸niceçš„åŠ¨ç”»æ•ˆæœï¼Œå¯æƒœæ˜¯å®‰å“çš„ï¼Œæƒ³ç€ç”¨swiftå†™ä¸€ä¸ªiOSç‰ˆçš„ï¼Œä¸‹ä¸‹æ¥æºä»£ç ç ”ç©¶äº†ä¸€ä¸‹ï¼Œä¸‹é¢æ˜¯æˆ‘å†™ä»£ç çš„å¿ƒè·¯å†ç¨‹</p>
</blockquote>
<p>å…ˆä¸Šå›¾å’Œ<a href="https://github.com/631106979/WCLShineButton" target="_blank" rel="external">demoçš„åœ°å€</a></p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WCLShineButton/demo_shine_others.gif" alt=""></p>
<a id="more"></a>
<h2 id="åˆ†æåŠ¨ç”»è¿‡ç¨‹"><a href="#åˆ†æåŠ¨ç”»è¿‡ç¨‹" class="headerlink" title="åˆ†æåŠ¨ç”»è¿‡ç¨‹"></a>åˆ†æåŠ¨ç”»è¿‡ç¨‹</h2><p>åˆšå¼€å§‹çœ‹çš„æ—¶å€™æ„Ÿè§‰è¿™ä¸ªåŠ¨ç”»å¾ˆç‚«é…·ï¼Œå®ç°èµ·æ¥åº”è¯¥æŒºå¤åˆ¶çš„ï¼Œåæ¥æˆ‘å°†gifå›¾é€ä¸€åˆ†è§£ï¼Œå¤§è‡´æµè§ˆäº†ä¸€ä¸‹å®‰å“çš„å®ç°è¿‡ç¨‹ï¼Œå¤§è‡´äº†è§£çš„å®ç°çš„è¿‡ç¨‹ï¼Œä¸‹é¢æ˜¯ä¸€äº›å…³é”®çš„åŠ¨ç”»æ­¥éª¤ï¼š</p>
<ol>
<li>ç¬¬ä¸€æ­¥æ˜¯é‡Œé¢å›¾ç‰‡çš„ç¼©æ”¾åŠ¨ç”»ï¼Œä½¿ç”¨<code>CALayer</code>é…åˆ<code>CAKeyframeAnimation</code>æ¥å®ç°ï¼›</li>
<li>ç¬¬äºŒæ­¥æ˜¯æ˜¯é‡Œé¢ä¸€ä¸ªåœ†ç¯é€æ¸å˜å¤§çš„è¿‡ç¨‹ï¼Œä½¿ç”¨<code>CAShapeLayer</code>é…åˆ<code>CAKeyframeAnimation</code>æ¥å®ç°ï¼›</li>
<li>ç¬¬ä¸‰æ­¥æ˜¯æœ€å¤–é¢ä¸€å±‚å¤ªé˜³çš„æ‰©æ•£æ•ˆæœåŒæ ·ä¹Ÿä½¿ç”¨<code>CAShapeLayer</code>é…åˆ<code>CAKeyframeAnimation</code>æ¥å®ç°ï¼›</li>
<li>æœ€åæ˜¯é—ªçƒå’Œé¢œè‰²å˜åŒ–çš„çš„æ•ˆæœï¼Œä½¿ç”¨<code>CABasicAnimation</code>å’Œ<code>CADisplayLink</code>æ¥å®ç°ã€‚</li>
</ol>
<h2 id="ä¸€ã€ç¼©æ”¾åŠ¨ç”»çš„å®ç°"><a href="#ä¸€ã€ç¼©æ”¾åŠ¨ç”»çš„å®ç°" class="headerlink" title="ä¸€ã€ç¼©æ”¾åŠ¨ç”»çš„å®ç°"></a>ä¸€ã€ç¼©æ”¾åŠ¨ç”»çš„å®ç°</h2><p>è¿™ä¸ªå®ç°çš„è¿‡ç¨‹ç›¸å¯¹è€Œè¨€æ¯”è¾ƒç®€å•ï¼Œç”¨<code>CALayer</code>åšä¸º<code>mask</code>æ¥å®ç°ä¸‹å›¾å¿ƒå½¢çš„å›¾ç‰‡ï¼Œç„¶åç”¨<code>CAKeyframeAnimation</code>æ¥å®ç°åŠ¨ç”»ï¼Œ<code>values</code>çš„å€¼ä¸º<code>[0.4, 1, 0.9, 1]</code>ï¼Œå·®å€¼å™¨æ¨¡å¼ä¸º<code>kCAAnimationCubic</code>ï¼Œä¸‹é¢æ˜¯å®ç°ç»“æœå’Œå…³é”®ä»£ç ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WCLShineButton/wcl1.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnim</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> anim = <span class="type">CAKeyframeAnimation</span>(keyPath: <span class="string">"transform.scale"</span>)</span><br><span class="line">    anim.duration  = animDuration</span><br><span class="line">    anim.values = [<span class="number">0.4</span>, <span class="number">1</span>, <span class="number">0.9</span>, <span class="number">1</span>]</span><br><span class="line">    anim.calculationMode = kCAAnimationCubic</span><br><span class="line">    maskLayer.add(anim, forKey: <span class="string">"scale"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="äºŒã€åœ†ç¯æ‰©æ•£åŠ¨ç”»çš„å®ç°"><a href="#äºŒã€åœ†ç¯æ‰©æ•£åŠ¨ç”»çš„å®ç°" class="headerlink" title="äºŒã€åœ†ç¯æ‰©æ•£åŠ¨ç”»çš„å®ç°"></a>äºŒã€åœ†ç¯æ‰©æ•£åŠ¨ç”»çš„å®ç°</h2><p>é¦–å…ˆåœ†ç¯æˆ‘ä»¬ç”¨<code>CAShapeLayer</code>æ¥ç»˜åˆ¶ä¸€ä¸ªåœ†ç¯ï¼Œç„¶åé€šè¿‡<code>CAKeyframeAnimation</code>æ¥æ”¹å˜åœ†ç¯çš„<code>path</code>å°±å¯ä»¥äº†ï¼Œä¸‹é¢æ˜¯å®ç°ç»“æœå’Œå…³é”®ä»£ç ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WCLShineButton/wcl.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnim</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> anim = <span class="type">CAKeyframeAnimation</span>(keyPath: <span class="string">"path"</span>)</span><br><span class="line">    anim.duration = params.animDuration * <span class="number">0.1</span></span><br><span class="line">    <span class="keyword">let</span> size = frame.size</span><br><span class="line">    <span class="keyword">let</span> fromPath = <span class="type">UIBezierPath</span>(arcCenter: <span class="type">CGPoint</span>.<span class="keyword">init</span>(x: size.width/<span class="number">2</span>, y: size.height/<span class="number">2</span>), radius: <span class="number">1</span>, startAngle: <span class="number">0</span>, endAngle: <span class="type">CGFloat</span>(<span class="type">M_PI</span>) * <span class="number">2.0</span>, clockwise: <span class="literal">false</span>).cgPath</span><br><span class="line">    <span class="keyword">let</span> toPath = <span class="type">UIBezierPath</span>(arcCenter: <span class="type">CGPoint</span>.<span class="keyword">init</span>(x: size.width/<span class="number">2</span>, y: size.height/<span class="number">2</span>), radius: size.width/<span class="number">2</span> * <span class="type">CGFloat</span>(params.shineDistanceMultiple), startAngle: <span class="number">0</span>, endAngle: <span class="type">CGFloat</span>(<span class="type">M_PI</span>) * <span class="number">2.0</span>, clockwise: <span class="literal">false</span>).cgPath</span><br><span class="line">    anim.delegate = <span class="keyword">self</span></span><br><span class="line">    anim.values = [fromPath, toPath]</span><br><span class="line">    anim.timingFunctions = [<span class="type">CAMediaTimingFunction</span>(name: kCAMediaTimingFunctionEaseOut)]</span><br><span class="line">    anim.isRemovedOnCompletion = <span class="literal">false</span></span><br><span class="line">    anim.fillMode = kCAFillModeForwards</span><br><span class="line">    shapeLayer.add(anim, forKey: <span class="string">"path"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="ä¸‰ã€å¤ªé˜³çš„æ‰©æ•£æ•ˆæœå®ç°"><a href="#ä¸‰ã€å¤ªé˜³çš„æ‰©æ•£æ•ˆæœå®ç°" class="headerlink" title="ä¸‰ã€å¤ªé˜³çš„æ‰©æ•£æ•ˆæœå®ç°"></a>ä¸‰ã€å¤ªé˜³çš„æ‰©æ•£æ•ˆæœå®ç°</h2><p>é¦–å…ˆæˆ‘ä»¬å¾—å…ˆç®—å‡ºæ¯ä¸ªå¤ªé˜³çš„ä½ç½®å’Œå°†è¦æ‰©æ•£åˆ°çš„ä½ç½®ï¼Œç„¶åç”¨<code>CAShapeLayer</code>ç»˜åˆ¶å‡ºå¤ªé˜³ï¼Œç”¨<code>CAKeyframeAnimation</code>å®ç°æ‰©æ•£çš„æ•ˆæœï¼Œä¸‹é¢æ˜¯å®ç°åçš„ç»“æœå’Œå…³é”®ä»£ç  :</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WCLShineButton/wcl2.gif" alt=""></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">startAnim</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> radius = frame.size.width/<span class="number">2</span> * <span class="type">CGFloat</span>(params.shineDistanceMultiple*<span class="number">1.4</span>)</span><br><span class="line">    <span class="keyword">var</span> startAngle: <span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line">    <span class="keyword">let</span> angle = <span class="type">CGFloat</span>(<span class="type">M_PI</span>*<span class="number">2</span>/<span class="type">Double</span>(params.shineCount)) + startAngle</span><br><span class="line">    <span class="keyword">if</span> params.shineCount%<span class="number">2</span> != <span class="number">0</span> &#123;</span><br><span class="line">        startAngle = <span class="type">CGFloat</span>(<span class="type">M_PI</span>*<span class="number">2</span> - (<span class="type">Double</span>(angle)/<span class="type">Double</span>(params.shineCount)))</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;params.shineCount &#123;</span><br><span class="line">        <span class="keyword">let</span> bigShine = shineLayers[i]</span><br><span class="line">        <span class="keyword">let</span> bigAnim = getAngleAnim(shine: bigShine, angle: startAngle + <span class="type">CGFloat</span>(angle)*<span class="type">CGFloat</span>(i), radius: radius)</span><br><span class="line">        <span class="keyword">let</span> smallShine = smallShineLayers[i]</span><br><span class="line">        <span class="keyword">var</span> radiusSub = frame.size.width*<span class="number">0.15</span>*<span class="number">0.66</span></span><br><span class="line">        <span class="keyword">if</span> params.shineSize != <span class="number">0</span> &#123;</span><br><span class="line">            radiusSub = params.shineSize*<span class="number">0.66</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> smallAnim = getAngleAnim(shine: smallShine, angle: startAngle + <span class="type">CGFloat</span>(angle)*<span class="type">CGFloat</span>(i) - <span class="type">CGFloat</span>(params.smallShineOffsetAngle)*<span class="type">CGFloat</span>(<span class="type">M_PI</span>)/<span class="number">180</span>, radius: radius-radiusSub)</span><br><span class="line">        bigShine.add(bigAnim, forKey: <span class="string">"path"</span>)</span><br><span class="line">        smallShine.add(smallAnim, forKey: <span class="string">"path"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">let</span> angleAnim = <span class="type">CABasicAnimation</span>(keyPath: <span class="string">"transform.rotation"</span>)</span><br><span class="line">    angleAnim.duration = params.animDuration * <span class="number">0.87</span></span><br><span class="line">    angleAnim.timingFunction = <span class="type">CAMediaTimingFunction</span>(name: kCAMediaTimingFunctionLinear)</span><br><span class="line">    angleAnim.fromValue = <span class="number">0</span></span><br><span class="line">    angleAnim.toValue = <span class="type">CGFloat</span>(params.shineTurnAngle)*<span class="type">CGFloat</span>(<span class="type">M_PI</span>)/<span class="number">180</span></span><br><span class="line">    angleAnim.delegate = <span class="keyword">self</span></span><br><span class="line">    add(angleAnim, forKey: <span class="string">"rotate"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å››ã€æœ€åå†å°†è¿™äº›åŠ¨ç”»é€šè¿‡ä¸€å®šè§„å¾‹ç»“åˆèµ·æ¥"><a href="#å››ã€æœ€åå†å°†è¿™äº›åŠ¨ç”»é€šè¿‡ä¸€å®šè§„å¾‹ç»“åˆèµ·æ¥" class="headerlink" title="å››ã€æœ€åå†å°†è¿™äº›åŠ¨ç”»é€šè¿‡ä¸€å®šè§„å¾‹ç»“åˆèµ·æ¥"></a>å››ã€æœ€åå†å°†è¿™äº›åŠ¨ç”»é€šè¿‡ä¸€å®šè§„å¾‹ç»“åˆèµ·æ¥</h2><p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WCLShineButton/wcl3.gif" alt=""></p>
<p>ä¸Šå›¾æ˜¯å°†ä¹‹å‰åŠ¨ç”»æ­¥éª¤ç»„åˆèµ·æ¥åçš„æ•ˆæœï¼Œä¸Šé¢çš„ä¸€äº›ä»£ç åªæ˜¯éƒ¨åˆ†ä»£ç ï¼Œå…¨éƒ¨ä»£ç å¯ä»¥å»æˆ‘çš„<a href="https://github.com/631106979/WCLShineButton" target="_blank" rel="external">githubåœ°å€</a>ä¸Šå»ä¸‹åœ¨æµè§ˆï¼Œå¦‚æœå¤§å®¶å–œæ¬¢å¯ä»¥ç‚¹ä¸€ä¸ªèµï¼Œæœ‰æ›´å¥½çš„æƒ³æ³•ä¹Ÿå¯ä»¥æå‡ºæ¥ï¼Œå¤§å®¶ä¸€èµ·äº¤æµä¸€ä¸‹ï¼Œæœ€åè°¢è°¢å¤§å®¶é˜…è¯»~~</p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 02æœˆ16æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftè®¾è®¡æ¨¡å¼å­¦ä¹  - è£…é¥°æ¨¡å¼]]></title>
      <url>http://imwcl.com/2017/02/09/swift%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F%E5%AD%A6%E4%B9%A0-%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/</url>
      <content type="html"><![CDATA[<h1 id="è£…é¥°æ¨¡å¼"><a href="#è£…é¥°æ¨¡å¼" class="headerlink" title="è£…é¥°æ¨¡å¼"></a>è£…é¥°æ¨¡å¼</h1><p>åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½ã€‚å®ƒæ˜¯é€šè¿‡åˆ›å»ºä¸€ä¸ªåŒ…è£…å¯¹è±¡ï¼Œä¹Ÿå°±æ˜¯è£…é¥°æ¥åŒ…è£¹çœŸå®çš„å¯¹è±¡ã€‚</p>
<h2 id="è£…é¥°æ¨¡å¼çš„ç‰¹ç‚¹"><a href="#è£…é¥°æ¨¡å¼çš„ç‰¹ç‚¹" class="headerlink" title="è£…é¥°æ¨¡å¼çš„ç‰¹ç‚¹"></a>è£…é¥°æ¨¡å¼çš„ç‰¹ç‚¹</h2><ol>
<li>è£…é¥°å¯¹è±¡å’ŒçœŸå®å¯¹è±¡æœ‰ç›¸åŒçš„æ¥å£ã€‚è¿™æ ·å®¢æˆ·ç«¯å¯¹è±¡å°±èƒ½ä»¥å’ŒçœŸå®å¯¹è±¡ç›¸åŒçš„æ–¹å¼å’Œè£…é¥°å¯¹è±¡äº¤äº’ã€‚</li>
<li>è£…é¥°å¯¹è±¡åŒ…å«ä¸€ä¸ªçœŸå®å¯¹è±¡çš„å¼•ç”¨ï¼ˆreferenceï¼‰</li>
<li>è£…é¥°å¯¹è±¡æ¥å—æ‰€æœ‰æ¥è‡ªå®¢æˆ·ç«¯çš„è¯·æ±‚ã€‚å®ƒæŠŠè¿™äº›è¯·æ±‚è½¬å‘ç»™çœŸå®çš„å¯¹è±¡ã€‚</li>
<li>è£…é¥°å¯¹è±¡å¯ä»¥åœ¨è½¬å‘è¿™äº›è¯·æ±‚ä»¥å‰æˆ–ä»¥åå¢åŠ ä¸€äº›é™„åŠ åŠŸèƒ½ã€‚è¿™æ ·å°±ç¡®ä¿äº†åœ¨è¿è¡Œæ—¶ï¼Œä¸ç”¨ä¿®æ”¹ç»™å®šå¯¹è±¡çš„ç»“æ„å°±å¯ä»¥åœ¨å¤–éƒ¨å¢åŠ é™„åŠ çš„åŠŸèƒ½ã€‚åœ¨é¢å‘å¯¹è±¡çš„è®¾è®¡ä¸­ï¼Œé€šå¸¸æ˜¯é€šè¿‡ç»§æ‰¿æ¥å®ç°å¯¹ç»™å®šç±»çš„åŠŸèƒ½æ‰©å±•ã€‚<a id="more"></a>
<h2 id="è£…é¥°æ¨¡å¼çš„åŸºæœ¬å®ç°"><a href="#è£…é¥°æ¨¡å¼çš„åŸºæœ¬å®ç°" class="headerlink" title="è£…é¥°æ¨¡å¼çš„åŸºæœ¬å®ç°"></a>è£…é¥°æ¨¡å¼çš„åŸºæœ¬å®ç°</h2></li>
</ol>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/Decorator.png" alt=""></p>
<p>ä¸Šå›¾æ˜¯æœ€åŸºæœ¬çš„è£…é¥°æ¨¡å¼çš„ç»“æ„å›¾ï¼Œä¸‹é¢å°†ç”¨swiftä»£ç æ¥å®ç°ä¸€ä¸ªåŸºæœ¬è£…é¥°æ¨¡å¼ï¼š</p>
<p>1ï¼‰.å…ˆå†™ä¸€ä¸ªComponentæ¥å£</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">operation</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>2ï¼‰.å†™ä¸€ä¸ªå…·ä½“çš„Componentå¯¹è±¡</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteComponent</span>: <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">operation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// å…·ä½“æ“ä½œçš„å®ç°</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>3ï¼‰.å†™ä¸€ä¸ªè£…é¥°æŠ½è±¡ç±»</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Decorator</span>: <span class="title">Component</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> component: <span class="type">Component</span>?</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">operation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        component?.operation()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>4ï¼‰.å†™å…·ä½“çš„è£…é¥°å¯¹è±¡</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// è£…é¥°å¯¹è±¡A</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorA</span>: <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> addedState: <span class="type">String</span>?</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">operation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.operation()</span><br><span class="line">        addedState = <span class="string">"ConcreteDecoratorAç‹¬æœ‰çš„åŠŸèƒ½ï¼Œç”¨æ¥åŒºåˆ†ConcreteDecoratorB"</span></span><br><span class="line">        <span class="comment">// å…·ä½“è£…é¥°å¯¹è±¡Açš„æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// è£…é¥°å¯¹è±¡B</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ConcreteDecoratorB</span>: <span class="title">Decorator</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">operation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.operation()</span><br><span class="line">        addedBehavior()</span><br><span class="line">        <span class="comment">// å…·ä½“è£…é¥°å¯¹è±¡Bçš„æ“ä½œ</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// ConcreteDecoratorBç‹¬æœ‰çš„æ–¹æ³•ï¼Œç”¨æ¥åŒºåˆ†ConcreteDecoratorA</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">addedBehavior</span><span class="params">()</span></span> &#123;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>é€šè¿‡ä»¥ä¸Šä»£ç æˆ‘ä»¬å°±èƒ½ç®€å•äº†è§£è£…é¥°æ¨¡å¼çš„åŸºæœ¬å®ç°äºè¿‡ç¨‹ï¼Œå®ƒçš„ä¸»è¦çš„ç›®çš„å°±æ˜¯ï¼š<strong>åœ¨ä¸å¿…æ”¹å˜åŸç±»æ–‡ä»¶å’Œä½¿ç”¨ç»§æ‰¿çš„æƒ…å†µä¸‹ï¼ŒåŠ¨æ€åœ°æ‰©å±•ä¸€ä¸ªå¯¹è±¡çš„åŠŸèƒ½</strong>ï¼Œå°±åƒä»¥ä¸Šç¤ºä¾‹ä»£ç ä¸€æ ·ï¼Œé€šè¿‡<code>ConcreteDecoratorA</code>ä¸<code>ConcreteDecoratorB</code>å»æ‰©å±•<code>ConcreteComponent</code>è¿™ä¸ªå¯¹è±¡çš„åŠŸèƒ½ï¼Œè¿™æ ·ä¸ç”¨å»æ”¹å˜<code>ConcreteComponent</code>è¿™ä¸ªç±»çš„æºæ–‡ä»¶ï¼Œä¹Ÿå¯ä»¥è¾¾åˆ°æ‰©å±•çš„æ•ˆæœã€‚</p>
<h2 id="ç”¨è£…é¥°æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆä¹°è½¦é€‰é…çš„é—®é¢˜ï¼‰"><a href="#ç”¨è£…é¥°æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆä¹°è½¦é€‰é…çš„é—®é¢˜ï¼‰" class="headerlink" title="ç”¨è£…é¥°æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆä¹°è½¦é€‰é…çš„é—®é¢˜ï¼‰"></a>ç”¨è£…é¥°æ¨¡å¼è§£å†³å®é™…é—®é¢˜ï¼ˆä¹°è½¦é€‰é…çš„é—®é¢˜ï¼‰</h2><p>ä¸‹é¢é€šè¿‡ä¸€ä¸ªå®é™…çš„ä¾‹å­æ¥çœ‹çœ‹ï¼Œæ¯”å¦‚æˆ‘ä»¬åœ¨ä¹°è½¦çš„æ—¶å€™ä¸€èˆ¬ä¼šé€‰é…å¾ˆå¤šé…ä»¶ï¼Œä¸‹é¢æˆ‘ä»¬é€šè¿‡ç­–ç•¥æ¨¡å¼æ¥å®ç°è¿™ä¸€è¿‡ç¨‹ï¼Œä¸‹ä¸Šä¸ªç»“æ„å›¾ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/blog/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/%E8%A3%85%E9%A5%B0%E6%A8%A1%E5%BC%8F/CarParts.png" alt=""></p>
<p>ä¸‹é¢è´´ä¸Šä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Component</span></span><br><span class="line"><span class="class"><span class="keyword">protocol</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="comment">// å¤šå°‘é’±</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span>-&gt; <span class="type">Int</span></span><br><span class="line">    <span class="comment">// å±•ç¤ºè£…é…çš„é…ä»¶</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ConcreteComponents</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Suv</span>: <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(owner: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(owner)</span>ä¹°äº†ä¸€è¾†Suvï¼Œ10W"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">10</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Mpv</span>: <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">init</span>(owner: <span class="type">String</span>) &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"<span class="subst">\(owner)</span>ä¹°äº†ä¸€è¾†Mpvï¼Œ15W"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="number">15</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span> &#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// Decorator</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CarParts</span>: <span class="title">Car</span> </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> car: <span class="type">Car</span>?</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> car?.howMuch() ?? <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span> &#123;</span><br><span class="line">        car?.showParts()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">decorator</span><span class="params">(<span class="number">_</span> car: Car)</span></span> -&gt; <span class="type">Car</span> &#123;</span><br><span class="line">        <span class="keyword">self</span>.car = car</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// ConcreteDecorators </span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Sofa</span>: <span class="title">CarParts</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.howMuch() + <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.showParts()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"é€‰é…äº†çœŸçš®æ²™å‘ï¼Œ1W"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Safety</span>: <span class="title">CarParts</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.howMuch() + <span class="number">3</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.showParts()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"é€‰é…äº†å…¨å¥—å®‰å…¨ç³»ç»Ÿï¼Œ3W"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Engine</span>: <span class="title">CarParts</span> </span>&#123;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">howMuch</span><span class="params">()</span></span> -&gt; <span class="type">Int</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">super</span>.howMuch() + <span class="number">5</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">showParts</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.showParts()</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"é€‰é…äº†V8å‘åŠ¨æœºï¼Œ5W"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸‹é¢æˆ‘ä»¬ä½¿ç”¨ä¸€ä¸‹ä»¥ä¸Šä»£ç çœ‹çœ‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//wclä¹°ä¸€è¾†suv</span></span><br><span class="line"><span class="keyword">var</span> suv: <span class="type">Car</span> = <span class="type">Suv</span>(owner: <span class="string">"wcl"</span>)</span><br><span class="line"><span class="comment">//è£…é…æ²™å‘</span></span><br><span class="line">suv = <span class="type">Sofa</span>().decorator(suv)</span><br><span class="line"><span class="comment">//è£…é…å‘åŠ¨æœº</span></span><br><span class="line">suv = <span class="type">Engine</span>().decorator(suv)</span><br><span class="line"><span class="comment">//è£…é…å®‰å…¨ç³»ç»Ÿ</span></span><br><span class="line">suv = <span class="type">Safety</span>().decorator(suv)</span><br><span class="line">suv.showParts()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"ä¸€å…±èŠ±äº†<span class="subst">\(suv.howMuch()</span>)W"</span>)</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"\n"</span>)</span><br><span class="line"><span class="comment">//wclä¹°ä¸€è¾†mpv</span></span><br><span class="line"><span class="keyword">var</span> mpv: <span class="type">Car</span> = <span class="type">Mpv</span>(owner: <span class="string">"wcl"</span>)</span><br><span class="line"><span class="comment">//è£…é…å‘åŠ¨æœº</span></span><br><span class="line">mpv = <span class="type">Engine</span>().decorator(mpv)</span><br><span class="line"><span class="comment">//è£…é…å®‰å…¨ç³»ç»Ÿ</span></span><br><span class="line">mpv = <span class="type">Safety</span>().decorator(mpv)</span><br><span class="line">mpv.showParts()</span><br><span class="line"><span class="built_in">print</span>(<span class="string">"ä¸€å…±èŠ±äº†<span class="subst">\(mpv.howMuch()</span>)W"</span>)</span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸‹æ˜¯ä»£ç æ‰“å°çš„ç»“æœï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">wclä¹°äº†ä¸€è¾†<span class="type">Suv</span>ï¼Œ10W</span><br><span class="line">é€‰é…äº†çœŸçš®æ²™å‘ï¼Œ1W</span><br><span class="line">é€‰é…äº†<span class="type">V8</span>å‘åŠ¨æœºï¼Œ5W</span><br><span class="line">é€‰é…äº†å…¨å¥—å®‰å…¨ç³»ç»Ÿï¼Œ3W</span><br><span class="line">ä¸€å…±èŠ±äº†19W</span><br><span class="line"></span><br><span class="line">wclä¹°äº†ä¸€è¾†<span class="type">Mpv</span>ï¼Œ15W</span><br><span class="line">é€‰é…äº†<span class="type">V8</span>å‘åŠ¨æœºï¼Œ5W</span><br><span class="line">é€‰é…äº†å…¨å¥—å®‰å…¨ç³»ç»Ÿï¼Œ3W</span><br><span class="line">ä¸€å…±èŠ±äº†23W</span><br></pre></td></tr></table></figure>
<p>è¿™æ ·å°±ç”¨è£…é¥°æ¨¡å¼ç®€å•äº†å®ç°äº†ä¸€ä¸‹è¿™ä¸ªè¿‡ç¨‹ï¼Œåœ¨ä¸æ”¹å˜<code>Suv</code>äº<code>Mpv</code>è¿™ä¸¤ä¸ªç±»çš„æºæ–‡ä»¶çš„æƒ…å†µä¸‹å¯¹å®ƒè¿›è¡Œæ“ä½œã€‚</p>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>æˆ‘ä»¬å…ˆçœ‹çœ‹è£…é¥°æ¨¡å¼çš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li>å¯ä»¥å°†ç±»ä¸­è£…é¥°åŠŸèƒ½ä»ç±»ä¸­æ¬å‡ºç§»é™¤ï¼Œè¿™æ ·å¯ä»¥ç®€åŒ–åŸæœ‰çš„ç±»</li>
<li>æœ‰æ•ˆçš„å°†æ ¸å¿ƒèŒè´£å’Œè£…é¥°åŠŸèƒ½åŒºåˆ†å¼€æ¥ï¼Œè€Œä¸”å¯ä»¥é™¤å»ç›¸å…³ç±»ä¸­é‡å¤çš„è£…é¥°é€»è¾‘</li>
</ol>
<p>è£…é¥°æ¨¡å¼çš„ç¼ºç‚¹ï¼š</p>
<ol>
<li>è£…é¥°æ¨¡å¼è™½ç„¶æ‰©å±•æ€§è¾ƒé«˜ï¼Œç±»çš„æ•°é‡ç•¥å¤šï¼Œå¦‚ä½•å–èˆå¯æ‰©å±•æ€§å’Œç®€æ´æ€§æ˜¯ä¸ªé—®é¢˜ï¼Œæœ‰æ‰€é€‰æ‹©å°±è¦æœ‰æ‰€ç‰ºç‰²</li>
<li>å¾ˆéš¾ææ¸…æ¥šä¸€ä¸ªç±»ç©¶ç«Ÿè¢«è£…é¥°äº†å¤šå°‘å±‚ï¼Œå¯èƒ½æ˜¯1å±‚ï¼Œä¹Ÿå¯èƒ½æ˜¯100å±‚</li>
</ol>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æˆ‘å¯¹äºç­–ç•¥æ¨¡å¼çš„ç†è§£ï¼Œå¦‚æœæœ‰ä¸å¯¹çš„åœ°æ–¹æ¬¢è¿å¤§å®¶äº¤æµï¼Œæœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 02æœˆ 09æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - Photosè¯¦è§£åŸºäºPhotosçš„å›¾ç‰‡é€‰æ‹©å™¨]]></title>
      <url>http://imwcl.com/2017/01/11/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-Photos%E8%AF%A6%E8%A7%A3%E5%9F%BA%E4%BA%8EPhotos%E7%9A%84%E5%9B%BE%E7%89%87%E9%80%89%E6%8B%A9%E5%99%A8/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å¾ˆæ—©ä¹‹å‰å°±ç”¨OCæŠŠä»£ç å†™å®Œäº†å¹¶ç”¨åœ¨é¡¹ç›®ä¸­äº†ï¼Œä¸€ç›´æ²¡æ—¶é—´æ•´ç†ï¼Œç°åœ¨ç”¨swifté‡å†™ä¸€ä»½ï¼Œå¹¶ä¸”æ›´åŠ è¯¦ç»†çš„æ¥äº†è§£è¿™ä¸ªPhotosæ¡†æ¶ï¼Œä¸‹é¢æ˜¯æˆ‘é›†åˆè‹¹æœå®˜æ–¹æ–‡æ¡£å’Œå…¶ä»–å¤§ç¥çš„åšå®¢å†™å‡ºçš„ä¸€ç¯‡å…³äºPhotosæ¡†æ¶çš„ä»‹ç»</p>
</blockquote>
<p>è€è§„çŸ©å…ˆä¸Šæ•ˆæœå›¾å’Œ<a href="https://github.com/631106979/WCLImagePickerController" target="_blank" rel="external">Demoåœ°å€</a>ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WclImagePickerController/wcl.gif" alt="wcl"></p>
<a id="more"></a>
<h1 id="äº†è§£Photosæ¡†æ¶"><a href="#äº†è§£Photosæ¡†æ¶" class="headerlink" title="äº†è§£Photosæ¡†æ¶"></a>äº†è§£Photosæ¡†æ¶</h1><p>Photosæ˜¯ios8å‡ºçš„ä¸€ä¸ªæ–°çš„å›¾ç‰‡é€‰æ‹©æ¡†æ¶ï¼Œå–ä»£ä¹‹å‰çš„AssetsLibraryæ¡†æ¶ï¼Œç›¸æ¯”è¾ƒAssetsLibraryæ¡†æ¶Photosçš„ç”¨æ³•æ›´åŠ çµæ´»ï¼Œå‘ç°åœ¨iOS9ä¸­AssetsLibraryå·²ç»è¢«å¼ƒç”¨äº†ï¼Œå¹¶ä¸”ä¹Ÿä¸æ”¯æŒlivePhotoï¼ŒiOS9ä¸Šå†ä½¿ç”¨AssetsLibraryæ¡†æ¶æ—¶è¿˜æœ‰ä¸ªä¸¥é‡çš„é—®é¢˜å°±æ˜¯å›¾ç‰‡åˆ†è¾¨ç‡ä¼šå˜çš„å¾ˆä½ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦è®²è§£ä¸€ä¸‹Photosçš„ç®€å•ç”¨æ³•ï¼Œç”¨å®ƒåšä¸€ä¸ªç®€å•çš„å›¾ç‰‡é€‰æ‹©å™¨ã€‚</p>
<p>Photosä¸­å„ä¸ªç±»çš„ç®€å•è§£é‡Šï¼š</p>
<table>
<thead>
<tr>
<th>ç±»å</th>
<th>ä½œç”¨</th>
</tr>
</thead>
<tbody>
<tr>
<td>PHAdjustmentData</td>
<td>å½“ç”¨æˆ·ç¼–è¾‘èµ„æºï¼Œç…§ç‰‡ä¸ä¿®æ”¹åçš„å›¾åƒæˆ–è§†é¢‘æ•°æ®ä¿å­˜åœ¨ä¸€ä¸ªPHAdjustmentDataå¯¹è±¡ä¸­</td>
</tr>
<tr>
<td>PHAsset</td>
<td>ä»£è¡¨ç…§ç‰‡åº“ä¸­çš„ä¸€ä¸ªèµ„æºå®ä½“ï¼Œå¯ä»¥ç†è§£ä¸ºä¸€å¼ ç…§ç‰‡ï¼Œåœ¨æ‰“å°çš„æ—¶å€™ï¼Œå¯ä»¥æ¸…æ¥šçš„çœ‹è§é‡Œé¢åŒ…å«äº†ç…§ç‰‡çš„æ—¶é—´ã€æ ‡é¢˜ç­‰ä¿¡æ¯</td>
</tr>
<tr>
<td>PHAssetChangeRequest</td>
<td>ä½¿ç”¨PHAssetChangeRequestå¯¹è±¡æ¥åˆ›å»ºã€åˆ é™¤å’Œä¿®æ”¹ç›¸ç‰‡åº“é‡Œé¢çš„PHAssetå¯¹è±¡</td>
</tr>
<tr>
<td>PHAssetCollectionChangeRequest</td>
<td>ä½¿ç”¨PHAssetCollectionChangeRequestå¯¹è±¡æ¥åˆ›å»ºã€åˆ é™¤å’Œä¿®æ”¹ç›¸ç‰‡åº“é‡Œé¢çš„PHAssetCollectionå¯¹è±¡</td>
</tr>
<tr>
<td>PHAssetCreationRequest</td>
<td>ä½¿ç”¨PHAssetCreationRequestå¯¹è±¡æ„é€ ä¸€ä¸ªæ–°çš„ç…§ç‰‡æˆ–è§†é¢‘ï¼Œå¹¶å°†å…¶æ·»åŠ åˆ°ç…§ç‰‡åº“</td>
</tr>
<tr>
<td>PHAssetResource</td>
<td>ä¸€ä¸ªPHAssetResourceå¯¹è±¡è¡¨ç¤ºåœ¨ç…§ç‰‡åº“ä¸­çš„ç…§ç‰‡æˆ–è§†é¢‘èµ„æºï¼ˆä¹Ÿå°±æ˜¯ä¸€ä¸ªPHAssetå¯¹è±¡ï¼‰ç›¸å…³è”çš„åŸºç¡€æ•°æ®èµ„æºä¹‹ä¸€ï¼Œä½¿ç”¨PHAssetResourceManagerç±»è·å–å®ƒ</td>
</tr>
<tr>
<td>PHAssetResourceManager</td>
<td>PHAssetResourceManagerå¯¹è±¡æä¾›äº†è®¿é—®ä¸ç…§ç‰‡èµ„æºç›¸å…³çš„èµ„æºåŸºç¡€æ•°æ®å­˜å‚¨æ–¹æ³•</td>
</tr>
<tr>
<td>PHChange</td>
<td>PHChangeå¯¹è±¡æ¥é€šçŸ¥çš„ç…§ç‰‡åº“ä¸­çš„èµ„æºçš„ä¸€äº›å˜æ³•ï¼Œæ¯”å¦‚å¢åŠ å’Œåˆ é™¤</td>
</tr>
<tr>
<td>PHCollection</td>
<td>PHAssetCollectionå¯¹è±¡è¡¨ç¤ºä¸€ç»„ç…§ç‰‡æˆ–è§†é¢‘èµ„æºã€‚åŒ…æ‹¬æ—¶åˆ»å’Œç›¸å†Œä¸­å¯è§ç…§ç‰‡åº”ç”¨,ä»¥åŠç‰¹æ®Šçš„é›†åˆ,å¦‚å…±äº«ç…§ç‰‡æµã€‚</td>
</tr>
<tr>
<td>PHCollectionListChangeRequest</td>
<td>ä½¿ç”¨PHCollectionListChangeRequestå¯¹è±¡åœ¨ä¸€ä¸ªç…§ç‰‡åº“ä¸­åˆ›å»ºã€åˆ é™¤æˆ–ä¿®æ”¹PHCollectionListå¯¹è±¡ã€‚</td>
</tr>
<tr>
<td>PHContentEditingInput</td>
<td>PHContentEditingInputå¯¹è±¡æè¿°èµ„äº§ç”¨äºç¼–è¾‘å…ƒæ•°æ®</td>
</tr>
<tr>
<td>PHContentEditingOutput</td>
<td>PHContentEditingOutputå¯¹è±¡è¡¨ç¤ºç¼–è¾‘ç…§ç‰‡èµ„äº§çš„ç…§ç‰‡æˆ–è§†é¢‘å†…å®¹çš„ç»“æœ</td>
</tr>
<tr>
<td>PHFetchOptions</td>
<td>è·å–èµ„æºæ—¶çš„æ£€ç´¢å‚æ•°ï¼Œå¯ä»¥ä¼  nilï¼Œå³ä½¿ç”¨ç³»ç»Ÿé»˜è®¤å€¼</td>
</tr>
<tr>
<td>PHFetchResult</td>
<td>é€šè¿‡PHFetchResultæ¥è·å–ç…§ç‰‡å®ä½“çš„æœ‰åºåˆ—è¡¨</td>
</tr>
<tr>
<td>PHImageManager</td>
<td>PHImageManagerå¯¹è±¡æä¾›ç”¨äºåŠ è½½ä¸PHAssetå¯¹è±¡ç›¸å…³è”çš„å›¾åƒæˆ–è§†é¢‘æ•°æ®çš„æ–¹æ³•ã€‚ä½¿ç”¨è¿™äº›æ–¹æ³•æ¥è·å–å…¨å°ºå¯¸ç…§ç‰‡èµ„äº§æˆ–ç¼©ç•¥å›¾ï¼Œæˆ–è€…æ£€ç´¢AV Foundationå¯¹è±¡æ’­æ”¾ï¼Œå¯¼å‡ºå’Œæ“çºµçš„è§†é¢‘èµ„äº§ã€‚</td>
</tr>
<tr>
<td>PHLivePhoto</td>
<td>ç”¨æ¥è·å–LivePhotoå®ä½“</td>
</tr>
<tr>
<td>PHObject</td>
<td>ç…§ç‰‡ç­‰å®ä½“çš„æŠ½è±¡ç±»</td>
</tr>
<tr>
<td>PHPhotoLibrary</td>
<td>PHPhotoLibraryå¯¹è±¡è¡¨ç¤ºç”¨æˆ·çš„ç…§ç‰‡åº“æ•´å¥—èµ„æºå’Œæ”¶è—çš„ç…§ç‰‡ï¼ŒåŒ…æ‹¬å­˜å‚¨åœ¨æœ¬åœ°è®¾å¤‡ä¸Šåœ¨iCloudçš„ç…§ç‰‡å¯¹è±¡ã€‚</td>
</tr>
<tr>
<td>PhotosTypes</td>
<td>ä¸Photosæ¡†æ¶ç›¸å…³çš„ç±»å‹çš„æšä¸¾</td>
</tr>
</tbody>
</table>
<h1 id="è·å–ç›¸å†Œåˆ—è¡¨"><a href="#è·å–ç›¸å†Œåˆ—è¡¨" class="headerlink" title="è·å–ç›¸å†Œåˆ—è¡¨"></a>è·å–ç›¸å†Œåˆ—è¡¨</h1><p>è·å–ç›¸å†Œåˆ—è¡¨å¯ä»¥éœ€è¦ç”¨åˆ°ä¸€ä¸‹ç±»ï¼š</p>
<ul>
<li>PHFetchOptionsï¼šå¯¹è±¡æ£€ç´¢çš„å¯¹è±¡ï¼Œå¯ä»¥å¯¹ç›¸å†Œåˆ—è¡¨è¿›è¡Œç­›é€‰</li>
<li>PHAssetCollectionï¼šå›¾ç‰‡é›†åˆçš„å¯¹è±¡ï¼Œç­›é€‰åè·å¾—çš„é›†åˆ</li>
</ul>
<p>ä¸‹é¢æ˜¯è·å–ç›¸å†Œåˆ—è¡¨çš„ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">   <span class="comment">//MARK: å±æ€§åˆ—è¡¨</span></span><br><span class="line">   <span class="comment">//å…¨éƒ¨ç›¸å†Œçš„æ•°ç»„</span></span><br><span class="line">   <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> photoAlbums    = [[<span class="type">String</span>: <span class="type">PHFetchResult</span>&lt;<span class="type">PHAsset</span>&gt;]]()</span><br><span class="line">   <span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> selectPhotoArr = [<span class="type">PHAsset</span>]()</span><br><span class="line"></span><br><span class="line">   <span class="comment">//æ˜¯å¦åŒæ­¥è¯·æ±‚å›¾ç‰‡</span></span><br><span class="line">   <span class="keyword">public</span> <span class="keyword">var</span> isSynchronous: <span class="type">Bool</span> = <span class="literal">false</span> &#123;</span><br><span class="line">       <span class="keyword">didSet</span>&#123;</span><br><span class="line">           <span class="keyword">self</span>.photoOption.isSynchronous = isSynchronous</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//MARK: åˆå§‹åŒ–æ–¹æ³•</span></span><br><span class="line">   <span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">       <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">       <span class="comment">//å›¾ç‰‡è¯·æ±‚è®¾ç½®æˆå¿«é€Ÿè·å–</span></span><br><span class="line">       <span class="keyword">self</span>.photoOption.resizeMode   = .fast</span><br><span class="line">       <span class="keyword">self</span>.photoOption.deliveryMode = .opportunistic</span><br><span class="line">       getPhotoAlbum()</span><br><span class="line">   &#125;</span><br><span class="line">   </span><br><span class="line">   <span class="comment">/**</span><br><span class="line">    å¼€å§‹è·å–è·å–ç›¸å†Œåˆ—è¡¨</span><br><span class="line">    */</span></span><br><span class="line">   <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">getPhotoAlbum</span><span class="params">()</span></span> &#123;</span><br><span class="line">       <span class="comment">//åˆ›å»ºä¸€ä¸ªPHFetchOptionså¯¹è±¡æ£€ç´¢ç…§ç‰‡</span></span><br><span class="line">       <span class="keyword">let</span> options = <span class="type">PHFetchOptions</span>()</span><br><span class="line">       <span class="comment">//é€šè¿‡åˆ›å»ºæ—¶é—´æ¥æ£€ç´¢</span></span><br><span class="line">       options.sortDescriptors = [<span class="type">NSSortDescriptor</span>.<span class="keyword">init</span>(key: photoCreationDate, ascending: <span class="literal">false</span>)]</span><br><span class="line">       <span class="comment">//é€šè¿‡æ•°æ®ç±»å‹æ¥æ£€ç´¢ï¼Œè¿™é‡Œä¸ºåªæ£€ç´¢ç…§ç‰‡</span></span><br><span class="line">       options.predicate = <span class="type">NSPredicate</span>.<span class="keyword">init</span>(format: <span class="string">"mediaType in %@"</span>, [<span class="type">PHAssetMediaType</span>.image.rawValue])</span><br><span class="line">       <span class="comment">//é€šè¿‡æ£€ç´¢æ¡ä»¶æ£€ç´¢å‡ºç¬¦åˆæ£€ç´¢æ¡ä»¶çš„æ‰€æœ‰æ•°æ®ï¼Œä¹Ÿå°±æ˜¯æ‰€æœ‰çš„ç…§ç‰‡</span></span><br><span class="line">       <span class="keyword">let</span> allResult = <span class="type">PHAsset</span>.fetchAssets(with: options)</span><br><span class="line">       <span class="comment">//è·å–ç”¨æˆ·åˆ›å»ºçš„ç›¸å†Œ</span></span><br><span class="line">       <span class="keyword">let</span> userResult = <span class="type">PHAssetCollection</span>.fetchTopLevelUserCollections(with: <span class="literal">nil</span>)</span><br><span class="line">       <span class="comment">//è·å–æ™ºèƒ½ç›¸å†Œ</span></span><br><span class="line">       <span class="keyword">let</span> smartResult = <span class="type">PHAssetCollection</span>.fetchAssetCollections(with: .smartAlbum, subtype: .albumRegular, options: <span class="literal">nil</span>)</span><br><span class="line">       <span class="comment">//å°†è·å–çš„ç›¸å†ŒåŠ å…¥åˆ°ç›¸å†Œçš„æ•°ç»„ä¸­</span></span><br><span class="line">       photoAlbums.append([<span class="type">WCLImagePickerBundle</span>.localizedString(key: <span class="string">"å…¨éƒ¨ç…§ç‰‡"</span>): allResult])</span><br><span class="line">       </span><br><span class="line">       userResult.enumerateObjects(options: .concurrent) &#123; (collection, index, stop) <span class="keyword">in</span></span><br><span class="line">           <span class="keyword">let</span> assetcollection = collection <span class="keyword">as</span>! <span class="type">PHAssetCollection</span></span><br><span class="line">           <span class="comment">//é€šè¿‡æ£€ç´¢æ¡ä»¶ä»assetcollectionä¸­æ£€ç´¢å‡ºç»“æœ</span></span><br><span class="line">           <span class="keyword">let</span> assetResult = <span class="type">PHAsset</span>.fetchAssets(<span class="keyword">in</span>: assetcollection, options: options)</span><br><span class="line">           <span class="keyword">if</span> assetResult.<span class="built_in">count</span> != <span class="number">0</span> &#123;</span><br><span class="line">               <span class="keyword">self</span>.photoAlbums.append([assetcollection.localizedTitle!:assetResult])</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">       </span><br><span class="line">       smartResult.enumerateObjects(options: .concurrent) &#123; (collection, index, stop) <span class="keyword">in</span></span><br><span class="line">           <span class="comment">//é€šè¿‡æ£€ç´¢æ¡ä»¶ä»assetcollectionä¸­æ£€ç´¢å‡ºç»“æœ</span></span><br><span class="line">           <span class="keyword">let</span> assetResult = <span class="type">PHAsset</span>.fetchAssets(<span class="keyword">in</span>: collection, options: options)</span><br><span class="line">           <span class="keyword">if</span> assetResult.<span class="built_in">count</span> != <span class="number">0</span> &#123;</span><br><span class="line">               <span class="keyword">self</span>.photoAlbums.append([collection.localizedTitle!:assetResult])</span><br><span class="line">           &#125;</span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>
<h1 id="è·å–æŸä¸ªç›¸å†Œçš„æ‰€æœ‰å›¾ç‰‡åˆ—è¡¨"><a href="#è·å–æŸä¸ªç›¸å†Œçš„æ‰€æœ‰å›¾ç‰‡åˆ—è¡¨" class="headerlink" title="è·å–æŸä¸ªç›¸å†Œçš„æ‰€æœ‰å›¾ç‰‡åˆ—è¡¨"></a>è·å–æŸä¸ªç›¸å†Œçš„æ‰€æœ‰å›¾ç‰‡åˆ—è¡¨</h1><p>éœ€è¦ç”¨åˆ°çš„ç±»ï¼š</p>
<ul>
<li>PHFetchResultï¼šå¯¹è±¡æ£€ç´¢çš„å¯¹è±¡ï¼Œå¯ä»¥å¯¹å›¾ç‰‡è¿›è¡Œç­›é€‰</li>
<li>PHAssetï¼šå›¾ç‰‡èµ„æºçš„å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå›¾ç‰‡æˆ–è€…è§†é¢‘èµ„æº</li>
</ul>
<p>ä¸‹é¢è´´ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> é€šè¿‡ä¸‹æ ‡è¿”å›ç›¸å†Œçš„PHFetchResult</span><br><span class="line"> </span><br><span class="line"> - parameter index: é€‰æ‹©ç›¸å†Œçš„index</span><br><span class="line"> </span><br><span class="line"> - returns: ç›¸å†Œçš„PHFetchResult</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">getAblumResult</span><span class="params">(<span class="number">_</span> ablumIndex: Int)</span></span> -&gt; <span class="type">PHFetchResult</span>&lt;<span class="type">PHAsset</span>&gt;? &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> ablum = <span class="keyword">self</span>.photoAlbums[wcl_safe: ablumIndex] &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> result = ablum.values.first &#123;</span><br><span class="line">            <span class="keyword">return</span> result</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>ä¸Šé¢ä»£ç ä¸­è¿”å›çš„<code>result</code>å°±ä»£è¡¨é€‰ä¸­çš„ç›¸å†Œçš„å›¾ç‰‡åˆ—è¡¨</p>
<h1 id="è·å–åˆ°å•å¼ å›¾ç‰‡çš„æ•°æ®"><a href="#è·å–åˆ°å•å¼ å›¾ç‰‡çš„æ•°æ®" class="headerlink" title="è·å–åˆ°å•å¼ å›¾ç‰‡çš„æ•°æ®"></a>è·å–åˆ°å•å¼ å›¾ç‰‡çš„æ•°æ®</h1><p>é€šè¿‡ä¸Šé¢è·å–åˆ°çš„ç›¸å†Œçš„å›¾ç‰‡åˆ—è¡¨é€šè¿‡ä¸‹æ ‡å°±èƒ½è·å¾—åˆ°å›¾ç‰‡å¯¹åº”çš„<code>PHAsset</code>ï¼Œéœ€è¦ç”¨åˆ°çš„ç±»ï¼š</p>
<ul>
<li>PHCachingImageManagerï¼šè·å–å›¾ç‰‡æ•°æ®çš„Managerï¼Œä¹Ÿå¯ç¼“å­˜æ•°æ®</li>
<li>PHImageRequestOptionsï¼šè·å–å›¾ç‰‡çš„ä¸€äº›é€‰é¡¹é…ç½®ï¼Œæ¯”å¦‚è·å–æ–¹å¼ç­‰ç­‰</li>
<li>PHAssetï¼šå›¾ç‰‡èµ„æºçš„å¯¹è±¡ï¼Œä»£è¡¨ä¸€ä¸ªå›¾ç‰‡æˆ–è€…è§†é¢‘èµ„æº</li>
</ul>
<p>ä¸‹é¢æ˜¯ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> æ ¹æ®PHAssetè·å–photo</span><br><span class="line"> </span><br><span class="line"> - parameter ablumIndex:    ç›¸å†Œçš„index</span><br><span class="line"> - parameter alasset:       ç›¸å†Œé‡Œå›¾ç‰‡çš„PHAsset</span><br><span class="line"> - parameter photoSize:     å›¾ç‰‡çš„size</span><br><span class="line"> - parameter resultHandler: è¿”å›ç…§ç‰‡çš„å›è°ƒ</span><br><span class="line"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">getPhoto</span><span class="params">(<span class="number">_</span> photoSize: CGSize, alasset: PHAsset?, resultHandler: <span class="params">(<span class="params">(UIImage?, [AnyHashable: Any]?)</span></span></span></span> -&gt; <span class="type">Void</span>)?) &#123;</span><br><span class="line">    <span class="keyword">if</span> alasset != <span class="literal">nil</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> scale = <span class="type">UIScreen</span>.main.scale</span><br><span class="line">        <span class="keyword">let</span> photoScaleSize = <span class="type">CGSize</span>(width: photoSize.width*scale, height: photoSize.height*scale)</span><br><span class="line">        <span class="keyword">self</span>.photoManage.requestImage(<span class="keyword">for</span>: alasset!, targetSize: photoScaleSize, contentMode: .aspectFill, options: <span class="keyword">self</span>.photoOption, resultHandler: &#123; (image, infoDic) <span class="keyword">in</span></span><br><span class="line">            <span class="keyword">if</span> image != <span class="literal">nil</span> &#123;</span><br><span class="line">                resultHandler?(image, infoDic)</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="comment">//æ²¡è·å–åˆ°è¿”å›é»˜è®¤å›¾ç‰‡</span></span><br><span class="line">                <span class="keyword">let</span> image_buffer = <span class="type">WCLImagePickerBundle</span>.imageFromBundle(<span class="string">"image-buffer"</span>)</span><br><span class="line">                resultHandler?(image_buffer, infoDic)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="å°†å›¾ç‰‡å­˜å…¥ç›¸å†Œ"><a href="#å°†å›¾ç‰‡å­˜å…¥ç›¸å†Œ" class="headerlink" title="å°†å›¾ç‰‡å­˜å…¥ç›¸å†Œ"></a>å°†å›¾ç‰‡å­˜å…¥ç›¸å†Œ</h1><p>æœ‰æ—¶å€™æˆ‘ä»¬éœ€è¦å°†åº”ç”¨é‡Œçš„å›¾ç‰‡å­˜åˆ°ç›¸å†Œé‡Œé¢ï¼Œä¸€ä¸‹æ˜¯ä¼šç”¨åˆ°çš„ç±»ï¼š</p>
<ul>
<li>PHPhotoLibraryï¼šä»£è¡¨æˆ‘ä»¬æ‰‹æœºä¸­çš„å›¾ç‰‡åº“ï¼Œç”¨å®ƒæ¥æ“ä½œå›¾ç‰‡åº“ä¸­çš„å›¾ç‰‡</li>
<li>PHAssetChangeRequestï¼šèµ„æºæ“ä½œçš„è¯·æ±‚ç±»ï¼Œç”¨æ¥å¯¹èµ„æºè¿›è¡Œæ“ä½œ</li>
</ul>
<p>ä»£ç ç‰‡æ®µï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ‰§è¡Œå˜åŒ–</span></span><br><span class="line"><span class="type">PHPhotoLibrary</span>.shared().performChanges(&#123;</span><br><span class="line">		<span class="comment">//åˆ›å»ºä¸€ä¸ªå›¾ç‰‡èµ„æº</span></span><br><span class="line">        <span class="type">PHAssetChangeRequest</span>.creationRequestForAsset(from: image)</span><br><span class="line">    &#125;, completionHandler: &#123; (flag, error) <span class="keyword">in</span></span><br><span class="line">        <span class="comment">//æ‰§è¡Œç»“æœå›è°ƒ</span></span><br><span class="line">    &#125;)</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>ä»¥ä¸Šç®€å•çš„è®²è§£äº†ä¸€ä¸‹Photosç›¸å…³çŸ¥è¯†ç‚¹å’Œä½¿ç”¨æ–¹æ³•ï¼Œæ›´å¤šçš„å¯ä»¥å»å®˜æ–¹æ–‡æ¡£ä¸Šå»æŸ¥çœ‹ã€‚ç”¨Photosè‡ªå·±å†™äº†ä¸€ä¸ª<a href="https://github.com/631106979/WCLImagePickerController" target="_blank" rel="external">å›¾ç‰‡é€‰æ‹©å™¨</a>ï¼Œå¤§å®¶æœ‰å…´è¶£çš„å¯ä»¥å»çœ‹ä¸€ä¸‹ï¼Œæœ‰ç”¨çš„è¯å¯ä»¥starä¸€ä¸‹ï¼Œå†™ä¸ä¸æ˜¯å¾ˆå¥½ï¼Œæœ‰ä»€ä¹ˆé”™è¯¯å¯ä»¥æŒ‡å‡ºæ¥~æœ€åè°¢è°¢å¤§å®¶çš„é˜…è¯»ã€‚</p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 01æœˆ 11æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[swiftå­¦ä¹ ç¬”è®° - Rangeã€ClosedRangeã€CountableClosedRangeä¸CountableRangeå­¦ä¹ ]]></title>
      <url>http://imwcl.com/2017/01/05/swift%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0-Range%E3%80%81ClosedRange%E3%80%81CountableClosedRange%E4%B8%8ECountableRange%E5%AD%A6%E4%B9%A0/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨ä½¿ç”¨swiftçš„è¿‡ç¨‹ä¸­å­—ç¬¦ä¸²æ“ä½œçš„æ—¶å€™ä¼šç”¨åˆ°Rangeï¼Œåˆšå¼€å§‹ä½¿ç”¨èµ·æ¥å„ç§åˆ«æ‰­ï¼Œç„¶åå‘ç°å±…ç„¶è¿˜æœ‰<code>ClosedRangeã€CountableClosedRangeå’ŒCountableRange</code>ï¼Œè¿™ä¸‹å°±å½»åº•å¤´ç–¼äº†ï¼Œä¸‹é¢ç®€å•çš„æè¿°ä¸€ä¸‹å®ƒä»¬çš„åŒºåˆ«</p>
</blockquote>
<h2 id="ä»å‘½åæ¥ä»£ç æ¥ç†è§£å’ŒåŒºåˆ†"><a href="#ä»å‘½åæ¥ä»£ç æ¥ç†è§£å’ŒåŒºåˆ†" class="headerlink" title="ä»å‘½åæ¥ä»£ç æ¥ç†è§£å’ŒåŒºåˆ†"></a>ä»å‘½åæ¥ä»£ç æ¥ç†è§£å’ŒåŒºåˆ†</h2><ul>
<li><code>CountableClosedRange</code>ï¼šå¯æ•°çš„é—­åŒºé—´</li>
<li><code>CountableRange</code>ï¼šå¯æ•°çš„å¼€åŒºé—´</li>
<li><code>ClosedRange</code>ï¼šä¸å¯æ•°çš„é—­åŒºé—´</li>
<li><code>Range</code>ï¼šä¸å¯æ•°çš„å¼€å±…é—´</li>
</ul>
<a id="more"></a>
<p>ä¸‹é¢é€šè¿‡ä»£ç æ¥ç†è§£ä¸€ä¸‹ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// åˆå§‹åŒ–æµ‹è¯•ï¼š</span></span><br><span class="line"><span class="comment">// CountableClosedRange: [0,2]</span></span><br><span class="line"><span class="keyword">let</span> rangea = <span class="number">0</span>...<span class="number">2</span></span><br><span class="line"><span class="comment">// CountableRange: [0,2)</span></span><br><span class="line"><span class="keyword">let</span> rangeb = <span class="number">0</span>..&lt;<span class="number">2</span></span><br><span class="line"><span class="comment">// ClosedRange: [0.1,2.1]</span></span><br><span class="line"><span class="keyword">let</span> rangec = <span class="number">0.1</span>...<span class="number">2.1</span></span><br><span class="line"><span class="comment">// Range: [0.1,2.1)</span></span><br><span class="line"><span class="keyword">let</span> ranged = <span class="number">0.1</span>..&lt;<span class="number">2.1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// forå¾ªç¯æµ‹è¯•ï¼šå¯æ•°çš„ï¼Œå¯ä»¥forå¾ªç¯</span></span><br><span class="line"><span class="comment">// CountableClosedRangeï¼šå¯æ•°çš„å¯ä»¥forå¾ªç¯ï¼Œè¾“å‡º0ã€1ã€2</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> rangea &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// CountableRangeï¼šå¯æ•°çš„å¯ä»¥forå¾ªç¯ï¼Œè¾“å‡º0ã€1</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> rangeb &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// forå¾ªç¯æµ‹è¯•ï¼šä¸å¯æ•°çš„ï¼Œä¸èƒ½forå¾ªç¯</span></span><br><span class="line"><span class="comment">// ClosedRangeï¼šä¸å¯æ•°ï¼Œä¸èƒ½forå¾ªç¯ï¼Œä»¥ä¸‹å†™æ³•ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> rangec &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// Rangeï¼šä¸å¯æ•°ï¼Œä¸èƒ½forå¾ªç¯ï¼Œä»¥ä¸‹å†™æ³•ä¼šæŠ¥é”™</span></span><br><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> ranged &#123;</span><br><span class="line">    <span class="built_in">print</span>(i)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h2><p>å¯ä»¥ç”¨å¯æ•°å’Œä¸å¯æ•°ã€é—­åŒºé—´å’Œå¼€åŒºé—´æ¥ç†è§£è®°å¿†<code>Rangeã€ClosedRangeã€CountableClosedRangeå’ŒCountableRange</code></p>
<p>å¯æ•°ï¼šå¯ä»¥ç”¨äºforå¾ªç¯</p>
<ul>
<li><code>CountableClosedRange</code></li>
<li><code>CountableRange</code></li>
</ul>
<p>ä¸å¯æ•°ï¼šä¸èƒ½ç”¨äºforå¾ªç¯</p>
<ul>
<li><code>ClosedRange</code></li>
<li><code>Range</code></li>
</ul>
<p>é—­åŒºé—´ï¼š</p>
<ul>
<li><code>CountableClosedRange</code></li>
<li><code>ClosedRange</code></li>
</ul>
<p>å¼€åŒºé—´ï¼š</p>
<ul>
<li><code>Range</code></li>
<li><code>CountableRange</code></li>
</ul>
<blockquote>
<p>ä»¥ä¸Šæ˜¯æˆ‘æ€»ç»“çš„<code>Rangeã€ClosedRangeã€CountableClosedRangeå’ŒCountableRange</code>çš„åŒºåˆ«ï¼Œå¸Œæœ›å¯¹å¤§å®¶æœ‰å¸®åŠ©ï¼Œå¦‚æœå†™çš„æœ‰é”™è¯¯å¸Œæœ›å¤§å®¶èƒ½æŒ‡å‡ºï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2017 å¹´ 01æœˆ 05æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - è‡ªå®šä¹‰UICollectionViewLayoutå®ç°ç€‘å¸ƒæµå¸ƒå±€]]></title>
      <url>http://imwcl.com/2016/12/21/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E8%87%AA%E5%AE%9A%E4%B9%89UICollectionViewLayout%E5%AE%9E%E7%8E%B0%E7%80%91%E5%B8%83%E6%B5%81%E5%B8%83%E5%B1%80/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ€è¿‘é¡¹ç›®ä¸­éœ€è¦ç”¨åˆ°ç€‘å¸ƒæµçš„æ•ˆæœï¼Œä½†æ˜¯ç”¨UICollectionViewFlowLayoutåˆè¾¾ä¸åˆ°æ•ˆæœï¼Œè‡ªå·±åŠ¨æ‰‹å†™äº†ä¸€ä¸ªç€‘å¸ƒæµçš„layoutï¼Œä¸‹é¢æ˜¯æˆ‘çš„å¿ƒè·¯è·¯ç¨‹</p>
</blockquote>
<p>å…ˆå…ˆä¸Šæ•ˆæœå›¾ä¸<a href="https://github.com/631106979/WCLWaterFallLayout" target="_blank" rel="external">demoåœ°å€</a>ï¼š</p>
<p><img src="http://imwcl.oss-cn-shanghai.aliyuncs.com/github/WCLWaterFallLayout/WCLWaterFallLayout.gif" alt=""></p>
<a id="more"></a>
<p>å› ä¸ºæ˜¯ç”¨UICollectionViewæ¥å®ç°ç€‘å¸ƒæµçš„ï¼Œå†³å®šç»§æ‰¿UICollectionViewLayoutæ¥è‡ªå®šä¹‰ä¸€ä¸ªlayoutæ¥å®ç°ä¸€ä¸ªç®€å•ç€‘å¸ƒæµçš„å¸ƒå±€ï¼Œä¸‹é¢æ˜¯éœ€è¦é‡å†™çš„æ–¹æ³•ï¼š</p>
<ul>
<li>é‡å†™è¿™ä¸ªå±æ€§å¾—å‡ºUICollectionViewçš„ContentSizeï¼š<code>collectionViewContentSize</code></li>
<li>é‡å†™è¿™ä¸ªæ–¹æ³•æ¥å¾—åˆ°æ¯ä¸ªitemçš„å¸ƒå±€ï¼š<code>layoutAttributesForItem(at indexPath: IndexPath) -&gt; UICollectionViewLayoutAttributes?</code></li>
<li>é‡å†™è¿™ä¸ªæ–¹æ³•ç»™UICollectionViewæ‰€æœ‰itemçš„å¸ƒå±€ï¼š<code>layoutAttributesForElements(in rect: CGRect) -&gt; [UICollectionViewLayoutAttributes]?</code></li>
<li>é‡å†™è¿™ä¸ªæ–¹æ³•æ¥å®ç°UICollectionViewå‰çš„æ“ä½œï¼š<code>prepare()</code></li>
</ul>
<h2 id="å®ç°æ€è·¯"><a href="#å®ç°æ€è·¯" class="headerlink" title="å®ç°æ€è·¯"></a>å®ç°æ€è·¯</h2><p>é€šè¿‡ä»£ç†æ¨¡å¼è·å¾—åˆ°éœ€è¦çš„åˆ—æ•°å’Œæ¯ä¸€itemçš„é«˜åº¦ï¼Œç”¨è¿‡åˆ—æ•°ä¸åˆ—ä¹‹é—´çš„é—´éš”å’ŒUICollectionViewçš„å®½åº¦æ¥å¾—å‡ºæ¯ä¸€åˆ—çš„å®½åº¦ï¼Œitemä»å·¦è¾¹åˆ°å³å¸ƒå±€ï¼Œä¸‹ä¸€åˆ—çš„itemæ”¾åˆ°é«˜åº¦æœ€å°çš„åˆ—ä¸‹é¢ï¼Œé˜²æ­¢æ¯åˆ—çš„é«˜åº¦ä¸å‡åŒ€ï¼Œä¸‹é¢è´´ä¸Šä»£ç å’Œæ³¨é‡Šï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="meta">@objc</span> <span class="class"><span class="keyword">protocol</span> <span class="title">WCLWaterFallLayoutDelegate</span> </span>&#123;</span><br><span class="line">    <span class="comment">//waterFallçš„åˆ—æ•°</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">columnOfWaterFall</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView)</span></span> -&gt; <span class="type">Int</span></span><br><span class="line">    <span class="comment">//æ¯ä¸ªitemçš„é«˜åº¦</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">waterFall</span><span class="params">(<span class="number">_</span> collectionView: UICollectionView, layout waterFallLayout: WCLWaterFallLayout, heightForItemAt indexPath: IndexPath)</span></span> -&gt; <span class="type">CGFloat</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">WCLWaterFallLayout</span>: <span class="title">UICollectionViewLayout</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ä»£ç†</span></span><br><span class="line">    <span class="keyword">weak</span> <span class="keyword">var</span> delegate: <span class="type">WCLWaterFallLayoutDelegate</span>?</span><br><span class="line">    <span class="comment">//è¡Œé—´è·</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> lineSpacing: <span class="type">CGFloat</span>   = <span class="number">0</span></span><br><span class="line">    <span class="comment">//åˆ—é—´è·</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> columnSpacing: <span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line">    <span class="comment">//sectionçš„top</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> sectionTop: <span class="type">CGFloat</span>    = <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            sectionInsets.top = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sectionçš„Bottom</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> sectionBottom: <span class="type">CGFloat</span>  = <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            sectionInsets.bottom = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sectionçš„left</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> sectionLeft: <span class="type">CGFloat</span>   = <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            sectionInsets.<span class="keyword">left</span> = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sectionçš„right</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> sectionRight: <span class="type">CGFloat</span>  = <span class="number">0</span> &#123;</span><br><span class="line">        <span class="keyword">willSet</span> &#123;</span><br><span class="line">            sectionInsets.<span class="keyword">right</span> = newValue</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//sectionçš„Insets</span></span><br><span class="line">    <span class="meta">@IBInspectable</span> <span class="keyword">var</span> sectionInsets: <span class="type">UIEdgeInsets</span>      = <span class="type">UIEdgeInsets</span>.zero</span><br><span class="line">    <span class="comment">//æ¯è¡Œå¯¹åº”çš„é«˜åº¦</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> columnHeights: [<span class="type">Int</span>: <span class="type">CGFloat</span>]                  = [<span class="type">Int</span>: <span class="type">CGFloat</span>]()</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">var</span> attributes: [<span class="type">UICollectionViewLayoutAttributes</span>] = [<span class="type">UICollectionViewLayoutAttributes</span>]()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//MARK: Initial Methods</span></span><br><span class="line">    <span class="keyword">init</span>(lineSpacing: <span class="type">CGFloat</span>, columnSpacing: <span class="type">CGFloat</span>, sectionInsets: <span class="type">UIEdgeInsets</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">        <span class="keyword">self</span>.lineSpacing      = lineSpacing</span><br><span class="line">        <span class="keyword">self</span>.columnSpacing    = columnSpacing</span><br><span class="line">        <span class="keyword">self</span>.sectionInsets    = sectionInsets</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">        <span class="keyword">super</span>.<span class="keyword">init</span>(coder: aDecoder)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//MARK: Public Methods</span></span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="comment">//MARK: Override</span></span><br><span class="line">    <span class="keyword">override</span> <span class="keyword">var</span> collectionViewContentSize: <span class="type">CGSize</span> &#123;</span><br><span class="line">        <span class="keyword">var</span> maxHeight: <span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> height <span class="keyword">in</span> columnHeights.values &#123;</span><br><span class="line">            <span class="keyword">if</span> height &gt; maxHeight &#123;</span><br><span class="line">                maxHeight = height</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGSize</span>.<span class="keyword">init</span>(width: collectionView?.frame.width ?? <span class="number">0</span>, height: maxHeight + sectionInsets.bottom)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">prepare</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">super</span>.prepare()</span><br><span class="line">        <span class="keyword">guard</span> collectionView != <span class="literal">nil</span> <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="keyword">return</span></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> columnCount = delegate?.columnOfWaterFall(collectionView!) &#123;</span><br><span class="line">            <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;columnCount &#123;</span><br><span class="line">                columnHeights[i] = sectionInsets.top</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">let</span> itemCount = collectionView!.numberOfItems(inSection: <span class="number">0</span>)</span><br><span class="line">        attributes.removeAll()</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;itemCount &#123;</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> att = layoutAttributesForItem(at: <span class="type">IndexPath</span>.<span class="keyword">init</span>(row: i, section: <span class="number">0</span>)) &#123;</span><br><span class="line">                attributes.append(att)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForItem</span><span class="params">(at indexPath: IndexPath)</span></span> -&gt; <span class="type">UICollectionViewLayoutAttributes</span>? &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> collectionView = collectionView &#123;</span><br><span class="line">            <span class="comment">//æ ¹æ®indexPathè·å–itemçš„attributes</span></span><br><span class="line">            <span class="keyword">let</span> att = <span class="type">UICollectionViewLayoutAttributes</span>.<span class="keyword">init</span>(forCellWith: indexPath)</span><br><span class="line">            <span class="comment">//è·å–collectionViewçš„å®½åº¦</span></span><br><span class="line">            <span class="keyword">let</span> width = collectionView.frame.width</span><br><span class="line">            <span class="keyword">if</span> <span class="keyword">let</span> columnCount = delegate?.columnOfWaterFall(collectionView) &#123;</span><br><span class="line">                <span class="keyword">guard</span> columnCount &gt; <span class="number">0</span> <span class="keyword">else</span> &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//itemçš„å®½åº¦ = (collectionViewçš„å®½åº¦ - å†…è¾¹è·ä¸åˆ—é—´è·) / åˆ—æ•°</span></span><br><span class="line">                <span class="keyword">let</span> totalWidth  = (width - sectionInsets.<span class="keyword">left</span> - sectionInsets.<span class="keyword">right</span> - (<span class="type">CGFloat</span>(columnCount) - <span class="number">1</span>) * columnSpacing)</span><br><span class="line">                <span class="keyword">let</span> itemWidth   = totalWidth / <span class="type">CGFloat</span>(columnCount)</span><br><span class="line">                <span class="comment">//è·å–itemçš„é«˜åº¦ï¼Œç”±å¤–ç•Œè®¡ç®—å¾—åˆ°</span></span><br><span class="line">                <span class="keyword">let</span> itemHeight  = delegate?.waterFall(collectionView, layout: <span class="keyword">self</span>, heightForItemAt: indexPath) ?? <span class="number">0</span></span><br><span class="line">                <span class="comment">//æ‰¾å‡ºæœ€çŸ­çš„é‚£ä¸€åˆ—</span></span><br><span class="line">                <span class="keyword">var</span> minIndex = <span class="number">0</span></span><br><span class="line">                <span class="keyword">for</span> column <span class="keyword">in</span> columnHeights &#123;</span><br><span class="line">                    <span class="keyword">if</span> column.value &lt; columnHeights[minIndex] ?? <span class="number">0</span> &#123;</span><br><span class="line">                        minIndex = column.key</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="comment">//æ ¹æ®æœ€çŸ­åˆ—çš„åˆ—æ•°è®¡ç®—itemçš„xå€¼</span></span><br><span class="line">                <span class="keyword">let</span> itemX  = sectionInsets.<span class="keyword">left</span> + (columnSpacing + itemWidth) * <span class="type">CGFloat</span>(minIndex)</span><br><span class="line">                <span class="comment">//itemçš„yå€¼ = æœ€çŸ­åˆ—çš„æœ€å¤§yå€¼ + è¡Œé—´è·</span></span><br><span class="line">                <span class="keyword">let</span> itemY  = (columnHeights[minIndex] ?? <span class="number">0</span>) + lineSpacing</span><br><span class="line">                <span class="comment">//è®¾ç½®attributesçš„frame</span></span><br><span class="line">                att.frame  = <span class="type">CGRect</span>.<span class="keyword">init</span>(x: itemX, y: itemY, width: itemWidth, height: itemHeight)</span><br><span class="line">                <span class="comment">//æ›´æ–°å­—å…¸ä¸­çš„æœ€å¤§yå€¼</span></span><br><span class="line">                columnHeights[minIndex] = att.frame.maxY</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> att</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">layoutAttributesForElements</span><span class="params">(<span class="keyword">in</span> rect: CGRect)</span></span> -&gt; [<span class="type">UICollectionViewLayoutAttributes</span>]? &#123;</span><br><span class="line">        <span class="keyword">return</span> attributes</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>æœ€åé™„å¸¦<a href="https://github.com/631106979/WCLWaterFallLayout" target="_blank" rel="external">demoåœ°å€</a>ï¼Œå¤§å®¶å–œæ¬¢çš„è¯å¯ä»¥starä¸€ä¸‹</p>
<blockquote>
<p>ä¸Šé¢æ˜¯ç®€å•çš„ç€‘å¸ƒæµçš„å®ç°è¿‡ç¨‹ï¼Œå¸Œæœ›å¤§å®¶èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œæœ‰å¾ˆå¤šåœ°æ–¹è€ƒè™‘çš„ä¸è¶³ï¼Œæ¬¢è¿å¤§å®¶äº¤æµå­¦ä¹ ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 12æœˆ 21æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - å¯Œæ–‡æœ¬æ­£åˆ™æ›¿æ¢è¡¨æƒ…]]></title>
      <url>http://imwcl.com/2016/11/28/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E5%AF%8C%E6%96%87%E6%9C%AC%E6%AD%A3%E5%88%99%E6%9B%BF%E6%8D%A2%E8%A1%A8%E6%83%85/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ€è¿‘å†™é¡¹ç›®éœ€è¦ç”¨åˆ°å¯Œæ–‡æœ¬è§£æå­—ç¬¦ä¸²æ˜¾ç¤ºè¡¨æƒ…ï¼Œä¸‹é¢æ˜¯æˆ‘ä½¿ç”¨æ­£åˆ™æ›¿æ¢å®ç°å¯Œæ–‡æœ¬çš„æ–¹å¼ï¼Œå¸Œæœ›èƒ½å¸®åŠ©åˆ°å¤§å®¶</p>
</blockquote>
<p>å…ˆä¸Šæ•ˆæœå›¾å’Œ<a href="https://github.com/631106979/WCLEmojiParse" target="_blank" rel="external">demoåœ°å€</a></p>
<p><img src="http://img.blog.csdn.net/20161128171539733" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<a id="more"></a>
<p>å®ç°è¿‡ç¨‹ä¸­éœ€è¦ç”¨åˆ°çš„çŸ¥è¯†ç‚¹</p>
<ul>
<li>NSRegularExpressionï¼ˆæ­£åˆ™è¡¨è¾¾å¼ï¼‰</li>
<li>NSMutableAttributedStringï¼ˆç”¨æ¥æ˜¾ç¤ºå¯Œæ–‡æœ¬çš„stringï¼‰</li>
</ul>
<p>åºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥è´´ä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> UIKit</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">WCLEmojiParse</span> </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//æ‰€æœ‰è¡¨æƒ…å¯¹åº”çš„å­—ç¬¦ä¸²</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> emotions = [<span class="string">"[angry]"</span>, <span class="string">"[beers]"</span>, <span class="string">"[blush]"</span>, <span class="string">"[bomb]"</span>, <span class="string">"[cool]"</span>, <span class="string">"[flushed]"</span>, <span class="string">"[grin]"</span>, <span class="string">"[gun]"</span>, <span class="string">"[heart]"</span>, <span class="string">"[heartseyes]"</span>, <span class="string">"[imp]"</span>, <span class="string">"[Joy]"</span>, <span class="string">"[kiss]"</span>, <span class="string">"[ok]"</span>, <span class="string">"[persevere]"</span>, <span class="string">"[pray]"</span>, <span class="string">"[punch]"</span>, <span class="string">"[scream]"</span>, <span class="string">"[shit]"</span>, <span class="string">"[skull]"</span>, <span class="string">"[sleeping]"</span>, <span class="string">"[smiley]"</span>, <span class="string">"[smirk]"</span>, <span class="string">"[sob]"</span>,<span class="string">"[sweat]"</span>, <span class="string">"[thumbsup]"</span>, <span class="string">"[tongue]"</span>, <span class="string">"[unamused]"</span>, <span class="string">"[v]"</span>, <span class="string">"[weary]"</span>, <span class="string">"[wink]"</span>, <span class="string">"[yum]"</span>]</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//Stringçš„æ ¼å¼</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> textAttributes = [<span class="type">NSFontAttributeName</span>: <span class="type">UIFont</span>.systemFont(ofSize: <span class="number">16</span>), <span class="type">NSForegroundColorAttributeName</span>: <span class="type">UIColor</span>.black]</span><br><span class="line">    <span class="comment">//æ­£åˆ™è¡¨è¾¾å¼çš„æ ¼å¼</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> pattern = <span class="string">"\\[+[a-z]+\\]"</span></span><br><span class="line">    <span class="comment">//è¡¨æƒ…çš„bounds</span></span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">let</span> attachmentBounds = <span class="type">CGRect</span>.<span class="keyword">init</span>(origin: <span class="type">CGPoint</span>.<span class="keyword">init</span>(x: <span class="number">0</span>, y: -<span class="number">5</span>), size: <span class="type">CGSize</span>.<span class="keyword">init</span>(width: <span class="number">24</span>, height: <span class="number">24</span>))</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//MARK: Public Methods</span></span><br><span class="line">    <span class="keyword">static</span> <span class="function"><span class="keyword">func</span> <span class="title">replaceEmoji</span><span class="params">(<span class="number">_</span> str: String)</span></span> -&gt; <span class="type">NSAttributedString</span> &#123;</span><br><span class="line">        <span class="comment">//è½¬æˆNSString</span></span><br><span class="line">        <span class="keyword">let</span> originalNSString = str <span class="keyword">as</span> <span class="type">NSString</span></span><br><span class="line">        <span class="comment">//é€šè¿‡strè·å¾—NSMutableAttributedString</span></span><br><span class="line">        <span class="keyword">let</span> attStr = <span class="type">NSMutableAttributedString</span>.<span class="keyword">init</span>(string: str, attributes: textAttributes)</span><br><span class="line">        <span class="keyword">var</span> regex: <span class="type">NSRegularExpression</span>?</span><br><span class="line">        <span class="keyword">do</span> &#123;</span><br><span class="line">            regex = <span class="keyword">try</span> <span class="type">NSRegularExpression</span>.<span class="keyword">init</span>(pattern: pattern, options: .caseInsensitive)</span><br><span class="line">        &#125; <span class="keyword">catch</span> <span class="keyword">let</span> error <span class="keyword">as</span> <span class="type">NSError</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(error.localizedDescription)</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//è·å–åˆ°åŒ¹é…æ­£åˆ™çš„æ•°æ®</span></span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> matches = regex?.matches(<span class="keyword">in</span>: str, options: .withoutAnchoringBounds, range: <span class="type">NSMakeRange</span>(<span class="number">0</span>,attStr.string.characters.<span class="built_in">count</span>)) &#123;</span><br><span class="line">            <span class="keyword">if</span> matches.<span class="built_in">count</span> &gt; <span class="number">0</span> &#123;</span><br><span class="line">                <span class="comment">//éå†ç¬¦åˆçš„æ•°æ®è¿›è¡Œè§£æ</span></span><br><span class="line">                <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;matches.<span class="built_in">count</span> &#123;</span><br><span class="line">                    <span class="keyword">let</span> result = matches[matches.<span class="built_in">count</span>-i-<span class="number">1</span>]</span><br><span class="line">                    <span class="keyword">let</span> range = result.range</span><br><span class="line">                    <span class="keyword">let</span> emojiStr = originalNSString.substring(with: range)</span><br><span class="line">                    <span class="comment">//ç¬¦åˆçš„æ•°æ®æ˜¯å¦ä¸ºè¡¨æƒ…</span></span><br><span class="line">                    <span class="keyword">if</span> emotions.<span class="built_in">contains</span>(emojiStr) &#123;</span><br><span class="line">                        <span class="keyword">if</span> <span class="keyword">let</span> image = <span class="type">UIImage</span>.<span class="keyword">init</span>(named: emojiStr) &#123;</span><br><span class="line">                            <span class="comment">//åˆ›å»ºä¸€ä¸ªNSTextAttachment</span></span><br><span class="line">                            <span class="keyword">let</span> attachment    = <span class="type">NSTextAttachment</span>()</span><br><span class="line">                            attachment.image  = image</span><br><span class="line">                            attachment.bounds = attachmentBounds</span><br><span class="line">                            <span class="comment">//é€šè¿‡NSTextAttachmentç”Ÿæˆä¸€ä¸ªNSAttributedString</span></span><br><span class="line">                            <span class="keyword">let</span> rep = <span class="type">NSAttributedString</span>(attachment: attachment)</span><br><span class="line">                            <span class="comment">//æŠŠè¡¨æƒ…äºä¹‹å‰çš„å­—ç¬¦ä¸²æ›¿æ¢</span></span><br><span class="line">                            attStr.replaceCharacters(<span class="keyword">in</span>: range, with: rep)</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> attStr</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/631106979/WCLEmojiParse" target="_blank" rel="external">demoåœ°å€</a></p>
<blockquote>
<p>ä»¥ä¸Šæ˜¯ç®€å•çš„å¯Œæ–‡æœ¬æ˜¾ç¤ºè¡¨æƒ…çš„æ–¹å¼ï¼ŒæŠ›ç –å¼•ç‰ï¼Œå¤§å®¶è§ç¬‘äº†ï¼Œå¸Œæœ›å¤§å®¶èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 11æœˆ 28æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - é¡¹ç›®çš„æœ¬åœ°åŒ–å¤„ç†(å¤šè¯­è¨€å¼€å‘)]]></title>
      <url>http://imwcl.com/2016/11/21/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E9%A1%B9%E7%9B%AE%E7%9A%84%E6%9C%AC%E5%9C%B0%E5%8C%96%E5%A4%84%E7%90%86-%E5%A4%9A%E8%AF%AD%E8%A8%80%E5%BC%80%E5%8F%91/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ€è¿‘é¡¹ç›®æœ¬åœ°åŒ–ï¼Œéœ€è¦æ”¯æŒ11å›½è¯­è¨€ï¼Œä¸‹é¢å°†æœ¬åœ°åŒ–çš„æ­¥éª¤è®°å½•ä¸‹æ¥ï¼Œæ–¹ä¾¿æŸ¥æ‰¾ä½¿ç”¨ï¼Œæ­¥éª¤å¾ˆç®€å•ï¼Œæœ‰äº›åœ°æ–¹ä¹Ÿæœ‰å‘ï¼Œå¸Œæœ›å¤§å®¶çœ‹åå°‘èµ°å¼¯è·¯~~</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯æœ¬åœ°åŒ–"><a href="#ä»€ä¹ˆæ˜¯æœ¬åœ°åŒ–" class="headerlink" title="ä»€ä¹ˆæ˜¯æœ¬åœ°åŒ–"></a>ä»€ä¹ˆæ˜¯æœ¬åœ°åŒ–</h2><p>æœ¬åœ°åŒ–è¯´ç›´ç™½ç‚¹å°±æ˜¯å¤šè¯­è¨€å¼€å‘ï¼Œé€šè¿‡ç³»ç»Ÿè¯­è¨€æ¥åˆ¤æ–­åº”ç”¨ä½¿ç”¨çš„å“ªç§è¯­è¨€ï¼Œå®ç°åº”ç”¨çš„æœ¬åœ°åŒ–å¼€å‘</p>
<a id="more"></a>
<h2 id="æœ¬åœ°åŒ–å¤„ç†éœ€è¦å¤„ç†çš„æ–‡ä»¶"><a href="#æœ¬åœ°åŒ–å¤„ç†éœ€è¦å¤„ç†çš„æ–‡ä»¶" class="headerlink" title="æœ¬åœ°åŒ–å¤„ç†éœ€è¦å¤„ç†çš„æ–‡ä»¶"></a>æœ¬åœ°åŒ–å¤„ç†éœ€è¦å¤„ç†çš„æ–‡ä»¶</h2><ul>
<li>æœ¬åœ°åŒ–åº”ç”¨ç¨‹åºçš„<code>info.plist</code></li>
<li>æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¤„ç†ï¼ˆé¡¹ç›®ä¸­æ‰€æ¶‰åŠçš„å­—ç¬¦ä¸²ï¼‰</li>
<li>æœ¬åœ°åŒ–å›¾ç‰‡</li>
<li>XIBå’Œstoryboardçš„æœ¬åœ°åŒ–å¤„ç†</li>
<li>å…¶ä»–æ–‡ä»¶ï¼Œæ¯”å¦‚<code>csv</code>ç­‰ç­‰</li>
</ul>
<h2 id="è®©æˆ‘ä»¬çš„é¡¹ç›®æ”¯æŒæœ¬åœ°åŒ–"><a href="#è®©æˆ‘ä»¬çš„é¡¹ç›®æ”¯æŒæœ¬åœ°åŒ–" class="headerlink" title="è®©æˆ‘ä»¬çš„é¡¹ç›®æ”¯æŒæœ¬åœ°åŒ–"></a>è®©æˆ‘ä»¬çš„é¡¹ç›®æ”¯æŒæœ¬åœ°åŒ–</h2><p>é¦–å…ˆæˆ‘ä»¬åªæœ‰è®¾ç½®æˆæ”¯æŒå¤šè¯­è¨€äº†ï¼Œæˆ‘ä»¬æ‰èƒ½åœ¨å±•ç¤ºé¡¹ç›®åç§°å’Œé¡¹ç›®ä¸­çš„å­—ç¬¦ä¸²ç­‰å°†è¯­è¨€è¿›è¡Œåˆ‡æ¢ï¼Œå…·ä½“æ“ä½œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://img.blog.csdn.net/20161121115944742" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>åœ¨å¦‚ä¸Šå›¾æ‰€ç¤ºçš„åœ°æ–¹æ·»åŠ ä½ éœ€è¦æ”¯æŒçš„è¯­è¨€å°±è¡Œäº†ï¼Œæˆ‘è¿™é‡Œæ˜¯æ·»åŠ äº†ç®€ä½“æ±‰è¯­å’Œè‹±è¯­</p>
<h2 id="å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿä½¿ç”¨çš„è¯­è¨€"><a href="#å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿä½¿ç”¨çš„è¯­è¨€" class="headerlink" title="å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿä½¿ç”¨çš„è¯­è¨€"></a>å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿä½¿ç”¨çš„è¯­è¨€</h2><p>æˆ‘ä»¬ä½¿ç”¨<code>Locale</code>è¿™ä¸ªç±»æ¥åˆ¤æ–­å½“å‰çš„ç³»ç»Ÿè¯­è¨€ï¼Œæ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è·å–å½“å‰çš„locale</span></span><br><span class="line"><span class="keyword">let</span> locale = <span class="type">Locale</span>.current</span><br><span class="line"><span class="comment">//è¿”å›æœ¬åœ°è¯­è¨€ç¯å¢ƒçš„è¯­è¨€ä»£ç ,æˆ–è€…å¦‚æœæ²¡æœ‰é›¶</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚,å¯¹äºåœ°åŒºâ€œzh-Hant-HKâ€,è¿”å›â€œzhâ€</span></span><br><span class="line"><span class="keyword">let</span> languageCode = locale.languageCode</span><br><span class="line"><span class="comment">//è¿”å›è¯¥åœ°åŒºä»£ç çš„è¯­è¨€ç¯å¢ƒ,æˆ–è€…å¦‚æœæ²¡æœ‰é›¶</span></span><br><span class="line"><span class="comment">//ä¾‹å¦‚,å¯¹äºåœ°åŒºâ€œzh-Hant-HKâ€,è¿”å›â€œHKâ€</span></span><br><span class="line"><span class="keyword">let</span> regionCode = locale.regionCode</span><br></pre></td></tr></table></figure>
<p>åŒè¿‡ä»¥ä¸Šçš„ä»£ç åŸºæœ¬ä¸Šèƒ½æ¸…æ¥šçš„çŸ¥é“å½“å‰ç³»ç»Ÿçš„ä½¿ç”¨çš„è¯­è¨€</p>
<h2 id="è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰è¯­è¨€"><a href="#è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰è¯­è¨€" class="headerlink" title="è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰è¯­è¨€"></a>è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰è¯­è¨€</h2><p> åŒæ ·æˆ‘ä»¬ä¹Ÿæ˜¯é€šè¿‡<code>Locale</code>æ¥è·å–ç³»ç»Ÿæ”¯æŒçš„æ‰€æœ‰è¯­è¨€</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›å¯ç”¨â€œè¯­è¨€ç¯å¢ƒâ€æ ‡è¯†ç¬¦çš„åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">let</span> availableList = <span class="type">Locale</span>.availableIdentifiers</span><br><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ªå¯ç”¨â€œè¯­è¨€ç¯å¢ƒâ€è¯­è¨€ä»£ç çš„åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">let</span> languageCodeList = <span class="type">Locale</span>.isoLanguageCodes</span><br><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ªå¯ç”¨â€œè¯­è¨€ç¯å¢ƒâ€åœ°åŒºä»£ç çš„åˆ—è¡¨</span></span><br><span class="line"><span class="keyword">let</span> languageCodeList = <span class="type">Locale</span>.isoRegionCodes</span><br></pre></td></tr></table></figure>
<h2 id="å¦‚ä½•æœ¬åœ°åŒ–info-plist"><a href="#å¦‚ä½•æœ¬åœ°åŒ–info-plist" class="headerlink" title="å¦‚ä½•æœ¬åœ°åŒ–info.plist"></a>å¦‚ä½•æœ¬åœ°åŒ–info.plist</h2><p>1.é¦–å…ˆæˆ‘ä»¬å»ºä¸€ä¸ªåç§°å«<code>InfoPlist.strings</code>çš„æœ¬åœ°åŒ–æ–‡ä»¶ï¼Œè®°ä½åç§°å¿…é¡»å«<code>InfoPlist.strings</code></p>
<p><img src="http://img.blog.csdn.net/20161121120522219" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>2.é€‰æ‹©è®©<code>InfoPlist.strings</code>æ”¯æŒçš„è¯­è¨€ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://img.blog.csdn.net/20161121120318894" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>3.åœ¨<code>InfoPlist.strings</code>åˆ†åˆ«å†™å…¥ä½ æƒ³æœ¬åœ°åŒ–çš„å€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º ï¼ˆæ ¼å¼å¦‚ä¸‹æ‰€ç¤ºï¼Œä»¥åˆ†å·ç»“å°¾ï¼‰ï¼š</p>
<p><img src="http://img.blog.csdn.net/20161121120905709" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"><br><img src="http://img.blog.csdn.net/20161121120915115" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h3 id="å¦‚ä½•è·å¾—info-plistä¸­å¯¹åº”çš„Key"><a href="#å¦‚ä½•è·å¾—info-plistä¸­å¯¹åº”çš„Key" class="headerlink" title="å¦‚ä½•è·å¾—info.plistä¸­å¯¹åº”çš„Key"></a>å¦‚ä½•è·å¾—info.plistä¸­å¯¹åº”çš„Key</h3><p>æˆ‘ä»¬å¯ä»¥é€šè¿‡æ‰“å¼€<code>info.plist</code>çš„æºç æ¥è·å–åˆ°å¯¹äºçš„Keyå€¼ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤º ï¼š</p>
<p><img src="http://img.blog.csdn.net/20161121121603665" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><img src="http://img.blog.csdn.net/20161121121535774" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¤„ç†"><a href="#æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¤„ç†" class="headerlink" title="æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¤„ç†"></a>æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¤„ç†</h2><p>æœ¬åœ°åŒ–å­—ç¬¦ä¸²å¤„ç†åŸç†ä¸Šè·ŸinfoPlistçš„å¤„ç†å·®ä¸å¤šï¼Œåªæ˜¯æˆ‘ä»¬éœ€ç”¨é…åˆä¸€ä¸ªæ–¹æ³•æ¥ä½¿ç”¨å®ƒï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> str = <span class="type">NSLocalizedString</span>(<span class="string">"éœ€è¦æœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²"</span>, comment: <span class="string">""</span>)</span><br></pre></td></tr></table></figure>
<p><img src="http://upload-images.jianshu.io/upload_images/814163-938f659e31926e3b.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt=""></p>
<p>é»˜è®¤ä½¿ç”¨<code>NSLocalizedString</code>è¿™ä¸ªæ–¹æ³•æ—¶æˆ‘ä»¬æ˜¯è·å–<code>mainBundle</code>ä¸­ä¸€ä¸ªåå­—å«<code>Localizable.strings</code>çš„æœ¬åœ°åŒ–æ–‡ä»¶ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬åªéœ€è¦å»ºä¸€ä¸ªåå­—å«<code>Localizable.strings</code>çš„æ–‡ä»¶å³å¯ï¼Œæ–¹æ³•æ­¥éª¤è·Ÿå»ºç«‹<code>infoPlist.strings</code>ç±»ä¼¼ï¼ˆ<a href="#å¦‚ä½•æœ¬åœ°åŒ–info.plist">ä¼ é€é—¨</a>ï¼‰</p>
<h3 id="ä½¿ç”¨è‡ªå®šä¹‰çš„æœ¬åœ°åŒ–æ–‡ä»¶"><a href="#ä½¿ç”¨è‡ªå®šä¹‰çš„æœ¬åœ°åŒ–æ–‡ä»¶" class="headerlink" title="ä½¿ç”¨è‡ªå®šä¹‰çš„æœ¬åœ°åŒ–æ–‡ä»¶"></a>ä½¿ç”¨è‡ªå®šä¹‰çš„æœ¬åœ°åŒ–æ–‡ä»¶</h3><p>ä½¿ç”¨è‡ªå®šä¹‰çš„æœ¬åœ°åŒ–æ–‡ä»¶ä¹Ÿå¾ˆå®¹æ˜“ï¼Œä¹Ÿæ˜¯ä¹‹å‰çš„æ–¹æ³•ï¼Œæˆ‘ä»¬åªéœ€è¦å¤šå¡«ä¸€äº›å‚æ•°å°±å¯ä»¥äº†ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›ä¸€ä¸ªæœ¬åœ°åŒ–çš„å­—ç¬¦ä¸²ï¼Œé»˜è®¤ä½¿ç”¨main bundleï¼Œå¦‚æœæ²¡æœ‰æŒ‡å®šä¸€ä¸ª</span></span><br><span class="line"><span class="keyword">public</span> <span class="function"><span class="keyword">func</span> <span class="title">NSLocalizedString</span><span class="params">(<span class="number">_</span> key: String, tableName: String? = <span class="keyword">default</span>, bundle: Bundle = <span class="keyword">default</span>, value: String = <span class="keyword">default</span>, comment: String)</span></span> -&gt; <span class="type">String</span></span><br></pre></td></tr></table></figure>
<p>ä»¥ä¸Šå°±æ˜¯<code>NSLocalizedString</code>è¿™ä¸ªæ–¹æ³•çš„æ‰€æœ‰å‚æ•°ï¼Œå…¶ä¸­çš„tableNameå°±æ˜¯æœ¬åœ°åŒ–æ–‡ä»¶çš„åç§°ï¼Œé»˜è®¤å°±æ˜¯<code>Localizable.strings</code>ï¼Œè‡ªå®šä¹‰çš„è¯åªéœ€è¦å»ºç«‹ä¸€ä¸ªæ–°çš„ï¼Œç„¶ååç§°å¡«ä½ è‡ªå·±å»ºç«‹çš„æœ¬åœ°åŒ–æ–‡ä»¶å³å¯.</p>
<h2 id="XIBå’Œstoryboardçš„æœ¬åœ°åŒ–å¤„ç†"><a href="#XIBå’Œstoryboardçš„æœ¬åœ°åŒ–å¤„ç†" class="headerlink" title="XIBå’Œstoryboardçš„æœ¬åœ°åŒ–å¤„ç†"></a>XIBå’Œstoryboardçš„æœ¬åœ°åŒ–å¤„ç†</h2><p><code>XIB</code>å’Œ<code>storyboard</code>çš„æ–¹æ³•ä¹Ÿå¾ˆç®€å•ï¼Œè·Ÿæœ¬åœ°æ”¾å­—ç¬¦ä¸²ç±»ä¼¼ï¼Œä¸è¿‡æ˜¯æœ¬åœ°åŒ–çš„<code>XIB</code>æ–‡ä»¶ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://img.blog.csdn.net/20161121132009631" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><code>XIB</code>å’Œ<code>storyboard</code>çš„æœ¬åœ°åŒ–åˆä¸¤ç§æ–¹å¼ï¼Œå¦‚ä¸Šå›¾æ‰€ç¤ºï¼Œä¸€ç§æ˜¯ä»¥æœ¬åœ°åŒ–æ–‡ä»¶çš„æ–¹å¼å®ç°ï¼Œå°±æ˜¯ä»¥<code>.strings</code>çš„æœ¬åœ°åŒ–æ–‡ä»¶ï¼›å¦å¤–ä¸€ç§æ˜¯ä»¥<code>XIB</code>æˆ–<code>storyboard</code>çš„æ–¹å¼å±•ç¤ºï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤º ï¼š</p>
<p><img src="http://img.blog.csdn.net/20161121132509732" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="æœ¬åœ°åŒ–å›¾ç‰‡å’Œå…¶ä»–æ–‡ä»¶"><a href="#æœ¬åœ°åŒ–å›¾ç‰‡å’Œå…¶ä»–æ–‡ä»¶" class="headerlink" title="æœ¬åœ°åŒ–å›¾ç‰‡å’Œå…¶ä»–æ–‡ä»¶"></a>æœ¬åœ°åŒ–å›¾ç‰‡å’Œå…¶ä»–æ–‡ä»¶</h2><p>å¯¹äºæœ¬åœ°åŒ–å›¾ç‰‡å’Œå…¶ä»–æ–‡ä»¶å°±æ¯”è¾ƒè´¹åŠ²ä¸€ç‚¹äº†ï¼Œå› ä¸ºXcodeä¸­å›¾ç‰‡å¹¶æ²¡æœ‰æ”¯æŒæœ¬åœ°åŒ–ï¼Œæˆ‘ä»¬åªæœ‰é€šè¿‡ä»£ç åˆ¤æ–­æ¥å†³å®šä½¿ç”¨ç›¸å¯¹äºçš„æœ¬åœ°åŒ–å›¾ç‰‡å’Œæ–‡ä»¶äº†ï¼Œ<a href="#å¦‚ä½•åˆ¤æ–­å½“å‰ç³»ç»Ÿä½¿ç”¨çš„è¯­è¨€">åˆ¤æ–­æ–¹æ³•çš„ä¼ é€é—¨</a></p>
<h2 id="æœ¬åœ°åŒ–ä¸­æ‰€é‡åˆ°çš„é—®é¢˜"><a href="#æœ¬åœ°åŒ–ä¸­æ‰€é‡åˆ°çš„é—®é¢˜" class="headerlink" title="æœ¬åœ°åŒ–ä¸­æ‰€é‡åˆ°çš„é—®é¢˜"></a>æœ¬åœ°åŒ–ä¸­æ‰€é‡åˆ°çš„é—®é¢˜</h2><p>åœ¨æœ¬åœ°åŒ–ä¸­å¿…é¡»è°¨è®°ä¸€ä¸ªé—®é¢˜ï¼Œå°±æ˜¯å¿…é¡»æŒ‰æœ¬åœ°åŒ–æ–‡ä»¶çš„æ ¼å¼æ¥å†™å…¥æ–‡ä»¶ï¼Œå› ä¸ºæœ¬åœ°åŒ–æ–‡ä»¶å¹¶ä¸èƒ½æ£€æŸ¥å‡ºä½ åˆ†å·åé¢æ˜¯å¦å¤šå¤šä½™çš„å­—ç¬¦ä¸²ï¼Œé€ æˆçš„åæœå°±æ˜¯æœ¬åœ°åŒ–æ–‡ä»¶å¤±æ•ˆï¼ï¼</p>
<blockquote>
<p>å€Ÿé‰´äº†è®¸å¤šå¤§ç¥çš„åšå®¢ï¼Œæ€»ç»“äº†ä¸€ç¯‡æ¯”è¾ƒå…¨çš„ï¼Œå¸Œæœ›å¤§å®¶èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œåˆä»€ä¹ˆç–‘é—®å¯ä»¥ç•™è¨€ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 11æœˆ 21æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[Shellå­¦ä¹ å°ç»“ - æ·±å…¥è®¤è¯†å˜é‡]]></title>
      <url>http://imwcl.com/2016/10/23/Shell%E5%AD%A6%E4%B9%A0%E5%B0%8F%E7%BB%93-%E6%B7%B1%E5%85%A5%E8%AE%A4%E8%AF%86%E5%8F%98%E9%87%8F/</url>
      <content type="html"><![CDATA[<p><img src="http://img.blog.csdn.net/20161023225816555" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="å˜é‡çš„å‘½å"><a href="#å˜é‡çš„å‘½å" class="headerlink" title="å˜é‡çš„å‘½å"></a>å˜é‡çš„å‘½å</h2><p>å¯¹äºåˆå­¦è€…æ¥è¯´ï¼Œå¯ä»¥ç®€å•çš„ç†è§£ä¸ºï¼Œå˜é‡å°±æ˜¯ä¿å­˜åœ¨è®¡ç®—æœºå†…å­˜ä¸­çš„ä¸€ç³»åˆ—çš„é”®å€¼å¯¹ã€‚</p>
<a id="more"></a>
<p>åˆ—å¦‚ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">str=&quot;hello&quot;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œçš„<code>str</code>å°±æ˜¯å˜é‡åï¼Œè€Œ<code>hello</code>å°±æ˜¯å˜é‡çš„å€¼</p>
<blockquote>
<p>æ³¨æ„åœ¨<code>shell</code>ä¸­å˜é‡åçš„å¤§å°æ˜¯æ•æ„Ÿçš„ï¼Œå› æ­¤å¤§å°å†™ä¸åŒçš„ä¸¤ä¸ªå˜é‡åå¹¶ä¸ä»£è¡¨åŒä¸€ä¸ªå˜é‡</p>
</blockquote>
<h2 id="å˜é‡çš„ç±»å‹"><a href="#å˜é‡çš„ç±»å‹" class="headerlink" title="å˜é‡çš„ç±»å‹"></a>å˜é‡çš„ç±»å‹</h2><p>æ ¹æ®å˜é‡çš„ç±»å‹ç¡®å®ï¼Œå¯ä»¥å°†ç¨‹åºè®¾è®¡è¯­è¨€åˆ†ä¸ºä¸¤ç±»ï¼Œåˆ†åˆ«æ˜¯<strong>é™æ€ç±»å‹è¯­è¨€</strong>å’Œ<strong>åŠ¨æ€ç±»å‹è¯­è¨€</strong></p>
<ul>
<li><strong>é™æ€ç±»å‹è¯­è¨€ï¼š</strong> æ˜¯åœ¨ç¼–è¯‘æœŸé—´å°±ç¡®å®šå˜é‡ç±»å‹çš„è¯­è¨€ï¼Œä¾‹å¦‚<code>JAVA</code>ã€<code>C++</code>ã€<code>PASCAL</code>ï¼Œåœ¨è¿™äº›è¯­è¨€ä¸­ä½¿ç”¨å˜é‡æ—¶ï¼Œå¿…é¡»é¦–å…ˆå£°æ˜å…¶ç±»å‹ã€‚</li>
<li><strong>åŠ¨æ€è®¾è®¡è¯­è¨€ï¼š</strong> å®åœ¨ç¨‹åºæ‰§è¡Œè¿‡ç¨‹ä¸­æ‰ç¡®å®šå˜é‡çš„æ•°æ®ç±»å‹çš„è¯­è¨€ã€‚å¸¸è§çš„æœ‰<code>VBScript</code>ã€<code>PHP</code>åŠ<code>Python</code>ã€‚åœ¨è¿™äº›è¯­è¨€ä¸­ï¼Œå˜é‡çš„æ•°æ®ç±»å‹æ ¹æ®ç¬¬ä¸€æ¬¡èµ‹ç»™è¯¥å˜é‡çš„å€¼çš„æ•°æ®ç±»å‹æ¥ç¡®å®šã€‚</li>
</ul>
<p>æ ¹æ®å˜é‡æ˜¯å¦å¼ºåˆ¶è¦æ±‚ç±»å‹å®šä¹‰ï¼Œå¯ä»¥å°†ç¨‹åºè®¾è®¡è¯­è¨€åˆ†ä¸º<strong>å¼ºç±»å‹è¯­è¨€</strong>å’Œ<strong>å¼±ç±»å‹è¯­è¨€</strong></p>
<ul>
<li><strong>å¼ºç±»å‹è¯­è¨€ï¼š</strong> è¦æ±‚ç”¨æˆ·åœ¨å®šä¹‰å˜é‡çš„æ—¶å€™å¿…é¡»æ˜ç¡®æŒ‡å®šå…¶æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚<code>JAVA</code>å’Œ<code>C++</code>ã€‚åœ¨å¼ºç±»å‹è¯­è¨€ä¸­ï¼Œæ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢éå¸¸é‡è¦ã€‚</li>
<li><strong>å¼±ç±»å‹è¯­è¨€ï¼š</strong> ä¸è¦æ±‚ç”¨æˆ·æ˜ç¡®æŒ‡å®šå˜é‡çš„æ•°æ®ç±»å‹ï¼Œä¾‹å¦‚<code>VBScript</code>ã€‚ç”¨æˆ·å¯ä»¥å°†ä»»æ„ç±»å‹çš„æ•°å€¼èµ‹ç»™è¯¥å˜é‡ã€‚å¹¶ä¸”ï¼Œå˜é‡çš„æ•°æ®ç±»å‹ä¹‹é—´çš„è½¬æ¢ä¹Ÿæ— éœ€æ˜ç¡®è¿›è¡Œã€‚</li>
</ul>
<blockquote>
<p><code>Shell</code>æ˜¯ä¸€ç§åŠ¨æ€ç±»å‹è¯­è¨€å’Œå¼±ç±»å‹è¯­è¨€</p>
</blockquote>
<h2 id="å˜é‡çš„å®šä¹‰"><a href="#å˜é‡çš„å®šä¹‰" class="headerlink" title="å˜é‡çš„å®šä¹‰"></a>å˜é‡çš„å®šä¹‰</h2><p>åœ¨<code>Shell</code>ä¸­ã€‚é€šå¸¸æƒ…å†µä¸‹ç”¨æˆ·å¯ä»¥ç›´æ¥ä½¿ç”¨å˜é‡ï¼Œæ— éœ€å…ˆè¿›è¡Œå®šä¹‰ï¼Œå½“ç”¨æˆ·ç¬¬ä¸€æ¬¡ä½¿ç”¨æŸä¸ªå˜é‡åæ—¶ï¼Œå®é™…ä¸Šå°±åŒæ—¶å®šä¹‰äº†è¿™ä¸ªå˜é‡ï¼Œåœ¨å˜é‡çš„ä½œç”¨åŸŸå†…ï¼Œç”¨æˆ·éƒ½å¯ä»¥ä½¿ç”¨è¯¥å˜é‡ã€‚å¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰å˜é‡a</span><br><span class="line">a=1</span><br><span class="line">#å®šä¹‰å˜é‡b</span><br><span class="line">b=&quot;hello&quot;</span><br><span class="line">#å®šä¹‰å˜é‡c</span><br><span class="line">c=&quot;hello world&quot;</span><br></pre></td></tr></table></figure>
<p>è¿˜å¯ä»¥é€šè¿‡<code>declare</code>å…³é”®å­—æ¥å®šä¹‰å˜é‡ï¼Œå®ƒå¯ä»¥å¯¹å˜é‡çš„è¯»å†™å±æ€§å’Œå˜é‡ç±»å‹è¿›è¡Œè®¾ç½®ï¼Œæ”¹å‘½ä»¤çš„åŸºæœ¬è¯­æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">declare attribute variable</span><br></pre></td></tr></table></figure>
<p>å…¶ä¸­ï¼Œ<code>attribute</code>è¡¨ç¤ºå˜é‡çš„å±æ€§ï¼Œå¸¸ç”¨çš„å±æ€§å¦‚ä¸‹æ‰€è¯‰ï¼š</p>
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>-p</td>
<td>æ˜¾ç¤ºæ‰€æœ‰å˜é‡çš„å€¼</td>
</tr>
<tr>
<td>-i</td>
<td>å°†å˜é‡å®šä¹‰ä¸ºæ•´æ•°ã€‚åœ¨ä¹‹åå°±å¯ä»¥ç›´æ¥å¯¹è¡¨è¾¾å¼æ±‚å€¼ï¼Œç»“æœåªèƒ½æ˜¯æ•´æ•°ã€‚å¦‚æœæ±‚å€¼å¤±è´¥æˆ–è€…ä¸æ˜¯æ•´æ•°ï¼Œå°±è®¾ç½®ä¸º0</td>
</tr>
<tr>
<td>-r</td>
<td>å°†å˜é‡å£°æ˜ä¸ºåªè¯»å˜é‡ã€‚åªè¯»å˜é‡ä¸å…è®¸ä¿®æ”¹ï¼Œä¹Ÿä¸å…è®¸åˆ é™¤</td>
</tr>
<tr>
<td>-a</td>
<td>å˜é‡å£°æ˜ä¸ºæ•°ç»„å˜é‡ã€‚ä½†è¿™æ²¡å¿…è¦ã€‚æ‰€æœ‰å˜é‡éƒ½ä¸å¿…æ˜¾å¼å®šä¹‰å°±å¯ä»¥ç”¨åšæ•°ç»„ï¼Œäº‹å®ä¸Šï¼Œåœ¨æŸç§æ„ä¹‰ä¸Šï¼Œæ‰€æœ‰å˜é‡éƒ½æ˜¯æ•°ç»„ï¼Œè€Œä¸”èµ‹å€¼ç»™æ²¡æœ‰ä¸‹æ ‡çš„å˜é‡ä¸èµ‹å€¼ç»™ä¸‹æ ‡ä¸º0çš„æ•°ç»„å…ƒç´ ç›¸åŒã€‚</td>
</tr>
<tr>
<td>-f</td>
<td>æ˜¾ç¤ºæ‰€æœ‰è‡ªå®šä¹‰å‡½æ•°ï¼ŒåŒ…æ‹¬åç§°å’Œå‡½æ•°ä½“</td>
</tr>
<tr>
<td>-x</td>
<td>å°†å˜é‡è®¾ç½®æˆç¯å¢ƒå˜é‡ï¼Œè¿™æ ·åœ¨éšåçš„è„šæœ¬å’Œç¨‹åºä¸­å¯ä»¥ä½¿ç”¨</td>
</tr>
</tbody>
</table>
<h2 id="å˜é‡ä¸å¼•å·"><a href="#å˜é‡ä¸å¼•å·" class="headerlink" title="å˜é‡ä¸å¼•å·"></a>å˜é‡ä¸å¼•å·</h2><p>åœ¨<code>Shell</code>è¯­è¨€ä¸­ä¸€å…±æœ‰3ç§å¼•å·ï¼Œåˆ†åˆ«ä¸º<strong>å•å¼•å·ï¼ˆâ€™ â€˜ï¼‰ã€åŒå¼•å·ï¼ˆâ€ â€œï¼‰å’Œåå¼•å·ï¼ˆ``ï¼‰</strong>ï¼Œå®ƒä»¬çš„ä½œç”¨æ˜¯ä¸åŒã€‚</p>
<ul>
<li><strong>å•å¼•å·ï¼š</strong> æ‹¬èµ·æ¥çš„å­—ç¬¦éƒ½åšä¸ºæ™®é€šå­—ç¬¦å‡ºç°</li>
<li><strong>åŒå¼•å·ï¼š</strong> é™¤â€$â€ã€â€\â€ã€â€ <code>&quot;å’Œ&quot; &quot; &quot;è¿™å‡ ä¸ªå­—ç¬¦ä»æ˜¯ç‰¹æ®Šç¬¦å¹¶ä¿ç•™å…¶ç‰¹æ®ŠåŠŸèƒ½å¤–ï¼Œå…¶ä½™å­—ç¬¦ä»ç„¶åšä¸ºæ™®é€šå­—ç¬¦å¯¹å¾…</code> </li>
<li><strong>åå¼•å·ï¼š</strong> æ‹¬èµ·æ¥çš„å­—ç¬¦ä¸²è¢«<code>Shell</code>è§£é‡Šä¸ºå‘½ä»¤ï¼Œåœ¨æ‰§è¡Œæ—¶ï¼Œ<code>Shell</code> é¦–å…ˆæ‰§è¡Œæ”¹å‘½ä»¤ï¼Œå¹¶ä»¥å®ƒçš„æ ‡å‡†è¾“å‡ºç»“æœå–ä»£æ•´ä¸ªåå¼•å·ï¼ˆåŒ…æ‹¬ä¸¤ä¸ªåå¼•å·ï¼‰éƒ¨åˆ†</li>
</ul>
<p><strong>åå¼•å·</strong>çš„ç”¨æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">#è¾“å‡ºå½“å‰ç›®å½•</span><br><span class="line">echo &quot;current directory is `pwd`&quot;</span><br></pre></td></tr></table></figure>
<h2 id="å˜é‡çš„ä½œç”¨åŸŸ"><a href="#å˜é‡çš„ä½œç”¨åŸŸ" class="headerlink" title="å˜é‡çš„ä½œç”¨åŸŸ"></a>å˜é‡çš„ä½œç”¨åŸŸ</h2><p><code>Shell</code>è·Ÿå…¶ä»–è¯­è¨€ä¸€æ ·ï¼Œä½œç”¨åŸŸåˆ†ä¸º<strong>å…¨å±€å˜é‡</strong>å’Œå±€éƒ¨å˜é‡ã€‚</p>
<h3 id="å…¨å±€å˜é‡"><a href="#å…¨å±€å˜é‡" class="headerlink" title="å…¨å±€å˜é‡"></a>å…¨å±€å˜é‡</h3><p>é€šå¸¸è®¤ä¸ºï¼Œå…¨å±€å˜é‡æ˜¯ä½¿ç”¨èŒƒå›´è¾ƒå¤§çš„å˜é‡ï¼Œä¸å±€é™æŸä¸ªå±€éƒ¨ä½¿ç”¨ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰å‡½æ•°</span><br><span class="line">func()</span><br><span class="line">&#123;</span><br><span class="line">  #è¾“å‡ºå˜é‡çš„å€¼</span><br><span class="line">  echo &quot;$v1&quot;</span><br><span class="line">  #ä¿®æ”¹å˜é‡çš„å€¼</span><br><span class="line">  v1=200</span><br><span class="line">&#125;</span><br><span class="line">#åœ¨è„šæœ¬ä¸­å®šä¹‰å˜é‡</span><br><span class="line">v1=100</span><br><span class="line">#è°ƒç”¨å‡½æ•°</span><br><span class="line">func</span><br><span class="line">#è¾“å‡ºå˜é‡çš„å€¼</span><br><span class="line">echo &quot;$v1&quot;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">100</span><br><span class="line">200</span><br></pre></td></tr></table></figure>
<p>åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å˜é‡ï¼Œä»£ç å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰å‡½æ•°</span><br><span class="line">func() </span><br><span class="line">&#123;</span><br><span class="line">  #åœ¨å‡½æ•°å†…éƒ¨å®šä¹‰å˜é‡</span><br><span class="line">  v2=200</span><br><span class="line">&#125;</span><br><span class="line">#è°ƒç”¨å‡½æ•°</span><br><span class="line">func</span><br><span class="line">#è¾“å‡ºå˜é‡çš„å€¼</span><br><span class="line">echo &quot;$v2&quot;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">200</span><br></pre></td></tr></table></figure>
<h3 id="å±€éƒ¨å˜é‡"><a href="#å±€éƒ¨å˜é‡" class="headerlink" title="å±€éƒ¨å˜é‡"></a>å±€éƒ¨å˜é‡</h3><p>ä¸å…¨å±€å˜é‡æƒ³æ¯”ï¼Œå±€éƒ¨å˜é‡çš„ä½¿ç”¨èŒƒå›´è¾ƒå°ï¼Œé€šå¸¸ä»…é™å®šæŸä¸ªç¨‹åºæ®µè®¿é—®ï¼Œä¾‹å¦‚å‡½æ•°å†…éƒ¨ã€‚éœ€è¦ä½¿ç”¨<code>local</code>å…³é”®å­—è¿›è¡Œå®šä¹‰ï¼Œå¦å¤–ï¼Œå‡½æ•°çš„å‚æ•°ä¹Ÿæ˜¯å±€éƒ¨å˜é‡ã€‚å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰å‡½æ•°</span><br><span class="line">func()</span><br><span class="line">&#123;</span><br><span class="line">  #ä½¿ç”¨localå…³é”®å­—å®šä¹‰å±€éƒ¨å˜é‡</span><br><span class="line">  local v2=200</span><br><span class="line">&#125;</span><br><span class="line">#è°ƒç”¨å‡½æ•°</span><br><span class="line">func</span><br><span class="line">#è¾“å‡ºå˜é‡</span><br><span class="line">echo &quot;$v2&quot;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">#å¹¶æ²¡æœ‰è¾“å‡ºä»»ä½•ç»“æœï¼Œå› ä¸ºv2æ˜¯å±€éƒ¨å˜é‡</span><br></pre></td></tr></table></figure>
<p>ä»ä»¥ä¸‹ä»£ç æ¥æ¯”ä¾‹ä¸¤ç§å±€éƒ¨å˜é‡å’Œå…¨å±€å˜é‡</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">#å®šä¹‰å‡½æ•°</span><br><span class="line">func()</span><br><span class="line">&#123;</span><br><span class="line">  #è¾“å‡ºå…¨å±€å˜é‡v1</span><br><span class="line">  echo &quot;global variable v1 is $v1&quot;</span><br><span class="line">  #å®šä¹‰å±€éƒ¨å˜é‡v1</span><br><span class="line">  local v1=2</span><br><span class="line">  #è¾“å‡ºå±€éƒ¨å˜é‡v1</span><br><span class="line">  echo &quot;local variable v1 is $v1&quot;</span><br><span class="line">&#125;</span><br><span class="line">#å®šä¹‰å…¨å±€å˜é‡v1</span><br><span class="line">v1=1</span><br><span class="line">#è°ƒç”¨å‡½æ•°</span><br><span class="line">func</span><br><span class="line">#è¾“å‡ºå…¨å±€å˜é‡v1</span><br><span class="line">echo &quot;global variable v1 is $v1&quot;</span><br></pre></td></tr></table></figure>
<p>è¯¥æ‰§è¡Œçš„ç»“æœå¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">global variable v1 is 1</span><br><span class="line">local variable v1 is 2</span><br><span class="line">global variable v1 is 1</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æ³¨æ„Shellå˜é‡ä¸­çš„ç¬¦å·â€$â€è¡¨ç¤ºå–å˜é‡çš„å€¼ã€‚åªæœ‰åœ¨å–å€¼çš„æ—¶å€™æ‰ä½¿ç”¨ï¼Œå®šä¹‰å’Œèµ‹å€¼æ˜¯æ— éœ€ä½¿ç”¨ç¬¦å·â€$â€ï¼Œå¦å¤–ï¼Œå®é™…ä¸ŠShellä¸­å˜é‡çš„åŸå‹ä¸º${var}ï¼Œ$varä¸ºç®€å†™ï¼Œåœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç®€å†™ä¼šå¯¼è‡´ç¨‹åºæ‰§è¡Œé”™è¯¯ã€‚</p>
</blockquote>
<h2 id="ç³»ç»Ÿå˜é‡"><a href="#ç³»ç»Ÿå˜é‡" class="headerlink" title="ç³»ç»Ÿå˜é‡"></a>ç³»ç»Ÿå˜é‡</h2><p>Shellè¯­è¨€çš„ç³»ç»Ÿå˜é‡ä¸»è¦åœ¨å¯¹å‚æ•°åˆ¤æ–­å’Œå‘½ä»¤è¿”å›å€¼åˆ¤æ–­æ—¶ä½¿ç”¨ï¼ŒåŒ…æ‹¬è„šæœ¬å’Œå‡½æ•°å‚æ•°ï¼Œå·²ç»è„šæœ¬å’Œå‡½æ•°çš„è¿”å›å€¼ã€‚Shellè¯­è¨€ä¸­çš„ç³»ç»Ÿå˜é‡å¹¶ä¸å¤šï¼Œä½†æ˜¯ååˆ†æœ‰ç”¨ï¼Œç‰¹åˆ«æ˜¯åœ¨åšä¸€äº›å‚æ•°æ£€æµ‹çš„æ—¶å€™ã€‚ä¸€äº›å¸¸ç”¨çš„ç³»ç»Ÿå˜é‡ï¼š</p>
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>$n</td>
<td>næ˜¯ç¬¬ä¸€ä¸ªæ•´æ•°ï¼Œä»1å¼€å§‹ï¼Œè¡¨ç¤ºå‚æ•°çš„ä½ç½®ï¼Œä¾‹å¦‚$1è¡¨ç¤ºç¬¬1ä¸ªå‚æ•°ï¼Œ$2è¡¨ç¤ºç¬¬2ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>$#</td>
<td>å‘½ä»¤è¡Œå‚æ•°çš„ä¸ªæ•°</td>
</tr>
<tr>
<td>$0</td>
<td>å½“å‰Shellè„šæœ¬çš„åç§°</td>
</tr>
<tr>
<td>$?</td>
<td>å‰ä¸€ä¸ªå‘½ä»¤æˆ–è€…å‡½æ•°çš„è¿”å›çŠ¶æ€ç </td>
</tr>
<tr>
<td>$*</td>
<td>ä»¥â€å‚æ•°1â€â€å‚æ•°2â€â€¦â€¦çš„å½¢å¼å°†æ‰€æœ‰å‚æ•°é€šè¿‡ä¸€ä¸ªå­—ç¬¦ä¸²è¿”å›</td>
</tr>
<tr>
<td>$@</td>
<td>ä»¥â€å‚æ•°1â€â€å‚æ•°2â€â€¦â€¦çš„å½¢å¼è¿”å›æ¯ä¸ªå‚æ•°</td>
</tr>
<tr>
<td>$$</td>
<td>è¿”å›æœ¬ç¨‹åºçš„è¿›ç¨‹IDï¼ˆPIDï¼‰</td>
</tr>
</tbody>
</table>
<p>ä¸‹é¢æ˜¯å¸¸ç”¨çš„ç³»ç»Ÿå˜é‡çš„ä½¿ç”¨æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#è¾“å‡ºè„šæœ¬çš„å‚æ•°ä¸ªæ•°</span><br><span class="line">echo &quot;the number of parameters is $#&quot;</span><br><span class="line">#è¾“å‡ºä¸Šä¸€ä¸ªå‘½ä»¤çš„é€€å‡ºçŠ¶æ€ç </span><br><span class="line">echo &quot;the return code of last command is $?&quot;</span><br><span class="line">#è¾“å‡ºå½“å‰è„šæœ¬çš„åç§°</span><br><span class="line">echo &quot;the script name is $0&quot;</span><br><span class="line">#è¾“å‡ºæ‰€æœ‰çš„å‚æ•°</span><br><span class="line">echo &quot;the parameters are $*&quot;</span><br><span class="line">#è¾“å‡ºå…¶ä¸­çš„å‡ ä¸ªå‚æ•°</span><br><span class="line">echo &quot;\$1=$1;\$2=$2;\$11=$&#123;11&#125;&quot;</span><br></pre></td></tr></table></figure>
<h2 id="ç¯å¢ƒå˜é‡"><a href="#ç¯å¢ƒå˜é‡" class="headerlink" title="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡</h2><p>Shellçš„ç¯å¢ƒå˜é‡æ˜¯æ‰€æœ‰Shellç¨‹åºéƒ½å¯ä»¥ä½¿ç”¨çš„å˜é‡ã€‚Shellç¨‹åºåœ¨è¿è¡Œæ—¶ï¼Œéƒ½ä¼šæ¥æ”¶ä¸€ç»„å˜é‡ï¼Œè¿™ç»„å˜é‡å°±æ˜¯ç¯å¢ƒå˜é‡ã€‚ç¯å¢ƒå˜é‡ä¼šå½±å“åˆ°æ‰€æœ‰è„šæœ¬çš„æ‰§è¡Œç»“æœã€‚å¦‚ä¸‹æ˜¯ä¸€äº›å¸¸ç”¨çš„ç¯å¢ƒå˜é‡ï¼š</p>
<table>
<thead>
<tr>
<th>å˜é‡</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td>PATH</td>
<td>å‘½ä»¤æœç´¢è·¯å¾„ï¼Œä»¥å†’å·ä¸ºåˆ†éš”ç¬¦ã€‚æ³¨æ„Windowsä¸‹ä¸åŒçš„æ˜¯ï¼Œå½“å‰ç›®å½•ä¸åœ¨ç³»ç»Ÿè·¯å¾„é‡Œ</td>
</tr>
<tr>
<td>HOME</td>
<td>ç”¨æˆ·ä¸»ç›®å½•çš„è·¯å¾„åï¼Œæ˜¯cdå‘½ä»¤çš„é»˜è®¤å‚æ•°</td>
</tr>
<tr>
<td>COLUMNS</td>
<td>å®šä¹‰äº†å‘½ä»¤ç¼–è¾‘æ¨¡å¼ä¸‹å¯ä½¿ç”¨å‘½ä»¤è¡Œçš„é•¿åº¦</td>
</tr>
<tr>
<td>HISTFILE</td>
<td>å‘½ä»¤å†å²æ–‡ä»¶</td>
</tr>
<tr>
<td>HISFILESIZE</td>
<td>å‘½ä»¤å†å²æ–‡ä»¶ä¸­æœ€å¤šå¯åŒ…å«çš„å‘½ä»¤æ¡æ•°</td>
</tr>
<tr>
<td>IFS</td>
<td>å®šä¹‰Shellä½¿ç”¨çš„åˆ†éš”ç¬¦</td>
</tr>
<tr>
<td>LOGNAME</td>
<td>å½“å‰çš„ç™»å½•å</td>
</tr>
<tr>
<td>SHELL</td>
<td>Shellçš„å…¨è·¯å¾„å</td>
</tr>
<tr>
<td>TERM</td>
<td>ç»ˆç«¯ç±»å‹</td>
</tr>
<tr>
<td>TMOUT</td>
<td>Shellè‡ªåŠ¨é€€å‡ºçš„æ—¶åˆ»ï¼Œå•ä½ä¸ºç§’ï¼Œè‹¥è®¾ç½®ä¸º0åˆ™ç¦æ­¢Shellè‡ªåŠ¨é€€å‡º</td>
</tr>
<tr>
<td>PWD</td>
<td>å½“å‰å·¥ä½œç›®å½•</td>
</tr>
</tbody>
</table>
<p>å¯ä»¥ä½¿ç”¨<code>set</code>å‘½ä»¤åˆ—å‡ºç³»ç»Ÿæ‰€æœ‰çš„ç¯å¢ƒå˜é‡ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">set | more</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&apos;!&apos;=0</span><br><span class="line">&apos;#&apos;=0</span><br><span class="line">&apos;$&apos;=6491</span><br><span class="line">&apos;*&apos;=(  )</span><br><span class="line">-=569JNRXghikls</span><br><span class="line">0=-zsh</span><br><span class="line">&apos;?&apos;=0</span><br><span class="line">@=(  )</span><br><span class="line">ARGC=0</span><br><span class="line">Apple_PubSub_Socket_Render=/private/tmp/com.apple.launchd.A6yPyflyoi/Render</span><br><span class="line">BG</span><br><span class="line">CDPATH=&apos;&apos;</span><br><span class="line">COLORFGBG=&apos;12;8&apos;</span><br><span class="line">COLUMNS=80</span><br><span class="line">CPUTYPE=x86_64</span><br><span class="line">CURRENT_BG=NONE</span><br><span class="line">EGID=20</span><br><span class="line">EUID=501</span><br><span class="line">FG</span><br><span class="line">FIGNORE=&apos;&apos;</span><br><span class="line">FPATH=/Users/wangchonglei/.oh-my-zsh/plugins/git:/Users/wangchonglei/.oh-my-zsh/functions:/Users/wangchonglei/.oh-my-zsh/completions:/usr/local/share/zsh/site-functions:/usr/share/zsh/site-functions:/usr/share/zsh/5.2/functions</span><br><span class="line">FX</span><br></pre></td></tr></table></figure>
<p>ä½¿ç”¨èŒƒä¾‹ä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">#è¾“å‡ºå‘½ä»¤æœç´¢è·¯å¾„</span><br><span class="line">echo &quot;commands path is $PATH&quot;</span><br><span class="line">#è¾“å‡ºå½“å‰çš„ç™»å½•å</span><br><span class="line">echo &quot;current login name is $LOGName&quot;</span><br><span class="line">#è¾“å‡ºå½“å‰ç”¨æˆ·çš„ä¸»ç›®å½•</span><br><span class="line">echo &quot;current user&apos;s home is $HOME&quot;</span><br><span class="line">#è¾“å‡ºå½“å‰çš„Shell</span><br><span class="line">echo &quot;current shell is $SHELL&quot;</span><br><span class="line">#è¾“å‡ºå½“å‰çš„å·¥ä½œç›®å½•</span><br><span class="line">echo &quot;current path is $PWD&quot;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>æœ€è¿‘åœ¨å­¦ä¹ <code>Shell</code>ï¼ŒæŠŠå­¦ä¹ ä¸­çš„ä¸€äº›çŸ¥è¯†ç‚¹è®°å½•ä¸‹æ¥ï¼Œä¾›ä»¥åè‡ªå·±å¤ä¹ ä½¿ç”¨ã€‚è°¢è°¢å¤§å®¶çš„é˜…è¯»ï¼Œæœ‰ä»€ä¹ˆé—®é¢˜æ¬¢è¿æŒ‡å‡º~~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 09æœˆ 20æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - ä½¿ç”¨Carthageç®¡ç†iOSç¬¬ä¸‰æ–¹åº“]]></title>
      <url>http://imwcl.com/2016/09/20/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E4%BD%BF%E7%94%A8Carthage%E7%AE%A1%E7%90%86iOS%E7%AC%AC%E4%B8%89%E6%96%B9%E5%BA%93/</url>
      <content type="html"><![CDATA[<p><img src="http://img.blog.csdn.net/20160920225432049" alt=""></p>
<blockquote>
<p>æœ€è¿‘åœ¨ç ”ç©¶<strong>Swift</strong>ï¼Œä¸€ä¸å°å¿ƒå‘ç°ä¸€ä¸ªå¥½çš„çš„ç®¡ç†iOSç¬¬ä¸‰æ–¹åº“<strong>Carthage</strong>ï¼Œå°±è·Ÿç¬¬ä¸€æ¬¡ä½¿ç”¨<strong>CocoaPods</strong>æ—¶ä¸€æ ·å…´å¥‹ä¸å·²ï¼Œåœ¨ç ”ç©¶äº†å¤§åŠå¤©åç»ˆäºèƒ½ç”¨äº†ï¼Œä½¿ç”¨èµ·æ¥è¿˜æ˜¯å¾ˆæ–¹ä¾¿çš„ï¼Œæ¯”èµ·<strong>CocoaPods</strong>æœ‰ä¸è¶³ä¹Ÿæœ‰ä¼˜ç‚¹ï¼Œä¸¤ä¸ªé…åˆèµ·æ¥ç”¨ä¹Ÿæ˜¯å¾ˆçˆ½çš„^ - ^</p>
</blockquote>
<a id="more"></a>
<h1 id="åˆè¯†Carthage"><a href="#åˆè¯†Carthage" class="headerlink" title="åˆè¯†Carthage"></a>åˆè¯†<a href="https://github.com/Carthage/Carthage" target="_blank" rel="external">Carthage</a></h1><p>æœ€è¿‘åœ¨ç”¨<strong>Swift3.0</strong>åšé¡¹ç›®ï¼Œæƒ³å¯¼å…¥ä¸€äº›æ”¯æŒ<strong>Swift3.0</strong>çš„ç¬¬ä¸‰æ–¹åº“æ¥ä½¿ç”¨ï¼Œå°±æƒ³åˆ°<strong><a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="external">Alamofire</a></strong>ï¼Œçœ‹<strong>README</strong>æ—¶å‘ç°äº†ä¸€ä¸ªæ–°çš„åè¯<strong>Carthage</strong>ï¼ŒWhatï¼Ÿï¼Œè¿™æ˜¯ä¸ªä»€ä¹ˆä¸œè¥¿ï¼Œå±…ç„¶ä¹Ÿå¯ä»¥ç”¨å®ƒæ¥ç®¡ç†ç¬¬ä¸‰æ–¹åº“ï¼Œä¹‹å‰éƒ½æ²¡è§åˆ°è¿‡ï¼Œèµ¶ç´§ç™¾åº¦äº†ä¸€ä¸‹è¡¥å……äº†ä¸‹çŸ¥è¯†ï¼š</p>
<p><strong>Carthage</strong>ï¼šè¿¦å¤ªåŸºï¼ˆåœ°ä¸­æµ·åœ°åŒºå¤åŸï¼‰ï¼Œå¥½å§è¿™æ˜¯ç™¾åº¦ç™¾ç§‘çš„è§£é‡Šï¼Œè‡³äºä¸ºä»€ä¹ˆç”¨è¿™ä¸ªå•è¯ï¼Œæˆ‘ä¹Ÿä¸å¤ªæ¸…æ¥šï¼Œå¯èƒ½æ¯”è¾ƒå±Œå§ï¼Œçœ‹ä¸‹å›¾ä½ å°±çŸ¥é“å®ƒæ˜¯ç”¨æ¥å¹²ä»€ä¹ˆçš„äº†ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160920212737795" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>Carthageçš„ç›®æ ‡æ˜¯ç”¨æœ€ç®€å•çš„æ–¹å¼æ¥ç®¡ç†Cocoaç¬¬ä¸‰æ–¹æ¡†æ¶</p>
</blockquote>
<p>æ˜¯çš„ï¼Œä½ æ²¡çœ‹é”™ï¼Œå®ƒå¯ä»¥ç”¨æ¥ç®¡ç†ç¬¬ä¸‰æ–¹åº“<strong><a href="https://github.com/Alamofire/Alamofire" target="_blank" rel="external">Alamofire</a></strong>ï¼Œç„¶åæŸ¥äº†ä¸€ä¸‹ï¼Œè¿˜æœ‰å¾ˆå¤šç¬¬ä¸‰æ–¹åº“éƒ½å¯ä»¥ç”¨å®ƒæ¥ç®¡ç†ï¼Œè·Ÿ<strong>CocoaPods</strong>ä¸€æ ·å¯ä»¥ç”¨æ¥ç®¡ç†ç¬¬ä¸‰æ–¹åº“ï¼Œçœ‹äº†ä¸€ä¸‹å®ƒçš„å´›èµ·æ—¶é—´å¤§æ¦‚æ˜¯iOS8ä¹‹å<strong>Swift</strong>å‡ºæ¥çš„æ—¶å€™ï¼Œä¸ç°åœ¨æµè¡Œçš„ <strong>CocoaPods</strong> ä¸åŒï¼Œå®ƒæ˜¯ä¸€ä¸ªå»ä¸­å¿ƒåŒ–çš„è§£å†³æ–¹æ¡ˆã€‚<strong>CocoaPods</strong>çš„æ–¹æ³•æ›´æ˜“äºä½¿ç”¨ï¼Œä½†<strong>Carthage</strong>æ›´çµæ´»å¹¶ä¸”æ˜¯éä¾µå…¥æ€§çš„ã€‚</p>
<p> å¤§å®¶éƒ½çŸ¥é“<strong>Swift</strong>æ˜¯æ”¯æŒåŠ¨æ€åº“çš„ï¼Œæ‰€ä»¥<strong>Carthage</strong>åº”åŠ¿è€Œç”Ÿï¼Œå®ƒæ²¡æœ‰æ€»é¡¹ç›®çš„åˆ—è¡¨ï¼Œè¿™èƒ½å¤Ÿå‡å°‘ç»´æŠ¤å·¥ä½œå¹¶ä¸”é¿å…ä»»ä½•ä¸­å¿ƒåŒ–å¸¦æ¥çš„é—®é¢˜ï¼‰ã€‚ä¸è¿‡ï¼Œè¿™æ ·ä¹Ÿæœ‰ä¸€äº›ç¼ºç‚¹ï¼Œå°±æ˜¯æƒ³ä¿®æ”¹ç¬¬ä¸‰æ–¹åº“æºç çš„è¯å¾ˆè´¹åŠ²ï¼Œè¿˜éœ€è¦é‡æ–°ç¼–è¯‘æ‰“åŒ…ã€‚</p>
<h2 id="å®‰è£…å’Œä½¿ç”¨Carthage"><a href="#å®‰è£…å’Œä½¿ç”¨Carthage" class="headerlink" title="å®‰è£…å’Œä½¿ç”¨Carthage"></a>å®‰è£…å’Œä½¿ç”¨Carthage</h2><p>é¦–å…ˆåˆ°<strong>github</strong>ä¸ŠDownloadæˆ–è€…Clone Git æˆ–è€…ä½¿ç”¨<strong>HomeBrew</strong>ï¼ˆæ²¡æœ‰å®‰è£…çš„å¯ä»¥è‡ªè¡Œç™¾åº¦å»è£…ä¸€ä¸ªï¼‰å®‰è£…~</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">brew update #å…ˆæ›´æ–°</span><br><span class="line">brew install carthage #å®‰è£…Carthage</span><br></pre></td></tr></table></figure>
<p>å½“ä½ å®‰è£…å¥½Carthageåï¼Œåœ¨ç»ˆç«¯æ‰§è¡Œæ¥åˆ¤æ–­æ˜¯å¦å®‰è£…æˆåŠŸï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">carthage version</span><br></pre></td></tr></table></figure>
<p>å³å¯çœ‹åˆ°å½“å‰çš„<strong>Carthage</strong>ç‰ˆæœ¬, å½“æˆ‘å†™è¿™ç¯‡æ–‡ç« çš„æ—¶å€™ï¼Œ<strong>Carthage</strong>çš„ç‰ˆæœ¬ä¸º0.18ï¼ˆè¿˜æ˜¯å¾ˆå¹´è½»çš„å˜›ï¼‰ ã€‚</p>
<p>ç°åœ¨ï¼Œä½ å·²ç»å®‰è£…å¥½äº†<strong>Carthage</strong>ï¼Œæ¥ä¸‹æ¥å°±æ˜¯åœ¨ä½ çš„é¡¹ç›®ä¸­ä½¿ç”¨carthageäº†ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">vim Cartfile #åˆ›å»ºä¸€ä¸ªå«Cartfileçš„æ–‡ä»¶</span><br></pre></td></tr></table></figure>
<p>è¾“å…¥ä½ æƒ³è¦ç¼–è¯‘æˆFrameworkçš„<strong>Swift</strong>ç¬¬ä¸‰æ–¹åº“ï¼Œæ¯”å¦‚è¯´<strong>SnapKit</strong>å’Œ<strong>Alamofire</strong>ï¼Œå¦‚ä¸‹æ‰€ç¤ºï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">github &quot;Alamofire/Alamofire&quot; ~&gt; 4.0  #æ”¯æŒSwift3.0</span><br><span class="line">github &quot;SnapKit/SnapKit&quot; ~&gt; 3.0 #æ”¯æŒSwift3.0</span><br></pre></td></tr></table></figure>
<p>githubä»£è¡¨æºï¼Œè€Œåé¢çš„å°±æ˜¯ç”¨æˆ·åå’Œç‰ˆæœ¬åº“çš„åå­—ï¼Œè€Œâ€~&gt;â€ åé¢æ˜¯ç‰ˆæœ¬å·å“ˆï¼</p>
<p>ä¿å­˜é€€å‡ºï¼Œæ‰§è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">carthage update --platform iOS #å› ä¸ºæ˜¯æ‰“åŒ…iOSçš„æ‰€ä»¥åé¢åŠ iOSï¼Œæœ‰çš„åº“æ”¯æŒmacã€watchçš„è¯ä¼šæ‰“å‡ ä¸ªåŒ…</span><br></pre></td></tr></table></figure>
<p>ä¹‹åä¼šå‘ç°åœ¨è·Ÿç›®å½•ä¸‹å¤šå‡ºäº†<strong>Carthage</strong>æ–‡ä»¶å¤¹å’Œ<strong>Cartfile.resolved</strong>æ–‡ä»¶ã€‚è¿›å…¥<strong>Carthage/Checkouts</strong>ä¸‹å¯ä»¥çœ‹åˆ°åˆšåˆšå¾—åˆ°çš„<strong>Alamofire</strong>å’Œ<strong>SnapKit</strong>ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://img.blog.csdn.net/20160920220309400" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°">ç°åœ¨æ‰“å¼€ä½ çš„é¡¹ç›®ï¼Œç‚¹å‡»<strong>project</strong>ï¼Œé€‰æ‹©<strong>target</strong>, å†é€‰æ‹©ä¸Šæ–¹çš„<strong>General</strong>ï¼Œå°†éœ€è¦çš„<strong>framework</strong>æ–‡ä»¶æ‹–åˆ° <strong>Linked frameworks and Binaries</strong>å†…ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160920220544981" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>ç„¶åè¿™æ˜¯å¾ˆé‡è¦çš„ä¸€æ­¥ï¼Œç‚¹å‡»<strong>Build Phrase tab</strong>é€‰é¡¹ï¼Œæ·»åŠ ç›¸åº”çš„<strong>run script</strong>ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">/usr/local/bin/carthage copy-frameworks</span><br><span class="line">$(SRCROOT)/Carthage/Build/iOS/ä½ çš„framework</span><br></pre></td></tr></table></figure>
<p><img src="http://img.blog.csdn.net/20160920220906190" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>ç„¶åå°±å¯ä»¥å»é¡¹ç›®é‡Œé¢<code>import</code>ä½ å¾—ç¬¬ä¸‰æ–¹åº“äº†~~å¯ä»¥æ„‰å¿«çš„ä½¿ç”¨äº†ï¼Œä¸è¿‡æœ‰ä¸€ç‚¹è¦åæ§½ä¸€ä¸‹<code>`build</code>çš„é€Ÿåº¦çœŸæ˜¯æœ‰ç‚¹æ…¢- . -</p>
<h1 id="CocoaPodsçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿"><a href="#CocoaPodsçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿" class="headerlink" title="CocoaPodsçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿"></a>CocoaPodsçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿</h1><h2 id="ä¼˜åŠ¿"><a href="#ä¼˜åŠ¿" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ul>
<li>ä½¿ç”¨æ–¹ä¾¿ï¼Œé™¤ç¼–å†™ Podfile ä»¥å¤–å…¶ä»–å‡ ä¹éƒ½æ˜¯è‡ªåŠ¨å®Œæˆï¼›</li>
<li>è½¯ä»¶åŒ…æ•°é‡å¤šï¼Œä¸»æµæ”¯æŒï¼›</li>
<li>æ”¯æŒ iOS 8 Frameworkï¼Œå½“ç„¶ä¹Ÿæ”¯æŒæ—§çš„é™æ€ç¼–è¯‘ï¼›</li>
<li>å¼€å‘è€…ä½¿ç”¨æ¯”è¾ƒç®€å•ï¼Œä½†æ˜¯å¦‚æœåˆ›å»ºå…¼å®¹ CocoaPods  çš„åº“ï¼Œå°±ä¼šç›¸å¯¹ç¹çä¸€äº›ï¼ˆå°½ç®¡æœ‰äº†å‘½ä»¤è¡Œï¼‰~</li>
</ul>
<h2 id="åŠ£åŠ¿"><a href="#åŠ£åŠ¿" class="headerlink" title="åŠ£åŠ¿"></a>åŠ£åŠ¿</h2><ul>
<li>æ¯æ¬¡cleanåéƒ½å¾—é‡æ–°ç¼–è¯‘ï¼Œç¼–è¯‘æ¯”è¾ƒè€—æ—¶ï¼ŒArchiveä¹Ÿä¼šå˜æ…¢ï¼›</li>
<li>æ¯æ¬¡æ›´æ–°ç¯å¢ƒéƒ½éœ€è¦è¿æ¥åˆ°ä¸­å¿ƒä»“åº“ï¼Œæ¯”è¾ƒè€—æ—¶~</li>
</ul>
<h1 id="Carthageçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿"><a href="#Carthageçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿" class="headerlink" title="Carthageçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿"></a>Carthageçš„ä¼˜åŠ¿ä¸åŠ£åŠ¿</h1><h2 id="ä¼˜åŠ¿-1"><a href="#ä¼˜åŠ¿-1" class="headerlink" title="ä¼˜åŠ¿"></a>ä¼˜åŠ¿</h2><ul>
<li>buildä¸€æ¬¡åå°±èƒ½åœ¨é¡¹ç›®é‡Œé¢ä½¿ç”¨ï¼Œå¢åŠ ç¼–è¯‘é€Ÿåº¦ï¼›</li>
<li>å¯ä»¥ä¸<strong>CocoaPods</strong>æ— ç¼é›†æˆï¼›</li>
<li>å®ƒæ˜¯å»ä¸­å¿ƒåŒ–çš„ï¼Œæ²¡æœ‰ä¸­å¿ƒæœåŠ¡å™¨ï¼Œè¿™æ„å‘³ç€æ¯æ¬¡é…ç½®å’Œæ›´æ–°ç¯å¢ƒï¼Œåªä¼šå»æ›´æ–°å…·ä½“çš„åº“ï¼Œè€Œä¸ä¼šæœ‰ä¸€ä¸ªå‘ä¸­å¿ƒæœåŠ¡å™¨è·å–æœ€æ–°åº“çš„ç´¢å¼•è¿™ä¹ˆä¸ªè¿‡ç¨‹ï¼Œå¦‚æ­¤ä¸€æ¥ï¼Œåˆçœäº†å¾ˆå¤šæ—¶é—´ï¼›</li>
<li>ä¸ä¼šå½±å“ä½ çš„é¡¹ç›®é…ç½®çš„ï¼Œç›¸å¯¹<strong>CocoaPods</strong>è€Œè¨€æ›´åŠ ç‹¬ç«‹ï¼ŒCarthage ä½¿ç”¨çš„æ˜¯ä¸€ç§éä¾µå…¥æ€§çš„å“²å­¦ï¼›</li>
</ul>
<h2 id="åŠ£åŠ¿-1"><a href="#åŠ£åŠ¿-1" class="headerlink" title="åŠ£åŠ¿"></a>åŠ£åŠ¿</h2><ul>
<li>åº“ä¾ç„¶ä¸å¦‚ CocoaPods ä¸°å¯Œï¼šå°½ç®¡å¾ˆå¤šåº“ä¸éœ€è¦å£°æ˜å¹¶æ”¹é€ å°±ç›´æ¥å¯ä»¥è¢« Carthage ç”¨ï¼Œä½†ä¾ç„¶æœ‰å¤§é‡ CocoaPods èƒ½ç”¨çš„åº“ä¸æ”¯æŒï¼Œæˆ‘ç›¸ä¿¡æ—¶é—´èƒ½è§£å†³è¿™ä¸ªé—®é¢˜ï¼›</li>
<li>åªæ”¯æŒ Frameworkï¼Œæ‰€ä»¥æ˜¯ iOS 8 Only äº†ï¼Œéšç€æ—¶é—´æ¨ç§»ï¼Œè¿™ä¸ªä¹Ÿä¸ä¼šæ˜¯é—®é¢˜ï¼›</li>
<li>æ— æ³•åœ¨ Xcode é‡Œå®šä½åˆ°æºç ï¼šå¦‚æœä½ åœ¨å†™ä»£ç è¿‡ç¨‹ä¸­ï¼Œæƒ³è·³è½¬åˆ°ä¸€ä¸ªç¬¬ä¸‰æ–¹åº“å»çœ‹å…·ä½“çš„å®ç°ï¼Œè¿™æ˜¯æ— æ³•åŠåˆ°çš„ï¼ŒCarthage çš„é…ç½®åªèƒ½è®©ä½ çœ‹åˆ°ä¸€ä¸ªåº“çš„å¤´æ–‡ä»¶~</li>
</ul>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>æˆ‘è§‰å¾—ä¸ç®¡æ€æ ·ï¼Œå¥½ä¸å¥½ç”¨ï¼Œåšä¸ºiOSç¨‹åºå‘˜æˆ‘ä»¬éƒ½åº”è¯¥å»å°è¯•çš„äº†è§£ä¸€ä¸‹å®ƒï¼Œé€šè¿‡å®ƒå»å­¦åˆ°æ›´å¤šçš„ä¸œè¥¿ï¼Œè‡³äºä»€ä¹ˆç¬¬ä¸‰æ–¹åº“ç”¨<strong>CocoaPods</strong>ï¼Œä»€ä¹ˆå»ç”¨<strong>Carthage</strong>ï¼Œæˆ‘è§‰å¾—ä¸€äº›æ¯”è¾ƒç¨³å®šå¤§çš„åº“å¯ä»¥ç”¨<strong>Carthage</strong>ï¼Œè€Œä¸€äº›å˜åŠ¨æ¯”è¾ƒå¤§ï¼Œè‡ªå·±è¿˜æœ‰å¯èƒ½å»ä¿®æ”¹çš„åº“æˆ‘ä»¬è‚¯å®šé¦–é€‰<strong>CocoaPods</strong>ã€‚æœ€åå¸Œæœ›å¤§å®¶çœ‹åˆ°è¿™ç¯‡åšå®¢èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œå¤§å®¶æœ‰é—®é¢˜å¯ä»¥æå‡ºæ¥ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
<h1 id="å‚è€ƒé“¾æ¥"><a href="#å‚è€ƒé“¾æ¥" class="headerlink" title="å‚è€ƒé“¾æ¥"></a>å‚è€ƒé“¾æ¥</h1><p><a href="http://www.jianshu.com/p/5ccde5f22a17" target="_blank" rel="external">http://www.jianshu.com/p/5ccde5f22a17</a></p>
<p><a href="https://imtx.me/archives/1939.html" target="_blank" rel="external">https://imtx.me/archives/1939.html</a></p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 09æœˆ 20æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSåŸºäºXMPPå®ç°å³æ—¶é€šè®¯ä¹‹ä¸€ã€ç¯å¢ƒçš„æ­å»º]]></title>
      <url>http://imwcl.com/2016/09/16/iOS%E5%9F%BA%E4%BA%8EXMPP%E5%AE%9E%E7%8E%B0%E5%8D%B3%E6%97%B6%E9%80%9A%E8%AE%AF%E4%B9%8B%E4%B8%80%E3%80%81%E7%8E%AF%E5%A2%83%E7%9A%84%E6%90%AD%E5%BB%BA/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ä½¿ç”¨XMPPå·²ç»æœ‰ä¸€æ®µæ—¶é—´äº†ï¼Œä½†æ˜¯ä¸€ç›´éƒ½æ²¡æ·±å…¥ç ”ç©¶è¿‡ï¼Œåªæ˜¯ä½¿ç”¨SDKåšä¸€äº›ç®€å•çš„æ“ä½œï¼Œçœ‹äº†è®¸å¤šå¤§ç¥çš„åšå®¢ï¼Œè‡ªå·±æ€»ç»“ä¸€ä¸‹ï¼Œå‡†å¤‡å†™ä¸€ç³»åˆ—å…³äºXMPPçš„ä½¿ç”¨åšå®¢ï¼Œä»¥ä¾¿äºè‡ªå·±æ›´åŠ æ·±å…¥å­¦ä¹ ~</p>
</blockquote>
<h1 id="IMåè®®åŠæœåŠ¡å™¨é€‰å‹"><a href="#IMåè®®åŠæœåŠ¡å™¨é€‰å‹" class="headerlink" title="IMåè®®åŠæœåŠ¡å™¨é€‰å‹"></a>IMåè®®åŠæœåŠ¡å™¨é€‰å‹</h1><p><a href="http://liudanking.me/arch/xmpp%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%89%E5%9E%8B/" target="_blank" rel="external">http://liudanking.me/arch/xmpp%E6%9C%8D%E5%8A%A1%E5%99%A8%E9%80%89%E5%9E%8B/</a><br>åè®®é€‰å‹ï¼š<strong>XMPP</strong>å·²ç»æˆä¸ºæ ‡å‡†çš„IMåè®®ã€‚<strong>XMPP</strong>å®˜ç½‘ï¼š<a href="http://XMPP.org/" target="_blank" rel="external">http://XMPP.org/</a><br>æœåŠ¡å™¨å‹ï¼šä½¿ç”¨å¹¿æ³›çš„æ˜¯ejabberdï¼Œjabberd 2.xï¼Œ Openfireï¼ŒTigaseã€‚ä»ç¼–ç¨‹è¯­è¨€è§’åº¦æ¥çœ‹ä¸»è¦æ˜¯JAVAå’ŒErlangã€‚JAVAè¯­è¨€çš„ä¼˜åŠ¿æ˜¯ç±»åº“å®Œå¤‡ï¼Œå®¹æ˜“æ‹›äººã€‚Erlangçš„ä¼˜åŠ¿æ˜¯hot code swapï¼Œlive consoleï¼Œ é«˜å¹¶å‘ã€‚è€Œä¸”ejabberdæ˜¯å¯¹XMPPåè®®æ”¯æŒæœ€å¥½ã€å®ç°æœ€ä¸ºå…¨é¢çš„serverã€‚å› æ­¤ä¼ä¸šåœ¨ä¸è€ƒè™‘ç‹¬ç«‹å¼€å‘æœåŠ¡å™¨çš„æƒ…å†µä¸‹ï¼ŒåˆæœŸé€‰å‹åŸºæœ¬å»ºè®®é‡‡ç”¨ejabberdã€‚</p>
<p>æœ¬æ–‡æˆ‘ä»¬ä¸»è¦å®è·µiOSç«¯æµç¨‹ï¼Œä¸è€ƒè™‘å¤ªå¤šæœåŠ¡å™¨å®ç°ï¼Œå› ä¸ºOpenfireæ˜“å®‰è£…ï¼Œæ’ä»¶åŠŸèƒ½ä¸°å¯Œï¼Œæˆ‘ä»¬ä½¿ç”¨<strong>Openfire</strong></p>
<a id="more"></a>
<h1 id="MACä¸Šæ­å»ºMySQL"><a href="#MACä¸Šæ­å»ºMySQL" class="headerlink" title="MACä¸Šæ­å»ºMySQL"></a>MACä¸Šæ­å»ºMySQL</h1><p>å› ä¸ºæœåŠ¡å™¨éœ€è¦æ•°æ®åº“æ”¯æ’‘ï¼Œæ‰€ä»¥æˆ‘ä»¬åœ¨æ­å»ºOpenfireå‰è¦å…ˆæ­å»ºæ•°æ®åº“ã€‚</p>
<h2 id="ä¸‹è½½MySQLå®‰è£…åŒ…"><a href="#ä¸‹è½½MySQLå®‰è£…åŒ…" class="headerlink" title="ä¸‹è½½MySQLå®‰è£…åŒ…"></a>ä¸‹è½½MySQLå®‰è£…åŒ…</h2><p>æˆ‘ä»¬å…ˆå»<a href="http://dev.mysql.com/downloads/mysql/" target="_blank" rel="external"><strong>MySQLå®˜ç½‘</strong></a>å»ä¸‹è½½<strong>MySQL</strong>çš„å®‰è£…åŒ…ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://img.blog.csdn.net/20160916132616906" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><img src="http://img.blog.csdn.net/20160916132635422" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="å®‰è£…MySQL"><a href="#å®‰è£…MySQL" class="headerlink" title="å®‰è£…MySQL"></a>å®‰è£…MySQL</h2><p>ä¸‹è½½å®Œåï¼Œå¼€å§‹å®‰è£…<strong>MySQL</strong>å¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160916140022624" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><strong>æ³¨æ„äº‹é¡¹ï¼š</strong>å› ä¸ºå®‰è£…å®Œ<strong>MySQL</strong>åå®ƒä¼šè‡ªåŠ¨ç»™ä½ ç”Ÿæˆä¸€ä¸ªå¯†ç ï¼Œæ‰€ä»¥ä½ è¦ä¿å­˜å¥½è¿™ä¸ªå¯†ç ï¼Œåé¢ä¿®æ”¹å¯†ç çš„æ—¶å€™ä¼šç”¨åˆ°ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://img.blog.csdn.net/20160916140241828" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="é…ç½®MySQL"><a href="#é…ç½®MySQL" class="headerlink" title="é…ç½®MySQL"></a>é…ç½®MySQL</h2><h3 id="å¯åŠ¨MySQL"><a href="#å¯åŠ¨MySQL" class="headerlink" title="å¯åŠ¨MySQL"></a>å¯åŠ¨MySQL</h3><p>é¦–å…ˆåœ¨è®¾ç½®é‡Œé¢æ‰¾åˆ°MySQLçš„å¯åŠ¨æŒ‰é’®ï¼Œå¯åŠ¨MySQLæœåŠ¡ï¼Œå¦‚ä¸‹å›¾ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160916141553080" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><img src="http://img.blog.csdn.net/20160916141613117" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h3 id="å®šä¹‰MySQLåˆ«å"><a href="#å®šä¹‰MySQLåˆ«å" class="headerlink" title="å®šä¹‰MySQLåˆ«å"></a>å®šä¹‰MySQLåˆ«å</h3><p>ç„¶åéœ€è¦å°†<strong>MySQL</strong>çš„æŒ‡ä»¤é‡æ–°å®šä¹‰ä¸€ä¸‹ï¼Œå› ä¸º<strong>MySQL</strong>çš„æŒ‡ä»¤é›†åœ¨<code>/usr/local/mysql/bin/mysql</code>è·¯å¾„ä¸‹ï¼Œéœ€è¦æ‰§è¡Œä¸€ä¸‹å‘½ä»¤è¡Œï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># å®šä¹‰mysqlåˆ«å</span><br><span class="line">alias mysql=/usr/local/mysql/bin/mysql</span><br><span class="line"># mysqladmin</span><br><span class="line">alias mysqladmin=/usr/local/mysql/bin/mysqladmin</span><br></pre></td></tr></table></figure>
<h3 id="ä¿®æ”¹MySQLè´¦æˆ·å¯†ç "><a href="#ä¿®æ”¹MySQLè´¦æˆ·å¯†ç " class="headerlink" title="ä¿®æ”¹MySQLè´¦æˆ·å¯†ç "></a>ä¿®æ”¹MySQLè´¦æˆ·å¯†ç </h3><p>ä¹‹å‰å®‰è£…å®Œæˆåç³»ç»Ÿç»™æˆ‘ä»¬äº†ä¸€ä¸ªé»˜è®¤çš„å¯†ç ï¼Œå› ä¸ºé‚£ä¸ªå¯†ç å¾ˆç¹çä¸å®¹æ˜“è®°ä½ï¼Œæ‰€ä»¥æˆ‘ä»¬éœ€è¦é‡æ–°è®¾ç½®ä¸€ä¸ªå¯†ç ï¼Œæˆ‘ä»¬å…ˆè¾“å…¥å¦‚ä¸‹æŒ‡ä»¤è®¾ç½®æ–°å¯†ç ï¼Œâ€newpasswordâ€ä¸ºä½ è¦è®¾ç½®çš„æ–°å¯†ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysqladmin -u root -p password &quot;newpassword&quot;</span><br><span class="line">#ç„¶å Enter password: ã€è¾“å…¥åŸæ¥çš„å¯†ç ã€‘</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸‹å›¾æ‰€ç¤ºè¡¨ç¤ºå¯†ç ä¿®æ”¹æˆåŠŸï¼š</p>
<p><img src="http://img.blog.csdn.net/20160916143123858" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>å®Œæˆåä»¥årootè´¦æˆ·éœ€è¦å¯†ç å°±ç”¨ä½ æ–°è®¾ç½®çš„å¯†ç å°±è¡Œäº†~</p>
<h3 id="è¿æ¥æ•°æ®åº“ï¼Œåˆ›å»ºOpenfireæ•°æ®åº“"><a href="#è¿æ¥æ•°æ®åº“ï¼Œåˆ›å»ºOpenfireæ•°æ®åº“" class="headerlink" title="è¿æ¥æ•°æ®åº“ï¼Œåˆ›å»ºOpenfireæ•°æ®åº“"></a>è¿æ¥æ•°æ®åº“ï¼Œåˆ›å»ºOpenfireæ•°æ®åº“</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"># è¿æ¥æ•°æ®åº“</span><br><span class="line">mysql -u root -p</span><br><span class="line"># åˆ›å»ºOpenfireæ•°æ®åº“</span><br><span class="line">create database openfire;</span><br></pre></td></tr></table></figure>
<h2 id="å®Œå…¨å¸è½½MySQL"><a href="#å®Œå…¨å¸è½½MySQL" class="headerlink" title="å®Œå…¨å¸è½½MySQL"></a>å®Œå…¨å¸è½½MySQL</h2><p>åœ¨ç³»ç»Ÿå†…å­˜ä¸å¤Ÿæ—¶æœ‰æ—¶å€™æˆ‘ä»¬ä¼šéœ€è¦åˆ é™¤æ‰<strong>MySQL</strong>ï¼Œä¸€ä¸‹å°±æ˜¯åˆ é™¤<strong>MySQL</strong>çš„æ–¹æ³•ï¼š</p>
<p>ä» <strong>Yosemite</strong> ç³»ç»Ÿå¼€å§‹ï¼Œ<code>/etc/hostconfig</code> è¿™ä¸ªæ–‡ä»¶å·²ç»ç§»é™¤ï¼Œæ‰€ä»¥ <strong>Yosemite</strong> åçš„ç³»ç»Ÿå¯ä»¥å¿½ç•¥ä¸‹é¢çš„å‘½ä»¤</p>
<p><code>sudo nano /etc/hostconfig</code>  </p>
<p>ç„¶åä»¥ä¸‹æ˜¯ç»ˆç«¯æ‰§è¡Œä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /usr/local/mysql  </span><br><span class="line">sudo rm -rf /usr/local/mysql*  </span><br><span class="line">sudo rm -rf /Library/StartupItems/MySQLCOM  </span><br><span class="line">sudo rm -rf /Library/PreferencePanes/My*  </span><br><span class="line">sudo nano /etc/hostconfig     (å¤åˆ¶å‰é¢éƒ¨åˆ†å›è½¦ï¼Œç„¶ååˆ æ‰è¿™ä¸€è¡Œ: MYSQLCOM=-YES-ï¼Œcontrol+Oå›è½¦ä¿å­˜ï¼Œcontrol+Xé€€å‡ºç¼–è¾‘ç•Œé¢)  </span><br><span class="line">sudo rm -rf ~/Library/PreferencePanes/My*  </span><br><span class="line">sudo rm -rf /Library/Receipts/mysql*  </span><br><span class="line">sudo rm -rf /Library/Receipts/MySQL*  </span><br><span class="line">sudo rm -rf /var/db/receipts/com.mysql.*</span><br></pre></td></tr></table></figure>
<h1 id="MACä¸Šæ­å»ºOpenfire"><a href="#MACä¸Šæ­å»ºOpenfire" class="headerlink" title="MACä¸Šæ­å»ºOpenfire"></a>MACä¸Šæ­å»ºOpenfire</h1><h2 id="ä¸‹è½½å¹¶å®‰è£…openfire"><a href="#ä¸‹è½½å¹¶å®‰è£…openfire" class="headerlink" title="ä¸‹è½½å¹¶å®‰è£…openfire"></a>ä¸‹è½½å¹¶å®‰è£…openfire</h2><p>å»<a href="http://www.igniterealtime.org/downloads/index.jsp" target="_blank" rel="external"><strong>openfire</strong>å®˜ç½‘</a>ä¸Šå»ä¸‹è½½ç›¸åº”çš„åŒ…ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160916160948387" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>åŒå‡»è¿›è¡Œå‚»ç“œå¼çš„å®‰è£…å°±å¥½äº†ï¼Œå®‰è£…å®Œæ¯•åä¼šåœ¨ç³»ç»Ÿåå¥½è®¾ç½®é‡Œé¢æ‰¾åˆ°<strong>openfire</strong>çš„å¯åŠ¨å™¨</p>
<p><img src="http://img.blog.csdn.net/20160916193304787" alt=""></p>
<p>ç‚¹å‡»<strong>Openfire</strong>ä¼šè¿›å…¥å¯åŠ¨é¡µé¢</p>
<p><img src="http://img.blog.csdn.net/20160916193312553" alt=""></p>
<p>ç‚¹å‡»<strong>Open Admin Console</strong>è¿›å…¥æµè§ˆå™¨è®¾ç½®é¡µé¢ï¼Œè¯­è¨€é€‰æ‹©ç®€ä½“ä¸­æ–‡</p>
<p><img src="http://img.blog.csdn.net/20160916193322506" alt=""></p>
<p>æ¥ç€è®¾ç½®æœåŠ¡å™¨çš„åå­—</p>
<p><img src="http://img.blog.csdn.net/20160916193331803" alt=""></p>
<p>é“¾æ¥æ•°æ®åº“</p>
<blockquote>
<p>æ³¨æ„é‡Œé¢çš„ç”¨æˆ·åå’Œå¯†ç æ˜¯ä½ æ•°æ®åº“çš„ç”¨æˆ·åå’Œå¯†ç ï¼Œç”¨æˆ·åä¸€èˆ¬æ˜¯rootï¼Œå¯†ç æ˜¯ä½ ä¹‹å‰é‡æ–°è®¾ç½®çš„å¯†ç ~~~</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20160916193340006" alt=""></p>
<p>ç„¶åä¸€ç›´ç»§ç»­å°±OKäº†ï¼Œæœ€åéœ€è¦æˆ‘ä»¬ç™»å½•åˆ°<strong>openfire</strong></p>
<blockquote>
<p>å¯†ç å°±æ˜¯ä¹‹å‰è®¾ç½®çš„å¯†ç </p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20160916193348913" alt=""></p>
<h2 id="openfireå¯åŠ¨å¤±è´¥è§£å†³åŠæ³•"><a href="#openfireå¯åŠ¨å¤±è´¥è§£å†³åŠæ³•" class="headerlink" title="openfireå¯åŠ¨å¤±è´¥è§£å†³åŠæ³•"></a>openfireå¯åŠ¨å¤±è´¥è§£å†³åŠæ³•</h2><blockquote>
<p>å½“ä½ å‘ç°ä½ çš„ç”µè„‘ä¸Šçš„<strong>openfire</strong>æ— è®ºä½ æ˜¯é‡æ–°å®‰è£…è¿˜æ˜¯é‡å¯éƒ½æ— æ³•å¯åŠ¨çš„æƒ…å†µä¸‹ä½ å¯ä»¥æŒ‰ç…§æˆ‘ä¸‹é¢å†™çš„é‚£äº›ç»ˆç«¯æŒ‡ä»¤æ¥å¯åŠ¨ä½ çš„<strong>openfire</strong>ä¸ç”¨å†å»é‡æ–°åšä½ çš„ç³»ç»Ÿäº†.</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20160916193404522" alt=""></p>
<p>ä¸€èˆ¬ä½ å‘ç°ä½ çš„<strong>openfire</strong>æ‰“å¼€å‡ºç°è¿™æ ·çš„çª—å£åä½ å°±å¯ä»¥æƒ³åˆ°ä½ çš„<strong>openfire</strong>å‡ºé—®é¢˜äº†,æä¸ªåˆ«çš„æ—¶å€™ä½ å¯ä»¥é€šè¿‡é‡æ–°å®‰è£…æ¥è§£å†³.</p>
<p>å¦‚æœå¤§å®¶çš„é—®é¢˜é‡æ–°å®‰è£…åæ²¡æœ‰è§£å†³é‚£å°±è¯•ä¸‹æˆ‘ä¸‹é¢çš„æ–¹æ³•.</p>
<p>å…ˆæ‰“å¼€è‡ªå·±ç”µè„‘ä¸Šçš„ç»ˆç«¯ç„¶åè¾“å…¥ä»¥ä¸‹æŒ‡ä»¤:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// è·å–æƒé™</span><br><span class="line">sudo chmod -R 777 /usr/local/openfire/bin</span><br><span class="line">cd /usr/local/openfire/bin</span><br><span class="line">export JAVA_HOME=`/usr/libexec/java_home` # è®°ä½è¿™é‡Œä¸æ˜¯å•å¼•å·è€Œæ˜¯è‹±æ–‡ä¸‹æ•°å­—1å·¦è¾¹çš„æŒ‰é”®.</span><br><span class="line">echo $JAVA_HOME</span><br><span class="line"># ç»ˆç«¯ä¸Šæ‰“å°çš„å†…å®¹ /Library/Java/JavaVirtualMachines/jdk1.8.0_25.jdk/Contents/Home</span><br><span class="line">cd /usr/local/openfire/bin</span><br><span class="line">./openfire.sh</span><br><span class="line"># ç»ˆç«¯ä¸Šæ‰“å°çš„å†…å®¹</span><br><span class="line"># Openfire 4.0.3 [Sep 16, 2016 4:19:21 PM]</span><br><span class="line"># Admin console listening at http://wangchongleidemacbook-air.local:9090</span><br></pre></td></tr></table></figure>
<p>ä¸€èˆ¬ä½ è¾“å…¥å®Œæˆè¿™äº›æŒ‡ä»¤åä½ å†æ‰“å¼€ä½ çš„openfireå°±ä¼šå‘ç°è¿™æ ·çš„æƒ…å†µ.</p>
<p><img src="http://img.blog.csdn.net/20160916193412210" alt=""></p>
<h2 id="å®‰è£…openfireåadminæ— æ³•ç™»å½•ç®¡ç†æ§åˆ¶å¹³å°"><a href="#å®‰è£…openfireåadminæ— æ³•ç™»å½•ç®¡ç†æ§åˆ¶å¹³å°" class="headerlink" title="å®‰è£…openfireåadminæ— æ³•ç™»å½•ç®¡ç†æ§åˆ¶å¹³å°"></a>å®‰è£…openfireåadminæ— æ³•ç™»å½•ç®¡ç†æ§åˆ¶å¹³å°</h2><p><img src="http://img.blog.csdn.net/20160916193422991" alt=""></p>
<p>è§£å†³æ–¹æ¡ˆå¦‚ä¸‹ï¼š</p>
<ul>
<li>ä½¿ç”¨MysqlæŸ¥çœ‹å·¥å…·è¿›å…¥æ•°æ®åº“ï¼Œè¿›å…¥è¡¨â€œofuserâ€ï¼Œå°†è¯¥è¡¨æ¸…ç©ºï¼Œç„¶åæ‰§è¡ŒSQL è¯­å¥</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO ofUser (username, plainPassword, name, email, creationDate, modificationDate) VALUES (&apos;admin&apos;, &apos;admin&apos;, &apos;Administrator&apos;, &apos;admin@example.com&apos;, &apos;0&apos;, &apos;0&apos;);</span><br></pre></td></tr></table></figure>
<ul>
<li>å…³é—­openfireæœåŠ¡ï¼Œå°±æ˜¯ä»å…¶æ§åˆ¶å°stopç„¶åå†startï¼Œå†ç”¨ç”¨æˆ·åï¼šadmin,å¯†ç ï¼šadminç™»å½•å³å¯.</li>
</ul>
<h2 id="å½»åº•åˆ é™¤openfireæœåŠ¡å™¨çš„"><a href="#å½»åº•åˆ é™¤openfireæœåŠ¡å™¨çš„" class="headerlink" title="å½»åº•åˆ é™¤openfireæœåŠ¡å™¨çš„"></a>å½»åº•åˆ é™¤openfireæœåŠ¡å™¨çš„</h2><p>é¦–å…ˆ,ç¡®ä¿ä½ å·²ç»å…³æ‰äº†openfire<br>æ‰“å¼€ç»ˆç«¯ (åœ¨åº”ç”¨ç¨‹åºâ€“&gt;å®ç”¨å·¥å…·â€“&gt;)<br>è¾“å…¥ä»¥ä¸‹å‘½ä»¤</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sudo rm -rf /Library/PreferencePanes/Openfire.prefPane</span><br><span class="line">sudo rm -rf /usr/local/openfire</span><br><span class="line">sudo rm -rf /Library/LaunchDaemons/org.jivesoftware.openfire.plist</span><br></pre></td></tr></table></figure>
<p>ç¬¬ä¸€æ¡ä¼šè®©ä½ è¾“å…¥ç®¡ç†å‘˜å¯†ç ,å°½ç®¡ä½ è¾“å…¥çš„æ—¶å€™,ç»ˆç«¯ä¸ä¼šæ˜¾ç¤º,ä¸å¿…æ‹…å¿ƒ,æ­£ç¡®è¾“å…¥åæŒ‰å›è½¦,å®ƒå°±æ‰§è¡Œäº†ã€‚<br>ä¸‰æ¡å‘½ä»¤ä»¥åï¼Œ<strong>openfire</strong>å°±å½»åº•æ¶ˆå¤±äº†.ä½†æ˜¯éœ€è¦é‡å¯ä¸€ä¸‹ç³»ç»Ÿåè®¾ç½®ã€‚</p>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>é…ç½®è¿‡ç¨‹è¿˜æ˜¯æ¯”è¾ƒç¹ççš„ï¼Œä¸€å…±éœ€è¦å¥½å‡ ä¸ªæ­¥éª¤ï¼Œéœ€è¦è£…çš„æœ‰<strong>MySQL</strong>ã€<strong>JAVAç¯å¢ƒ</strong>å’Œ<strong>openfire</strong>ï¼Œé‡Œé¢æœ‰ä¸€æ­¥æ²¡åšå¥½éƒ½æ²¡æ³•ä½¿ç”¨ï¼Œè‡ªå·±å®Œæ•´é…ç½®ä¸‹æ¥ä¹ŸèŠ±äº†å¾ˆé•¿æ—¶é—´ï¼Œå¤§å®¶å¦‚æœæœ‰ä»€ä¹ˆé—®é¢˜å¯ä»¥ç•™è¨€é—®æˆ‘ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
<h1 id="å‚è€ƒæ–‡æ¡£ï¼š"><a href="#å‚è€ƒæ–‡æ¡£ï¼š" class="headerlink" title="å‚è€ƒæ–‡æ¡£ï¼š"></a>å‚è€ƒæ–‡æ¡£ï¼š</h1><p><a href="http://www.cnblogs.com/xiaodao/archive/2013/04/04/2999426.html" target="_blank" rel="external">http://www.cnblogs.com/xiaodao/archive/2013/04/04/2999426.html</a></p>
<p><a href="http://www.cnblogs.com/xiaodao/archive/2013/04/05/3000554.html" target="_blank" rel="external">http://www.cnblogs.com/xiaodao/archive/2013/04/05/3000554.html</a></p>
<p><a href="http://www.jianshu.com/p/5d88fe201c71" target="_blank" rel="external">http://www.jianshu.com/p/5d88fe201c71</a></p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 09æœˆ 16æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSåŠ¨ç”»è¿›é˜¶ - æ‰‹æ‘¸æ‰‹æ•™ä½ å†™ Slack çš„ Loading åŠ¨ç”»]]></title>
      <url>http://imwcl.com/2016/09/08/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E6%89%8B%E6%91%B8%E6%89%8B%E6%95%99%E4%BD%A0%E5%86%99-Slack-%E7%9A%84-Loading-%E5%8A%A8%E7%94%BB/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å‰å‡ å¤©çœ‹äº†ä¸€ç¯‡å…³äºåŠ¨ç”»çš„åšå®¢å«<a href="http://www.diycode.cc/topics/240" target="_blank" rel="external">æ‰‹æ‘¸æ‰‹æ•™ä½ å†™ Slack çš„ Loading åŠ¨ç”»</a>ï¼Œçœ‹ç€æŒºç‚«ï¼Œä½†æ˜¯æ˜¯å®‰å“ç‰ˆçš„ï¼Œå¯»æ€çš„ç€ä»¿é€ ç€å†™ä¸€ç¯‡iOSç‰ˆçš„ï¼Œä¸‹é¢æ˜¯æˆ‘å†™è¿™ä¸ªåŠ¨ç”»çš„åˆ†è§£~</p>
</blockquote>
<p>è€è§„çŸ©å…ˆä¸Šå›¾å’Œ<a href="https://github.com/631106979/WCLLoadingView" target="_blank" rel="external">demoåœ°å€</a>ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908162326530" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p>åˆšçœ‹åˆ°è¿™ä¸ªåŠ¨ç”»çš„æ—¶å€™ï¼Œè„‘æµ·é‡Œå‡ºç°äº†ä¸¤ä¸ªæ–¹æ¡ˆï¼Œä¸€ç§æ˜¯é€šè¿‡<code>drawRect</code>ç”»å‡ºæ¥ï¼Œç„¶åé…åˆ<code>CADisplayLink</code>ä¸åœçš„ç»˜åˆ¶çº¿çš„æ ·å¼ï¼›ç¬¬äºŒç§æ˜¯é€šè¿‡<code>CAShapeLayer</code>é…åˆ<code>CAAnimation</code>æ¥å®ç°åŠ¨ç”»æ•ˆæœã€‚å†ä¸‰è€ƒè™‘è§‰å¾—ä½¿ç”¨åè€…ï¼Œå› ä¸ºå‰è€…éœ€è¦è®¡ç®—å¾ˆå¤šï¼Œæ¯”è¾ƒå¤æ‚ï¼Œè€Œä¸”ç»è¿‡æµ‹è¯•å‰è€…ç›¸æ¯”äºåè€…æ¶ˆè€—æ›´å¤šçš„CPUï¼Œä¸‹é¢å°†æˆ‘çš„æ€è·¯å†™ä¸‹æ¥ï¼š</p>
<a id="more"></a>
<h1 id="ç›¸å…³é…ç½®å’Œåˆå§‹åŒ–æ–¹æ³•"><a href="#ç›¸å…³é…ç½®å’Œåˆå§‹åŒ–æ–¹æ³•" class="headerlink" title="ç›¸å…³é…ç½®å’Œåˆå§‹åŒ–æ–¹æ³•"></a>ç›¸å…³é…ç½®å’Œåˆå§‹åŒ–æ–¹æ³•</h1><p>åœ¨å†™è¿™ä¸ªåŠ¨ç”»ä¹‹å‰ï¼Œæˆ‘ä»¬æŠŠå…ˆéœ€è¦çš„å±æ€§å†™å¥½ï¼Œæ¯”å¦‚çº¿æ¡çš„ç²—ç»†ï¼ŒåŠ¨ç”»çš„æ—¶é—´ç­‰ç­‰ï¼Œä¸‹é¢æ˜¯ç›¸å…³çš„é…ç½®å’Œåˆè¯†åŒ–æ–¹æ³•ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//çº¿çš„å®½åº¦</span></span><br><span class="line"><span class="keyword">var</span> lineWidth:<span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line"><span class="comment">//çº¿çš„é•¿åº¦</span></span><br><span class="line"><span class="keyword">var</span> lineLength:<span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line"><span class="comment">//è¾¹è·</span></span><br><span class="line"><span class="keyword">var</span> margin:<span class="type">CGFloat</span> = <span class="number">0</span></span><br><span class="line"><span class="comment">//åŠ¨ç”»æ—¶é—´</span></span><br><span class="line"><span class="keyword">var</span> duration:<span class="type">Double</span> = <span class="number">2</span></span><br><span class="line"><span class="comment">//åŠ¨ç”»çš„é—´éš”æ—¶é—´</span></span><br><span class="line"><span class="keyword">var</span> interval:<span class="type">Double</span> = <span class="number">1</span></span><br><span class="line"><span class="comment">//å››æ¡çº¿çš„é¢œè‰²</span></span><br><span class="line"><span class="keyword">var</span> colors:[<span class="type">UIColor</span>] = [<span class="type">UIColor</span>.<span class="keyword">init</span>(rgba: <span class="string">"#9DD4E9"</span>) , <span class="type">UIColor</span>.<span class="keyword">init</span>(rgba: <span class="string">"#F5BD58"</span>),  <span class="type">UIColor</span>.<span class="keyword">init</span>(rgba: <span class="string">"#FF317E"</span>) , <span class="type">UIColor</span>.<span class="keyword">init</span>(rgba: <span class="string">"#6FC9B5"</span>)]</span><br><span class="line"><span class="comment">//åŠ¨ç”»çš„çŠ¶æ€</span></span><br><span class="line"><span class="keyword">private</span>(<span class="keyword">set</span>) <span class="keyword">var</span> status:<span class="type">AnimationStatus</span> = .<span class="type">Normal</span></span><br><span class="line"><span class="comment">//å››æ¡çº¿</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">var</span> lines:[<span class="type">CAShapeLayer</span>] = []</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">enum</span> <span class="title">AnimationStatus</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æ™®é€šçŠ¶æ€</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Normal</span></span><br><span class="line">    <span class="comment">//åŠ¨ç”»ä¸­</span></span><br><span class="line">    <span class="keyword">case</span> <span class="type">Animating</span></span><br><span class="line">    <span class="comment">//æš‚åœ</span></span><br><span class="line">    <span class="keyword">case</span> pause</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"> <span class="comment">//MARK: Initial Methods</span></span><br><span class="line"><span class="keyword">convenience</span> <span class="keyword">init</span>(fram: <span class="type">CGRect</span> , colors: [<span class="type">UIColor</span>]) &#123;</span><br><span class="line">    <span class="keyword">self</span>.<span class="keyword">init</span>()</span><br><span class="line">    <span class="keyword">self</span>.frame = frame</span><br><span class="line">    <span class="keyword">self</span>.colors = colors</span><br><span class="line">    config()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">init</span>(frame: <span class="type">CGRect</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(frame: frame)</span><br><span class="line">    config()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">required</span> <span class="keyword">init</span>?(coder aDecoder: <span class="type">NSCoder</span>) &#123;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>(coder: aDecoder)</span><br><span class="line">    config()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">config</span><span class="params">()</span></span> &#123;</span><br><span class="line">    lineLength = <span class="built_in">max</span>(frame.width, frame.height)</span><br><span class="line">    lineWidth  = lineLength/<span class="number">6.0</span></span><br><span class="line">    margin     = lineLength/<span class="number">4.5</span> + lineWidth/<span class="number">2</span></span><br><span class="line">    drawLineShapeLayer()</span><br><span class="line">    transform = <span class="type">CGAffineTransformRotate</span>(<span class="type">CGAffineTransformIdentity</span>, angle(-<span class="number">30</span>))</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h1 id="é€šè¿‡CAShapeLayerç»˜åˆ¶çº¿æ¡"><a href="#é€šè¿‡CAShapeLayerç»˜åˆ¶çº¿æ¡" class="headerlink" title="é€šè¿‡CAShapeLayerç»˜åˆ¶çº¿æ¡"></a>é€šè¿‡CAShapeLayerç»˜åˆ¶çº¿æ¡</h1><p>çœ‹åˆ°è¿™ä¸ªçº¿æ¡æˆ‘å°±æƒ³åˆ°äº†ç”¨<code>CAShapeLayer</code>æ¥å¤„ç†ï¼Œå› ä¸º<code>CAShapeLayer</code>å®Œå…¨å¯ä»¥å®ç°è¿™ç§æ•ˆæœï¼Œè€Œä¸”å®ƒçš„<code>strokeEnd</code>çš„å±æ€§å¯ä»¥ç”¨æ¥å®ç°çº¿æ¡çš„é•¿åº¦å˜åŒ–çš„åŠ¨ç”»ï¼Œä¸‹é¢ä¸Šç»˜åˆ¶å››æ ¹çº¿æ¡çš„ä»£ç ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908172029899" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MARK: ç»˜åˆ¶çº¿</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     ç»˜åˆ¶å››æ¡çº¿</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">drawLineShapeLayer</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//å¼€å§‹ç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> startPoint = [point(lineWidth/<span class="number">2</span>, y: margin),</span><br><span class="line">                          point(lineLength - margin, y: lineWidth/<span class="number">2</span>),</span><br><span class="line">                          point(lineLength - lineWidth/<span class="number">2</span>, y: lineLength - margin),</span><br><span class="line">                          point(margin, y: lineLength - lineWidth/<span class="number">2</span>)]</span><br><span class="line">        <span class="comment">//ç»“æŸç‚¹</span></span><br><span class="line">        <span class="keyword">let</span> endPoint   = [point(lineLength - lineWidth/<span class="number">2</span>, y: margin) ,</span><br><span class="line">                         point(lineLength - margin, y: lineLength - lineWidth/<span class="number">2</span>) ,</span><br><span class="line">                         point(lineWidth/<span class="number">2</span>, y: lineLength - margin) ,</span><br><span class="line">                         point(margin, y: lineWidth/<span class="number">2</span>)]</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">3</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> line:<span class="type">CAShapeLayer</span> = <span class="type">CAShapeLayer</span>()</span><br><span class="line">            line.lineWidth   = lineWidth</span><br><span class="line">            line.lineCap     = kCALineCapRound</span><br><span class="line">            line.opacity     = <span class="number">0.8</span></span><br><span class="line">            line.strokeColor = colors[i].<span class="type">CGColor</span></span><br><span class="line">            line.path        = getLinePath(startPoint[i], endPoint: endPoint[i]).<span class="type">CGPath</span></span><br><span class="line">            layer.addSublayer(line)</span><br><span class="line">            lines.append(line)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     è·å–çº¿çš„è·¯å¾„</span><br><span class="line">     </span><br><span class="line">     - parameter startPoint: å¼€å§‹ç‚¹</span><br><span class="line">     - parameter endPoint:   ç»“æŸç‚¹</span><br><span class="line">     </span><br><span class="line">     - returns: çº¿çš„è·¯å¾„</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">getLinePath</span><span class="params">(startPoint: CGPoint, endPoint: CGPoint)</span></span> -&gt; <span class="type">UIBezierPath</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> path = <span class="type">UIBezierPath</span>()</span><br><span class="line">        path.moveToPoint(startPoint)</span><br><span class="line">        path.addLineToPoint(endPoint)</span><br><span class="line">        <span class="keyword">return</span> path</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">point</span><span class="params">(x:CGFloat , y:CGFloat)</span></span> -&gt; <span class="type">CGPoint</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGPointMake</span>(x, y)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">angle</span><span class="params">(angle: Double)</span></span> -&gt; <span class="type">CGFloat</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="type">CGFloat</span>(angle *  (<span class="type">M_PI</span>/<span class="number">180</span>))</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>æ‰§è¡Œå®Œåå°±è·Ÿä¸Šå›¾ä¸€æ ·çš„æ•ˆæœäº†~~~</p>
<h1 id="åŠ¨ç”»åˆ†è§£"><a href="#åŠ¨ç”»åˆ†è§£" class="headerlink" title="åŠ¨ç”»åˆ†è§£"></a>åŠ¨ç”»åˆ†è§£</h1><p>ç»è¿‡åˆ†æï¼Œå¯ä»¥å°†åŠ¨ç”»åˆ†ä¸ºå››ä¸ªæ­¥éª¤ï¼š</p>
<ul>
<li>ç”»å¸ƒçš„æ—‹è½¬åŠ¨ç”»ï¼Œæ—‹è½¬ä¸¤åœˆ</li>
<li>çº¿æ¡ç”±é•¿å˜çŸ­çš„åŠ¨ç”»ï¼Œæ›´ç”»å¸ƒé€‰æ‹©çš„åŠ¨ç”»ä¸€èµ·æ‰§è¡Œï¼Œæ—‹è½¬ä¸€åœˆçš„æ—¶å€™ç»“æŸ</li>
<li>çº¿æ¡çš„ä½ç§»åŠ¨ç”»ï¼Œçº¿æ¡é€æ¸å‘ä¸­é—´é æ‹¢ï¼Œå†ç”»ç¬”æ—‹è½¬å®Œä¸€åœˆçš„æ—¶å€™æ‰§è¡Œï¼Œä¸¤åœˆçš„æ—¶å€™ç»“æŸ</li>
<li>çº¿æ¡ç”±çŸ­å˜é•¿çš„åŠ¨ç”»ï¼Œç”»å¸ƒæ—‹è½¬å®Œä¸¤åœˆçš„æ—¶å€™æ‰§è¡Œ</li>
</ul>
<h2 id="ç¬¬ä¸€æ­¥ç”»å¸ƒæ—‹è½¬åŠ¨ç”»"><a href="#ç¬¬ä¸€æ­¥ç”»å¸ƒæ—‹è½¬åŠ¨ç”»" class="headerlink" title="ç¬¬ä¸€æ­¥ç”»å¸ƒæ—‹è½¬åŠ¨ç”»"></a>ç¬¬ä¸€æ­¥ç”»å¸ƒæ—‹è½¬åŠ¨ç”»</h2><p>è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨<code>CABasicAnimation</code>åŸºç¡€åŠ¨ç”»ï¼Œ<code>keyPath</code>ä½œç”¨äºç”»å¸ƒçš„<code>transform.rotation.z</code>ï¼Œä»¥zè½´ä¸ºç›®æ ‡è¿›è¡Œæ—‹è½¬ï¼Œä¸‹é¢æ˜¯æ•ˆæœå›¾å’Œä»£ç ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908173322904" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MARK: åŠ¨ç”»æ­¥éª¤</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     æ—‹è½¬çš„åŠ¨ç”»ï¼Œæ—‹è½¬ä¸¤åœˆ</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">angleAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> angleAnimation                 = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: <span class="string">"transform.rotation.z"</span>)</span><br><span class="line">        angleAnimation.fromValue           = angle(-<span class="number">30</span>)</span><br><span class="line">        angleAnimation.toValue             = angle(<span class="number">690</span>)</span><br><span class="line">        angleAnimation.fillMode            = kCAFillModeForwards</span><br><span class="line">        angleAnimation.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">        angleAnimation.duration            = duration</span><br><span class="line">        angleAnimation.delegate            = <span class="keyword">self</span></span><br><span class="line">        layer.addAnimation(angleAnimation, forKey: <span class="string">"angleAnimation"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬äºŒæ­¥çº¿æ¡ç”±é•¿å˜çŸ­çš„åŠ¨ç”»"><a href="#ç¬¬äºŒæ­¥çº¿æ¡ç”±é•¿å˜çŸ­çš„åŠ¨ç”»" class="headerlink" title="ç¬¬äºŒæ­¥çº¿æ¡ç”±é•¿å˜çŸ­çš„åŠ¨ç”»"></a>ç¬¬äºŒæ­¥çº¿æ¡ç”±é•¿å˜çŸ­çš„åŠ¨ç”»</h2><p>è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨<code>CABasicAnimation</code>åŸºç¡€åŠ¨ç”»ï¼Œ<code>keyPath</code>ä½œç”¨äºçº¿æ¡çš„<code>strokeEnd</code>å±æ€§ï¼Œè®©<code>strokeEnd</code>ä»1åˆ°0æ¥å®ç°çº¿æ¡é•¿çŸ­çš„åŠ¨ç”»ï¼Œä¸‹é¢æ˜¯æ•ˆæœå›¾å’Œä»£ç ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908173750890" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     çº¿çš„ç¬¬ä¸€æ­¥åŠ¨ç”»ï¼Œçº¿é•¿ä»é•¿å˜çŸ­</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">lineAnimationOne</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> lineAnimationOne                 = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: <span class="string">"strokeEnd"</span>)</span><br><span class="line">        lineAnimationOne.duration            = duration/<span class="number">2</span></span><br><span class="line">        lineAnimationOne.fillMode            = kCAFillModeForwards</span><br><span class="line">        lineAnimationOne.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">        lineAnimationOne.fromValue           = <span class="number">1</span></span><br><span class="line">        lineAnimationOne.toValue             = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">3</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> lineLayer = lines[i]</span><br><span class="line">            lineLayer.addAnimation(lineAnimationOne, forKey: <span class="string">"lineAnimationOne"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬ä¸‰æ­¥çº¿æ¡çš„ä½ç§»åŠ¨ç”»"><a href="#ç¬¬ä¸‰æ­¥çº¿æ¡çš„ä½ç§»åŠ¨ç”»" class="headerlink" title="ç¬¬ä¸‰æ­¥çº¿æ¡çš„ä½ç§»åŠ¨ç”»"></a>ç¬¬ä¸‰æ­¥çº¿æ¡çš„ä½ç§»åŠ¨ç”»</h2><p>è¿™é‡Œæˆ‘ä»¬ä¹Ÿæ˜¯ä½¿ç”¨<code>CABasicAnimation</code>åŸºç¡€åŠ¨ç”»ï¼Œ<code>keyPath</code>ä½œç”¨äºçº¿æ¡çš„<code>transform.translation.x</code>å’Œ<code>transform.translation.y</code>å±æ€§ï¼Œæ¥å®ç°å‘ä¸­é—´èšæ‹¢çš„æ•ˆæœï¼Œä¸‹é¢æ˜¯æ•ˆæœå›¾å’Œä»£ç ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908174341119" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     çº¿çš„ç¬¬äºŒæ­¥åŠ¨ç”»ï¼Œçº¿å‘ä¸­é—´å¹³ç§»</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">lineAnimationTwo</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">3</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> keypath = <span class="string">"transform.translation.x"</span></span><br><span class="line">            <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">1</span> &#123;</span><br><span class="line">                keypath = <span class="string">"transform.translation.y"</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> lineAnimationTwo = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: keypath)</span><br><span class="line">            lineAnimationTwo.beginTime = <span class="type">CACurrentMediaTime</span>() + duration/<span class="number">2</span></span><br><span class="line">            lineAnimationTwo.duration = duration/<span class="number">4</span></span><br><span class="line">            lineAnimationTwo.fillMode = kCAFillModeForwards</span><br><span class="line">            lineAnimationTwo.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">            lineAnimationTwo.autoreverses = <span class="literal">true</span></span><br><span class="line">            lineAnimationTwo.fromValue = <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> i &lt; <span class="number">2</span> &#123;</span><br><span class="line">                lineAnimationTwo.toValue = lineLength/<span class="number">4</span></span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                lineAnimationTwo.toValue = -lineLength/<span class="number">4</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> lineLayer = lines[i]</span><br><span class="line">            lineLayer.addAnimation(lineAnimationTwo, forKey: <span class="string">"lineAnimationTwo"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ä¸‰è§’å½¢ä¸¤è¾¹çš„æ¯”ä¾‹</span></span><br><span class="line">        <span class="keyword">let</span> scale = (lineLength - <span class="number">2</span>*margin)/(lineLength - lineWidth)</span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">3</span> &#123;</span><br><span class="line">            <span class="keyword">var</span> keypath = <span class="string">"transform.translation.y"</span></span><br><span class="line">            <span class="keyword">if</span> i%<span class="number">2</span> == <span class="number">1</span> &#123;</span><br><span class="line">                keypath = <span class="string">"transform.translation.x"</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> lineAnimationTwo = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: keypath)</span><br><span class="line">            lineAnimationTwo.beginTime = <span class="type">CACurrentMediaTime</span>() + duration/<span class="number">2</span></span><br><span class="line">            lineAnimationTwo.duration = duration/<span class="number">4</span></span><br><span class="line">            lineAnimationTwo.fillMode = kCAFillModeForwards</span><br><span class="line">            lineAnimationTwo.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">            lineAnimationTwo.autoreverses = <span class="literal">true</span></span><br><span class="line">            lineAnimationTwo.fromValue = <span class="number">0</span></span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">0</span> || i == <span class="number">3</span> &#123;</span><br><span class="line">                lineAnimationTwo.toValue = lineLength/<span class="number">4</span> * scale</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                lineAnimationTwo.toValue = -lineLength/<span class="number">4</span> * scale</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> lineLayer = lines[i]</span><br><span class="line">            lineLayer.addAnimation(lineAnimationTwo, forKey: <span class="string">"lineAnimationThree"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="ç¬¬å››æ­¥çº¿æ¡æ¢å¤çš„åŸæ¥é•¿åº¦çš„åŠ¨ç”»"><a href="#ç¬¬å››æ­¥çº¿æ¡æ¢å¤çš„åŸæ¥é•¿åº¦çš„åŠ¨ç”»" class="headerlink" title="ç¬¬å››æ­¥çº¿æ¡æ¢å¤çš„åŸæ¥é•¿åº¦çš„åŠ¨ç”»"></a>ç¬¬å››æ­¥çº¿æ¡æ¢å¤çš„åŸæ¥é•¿åº¦çš„åŠ¨ç”»</h2><p>è¿™é‡Œæˆ‘ä»¬è¿˜æ˜¯ä½¿ç”¨<code>CABasicAnimation</code>åŸºç¡€åŠ¨ç”»ï¼Œ<code>keyPath</code>ä½œç”¨äºçº¿æ¡çš„<code>strokeEnd</code>å±æ€§ï¼Œè®©<code>strokeEnd</code>ä»0åˆ°1æ¥å®ç°çº¿æ¡é•¿çŸ­çš„åŠ¨ç”»ï¼Œä¸‹é¢æ˜¯æ•ˆæœå›¾å’Œä»£ç ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908174810436" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     çº¿çš„ç¬¬ä¸‰æ­¥åŠ¨ç”»ï¼Œçº¿ç”±çŸ­å˜é•¿</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">lineAnimationThree</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//çº¿ç§»åŠ¨çš„åŠ¨ç”»</span></span><br><span class="line">        <span class="keyword">let</span> lineAnimationFour                 = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: <span class="string">"strokeEnd"</span>)</span><br><span class="line">        lineAnimationFour.beginTime            = <span class="type">CACurrentMediaTime</span>() + duration</span><br><span class="line">        lineAnimationFour.duration            = duration/<span class="number">4</span></span><br><span class="line">        lineAnimationFour.fillMode            = kCAFillModeForwards</span><br><span class="line">        lineAnimationFour.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">        lineAnimationFour.fromValue           = <span class="number">0</span></span><br><span class="line">        lineAnimationFour.toValue             = <span class="number">1</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>...<span class="number">3</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> i == <span class="number">3</span> &#123;</span><br><span class="line">                lineAnimationFour.delegate = <span class="keyword">self</span></span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">let</span> lineLayer = lines[i]</span><br><span class="line">            lineLayer.addAnimation(lineAnimationFour, forKey: <span class="string">"lineAnimationFour"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h2 id="æœ€åä¸€æ­¥éœ€è¦å°†åŠ¨ç”»ç»„åˆèµ·æ¥"><a href="#æœ€åä¸€æ­¥éœ€è¦å°†åŠ¨ç”»ç»„åˆèµ·æ¥" class="headerlink" title="æœ€åä¸€æ­¥éœ€è¦å°†åŠ¨ç”»ç»„åˆèµ·æ¥"></a>æœ€åä¸€æ­¥éœ€è¦å°†åŠ¨ç”»ç»„åˆèµ·æ¥</h2><p>å…³äºåŠ¨ç”»ç»„åˆæˆ‘æ²¡ç”¨åˆ°<code>CAAnimationGroup</code>ï¼Œå› ä¸ºè¿™äº›åŠ¨ç”»å¹¶ä¸æ˜¯åŠ åˆ°åŒä¸€ä¸ªlayerä¸Šï¼Œå†åŠ ä¸ŠåŠ¨ç”»ç±»å‹æœ‰ç‚¹å¤šåŠ èµ·æ¥ä¹Ÿæ¯”è¾ƒéº»çƒ¦ï¼Œæˆ‘å°±é€šè¿‡åŠ¨ç”»çš„<code>beginTime</code>å±æ€§æ¥æ§åˆ¶åŠ¨ç”»çš„æ‰§è¡Œé¡ºåºï¼Œè¿˜åŠ äº†åŠ¨ç”»æš‚åœå–ç»§ç»­çš„åŠŸèƒ½ï¼Œæ•ˆæœå’Œä»£ç è§ä¸‹å›¾ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160908175802790" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//MARK: Public Methods</span></span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     å¼€å§‹åŠ¨ç”»</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">startAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        angleAnimation()</span><br><span class="line">        lineAnimationOne()</span><br><span class="line">        lineAnimationTwo()</span><br><span class="line">        lineAnimationThree()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">      æš‚åœåŠ¨ç”»</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pauseAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        layer.pauseAnimation()</span><br><span class="line">        <span class="keyword">for</span> lineLayer <span class="keyword">in</span> lines &#123;</span><br><span class="line">            lineLayer.pauseAnimation()</span><br><span class="line">        &#125;</span><br><span class="line">        status = .pause</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span><br><span class="line">     ç»§ç»­åŠ¨ç”»</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">resumeAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        layer.resumeAnimation()</span><br><span class="line">        <span class="keyword">for</span> lineLayer <span class="keyword">in</span> lines &#123;</span><br><span class="line">            lineLayer.resumeAnimation()</span><br><span class="line">        &#125;</span><br><span class="line">        status = .<span class="type">Animating</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="class"><span class="keyword">extension</span> <span class="title">CALayer</span> </span>&#123;</span><br><span class="line">    <span class="comment">//æš‚åœåŠ¨ç”»</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">pauseAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">// å°†å½“å‰æ—¶é—´CACurrentMediaTimeè½¬æ¢ä¸ºlayerä¸Šçš„æ—¶é—´, å³å°†parent timeè½¬æ¢ä¸ºlocaltime</span></span><br><span class="line">        <span class="keyword">let</span> pauseTime = convertTime(<span class="type">CACurrentMediaTime</span>(), fromLayer: <span class="literal">nil</span>)</span><br><span class="line">        <span class="comment">// è®¾ç½®layerçš„timeOffset, åœ¨ç»§ç»­æ“ä½œä¹Ÿä¼šä½¿ç”¨åˆ°</span></span><br><span class="line">        timeOffset    = pauseTime</span><br><span class="line">        <span class="comment">// localtimeä¸parenttimeçš„æ¯”ä¾‹ä¸º0, æ„å‘³ç€localtimeæš‚åœäº†</span></span><br><span class="line">        speed         = <span class="number">0</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">//ç»§ç»­åŠ¨ç”»</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">resumeAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> pausedTime = timeOffset</span><br><span class="line">        speed          = <span class="number">1</span></span><br><span class="line">        timeOffset     = <span class="number">0</span>;</span><br><span class="line">        beginTime      = <span class="number">0</span></span><br><span class="line">        <span class="comment">// è®¡ç®—æš‚åœæ—¶é—´</span></span><br><span class="line">        <span class="keyword">let</span> sincePause = convertTime(<span class="type">CACurrentMediaTime</span>(), fromLayer: <span class="literal">nil</span>) - pausedTime</span><br><span class="line">        <span class="comment">// local timeç›¸å¯¹äºparent timeæ—¶é—´çš„beginTime</span></span><br><span class="line">        beginTime      = sincePause</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//MARK: Animation Delegate</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">animationDidStart</span><span class="params">(anim: CAAnimation)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> animation = anim <span class="keyword">as</span>? <span class="type">CABasicAnimation</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> animation.keyPath == <span class="string">"transform.rotation.z"</span> &#123;</span><br><span class="line">                status = .<span class="type">Animating</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">animationDidStop</span><span class="params">(anim: CAAnimation, finished flag: Bool)</span></span> &#123;</span><br><span class="line">        <span class="keyword">if</span> <span class="keyword">let</span> animation = anim <span class="keyword">as</span>? <span class="type">CABasicAnimation</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> animation.keyPath == <span class="string">"strokeEnd"</span> &#123;</span><br><span class="line">                <span class="keyword">if</span> flag &#123;</span><br><span class="line">                    status = .<span class="type">Normal</span></span><br><span class="line">                    dispatch_after(dispatch_time(<span class="type">DISPATCH_TIME_NOW</span>, <span class="type">Int64</span>(interval) * <span class="type">Int64</span>(<span class="type">NSEC_PER_SEC</span>)), dispatch_get_main_queue(), &#123;</span><br><span class="line">                        <span class="keyword">if</span> <span class="keyword">self</span>.status != .<span class="type">Animating</span> &#123;</span><br><span class="line">                            <span class="keyword">self</span>.startAnimation()</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;)</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">     <span class="comment">//MARK: Override</span></span><br><span class="line">    <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">touchesEnded</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">        <span class="keyword">switch</span> status &#123;</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Animating</span>:</span><br><span class="line">            pauseAnimation()</span><br><span class="line">        <span class="keyword">case</span> .pause:</span><br><span class="line">            resumeAnimation()</span><br><span class="line">        <span class="keyword">case</span> .<span class="type">Normal</span>:</span><br><span class="line">            startAnimation()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<h1 id="æ€»ç»“"><a href="#æ€»ç»“" class="headerlink" title="æ€»ç»“"></a>æ€»ç»“</h1><p>åŠ¨ç”»çœ‹èµ·æ¥æŒºå¤æ‚ï¼Œä½†æ˜¯ç»†ç»†åˆ’åˆ†å‡ºæ¥ä¹Ÿå°±é‚£ä¹ˆå›äº‹ï¼Œåœ¨å†™åŠ¨ç”»ä¹‹å‰è¦å…ˆæƒ³å¥½åŠ¨ç”»çš„æ­¥éª¤ï¼Œè¿™ä¸ªå¾ˆå…³é”®ï¼Œå¸Œæœ›å¤§å®¶é€šè¿‡è¿™ç¯‡åšå®¢å¯ä»¥å­¦åˆ°ä¸œè¥¿ï¼Œæœ‰ä»€ä¹ˆå¥½çš„å»ºè®®å¯ä»¥éšæ—¶æå‡ºæ¥ï¼Œè°¢è°¢å¤§å®¶é˜…è¯»~~<a href="https://github.com/631106979/WCLLoadingView" target="_blank" rel="external">demoåœ°å€</a></p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 09æœˆ 08æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[ iOSå¼€å‘è¿›é˜¶ - ä½¿ç”¨shellè„šæœ¬è‡ªåŠ¨æ‰“åŒ…ä¸Šä¼ åˆ°firä¸Š]]></title>
      <url>http://imwcl.com/2016/08/24/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E4%BD%BF%E7%94%A8shell%E8%84%9A%E6%9C%AC%E8%87%AA%E5%8A%A8%E6%89%93%E5%8C%85%E4%B8%8A%E4%BC%A0%E5%88%B0fir%E4%B8%8A/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ç”¨fir.imæµ‹è¯•å·²ç»å¥½é•¿æ—¶é—´äº†ï¼Œæ„Ÿè§‰æ¯æ¬¡æ‰“åŒ…ä¸Šä¼ éƒ½å¾ˆéº»çƒ¦ï¼Œæƒ³ç€æ˜¯ä¸æ˜¯å¯ä»¥ç”¨è„šæœ¬è‡ªåŠ¨æ‰“åŒ…ï¼Œåœ¨ç½‘ä¸Šæœäº†ä¸€ä¸‹ç¡®å®æœ‰ï¼Œä¸‹é¢æ€»ç»“ä¸€ä¸‹å¦‚ä½•ä½¿ç”¨è„šæœ¬è‡ªåŠ¨æ‰“åŒ…ä¸Šä¼ åˆ°fir.imï¼Œä»¥åŠæ‰“åŒ…è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³åŠæ³•</p>
</blockquote>
<h2 id="ç›¸å…³èµ„æ–™å’Œä¸‹è½½"><a href="#ç›¸å…³èµ„æ–™å’Œä¸‹è½½" class="headerlink" title="ç›¸å…³èµ„æ–™å’Œä¸‹è½½"></a>ç›¸å…³èµ„æ–™å’Œä¸‹è½½</h2><p>é¦–å…ˆæ˜¯æ‰“åŒ…è„šæœ¬çš„ä¸‹è½½åœ°å€ï¼Œè¿™ä¸ªæ˜¯æˆ‘æ‰¾åˆ°çš„æ¯”è¾ƒå…¨çš„ä¸€ä¸ªï¼Œé‡Œé¢æœ‰å¾ˆå¤šä¸åŒåŠŸèƒ½çš„shellè„šæœ¬ï¼Œäº²æµ‹å¥½ç”¨ï¼Œ<a href="https://github.com/heyuan110/BashShell?spm=5176.100239.blogcont5028.4.kFcLtR" target="_blank" rel="external">ä¼ é€é—¨</a></p>
<p>è¿˜æœ‰å…³äºfiræŒ‡ä»¤çš„ä¸€äº›ä»‹ç»å¯ä»¥å»è¿™é‡ŒæŸ¥çœ‹ï¼Œ<a href="https://github.com/FIRHQ/fir-cli" target="_blank" rel="external">ä¼ é€é—¨</a></p>
<a id="more"></a>
<p><span id="APA"></span></p>
<h2 id="ç¬¬ä¸€æ­¥å®‰è£…fir-cil"><a href="#ç¬¬ä¸€æ­¥å®‰è£…fir-cil" class="headerlink" title="ç¬¬ä¸€æ­¥å®‰è£…fir-cil"></a>ç¬¬ä¸€æ­¥å®‰è£…fir-cil</h2><p>fir-cli ä½¿ç”¨ Ruby æ„å»º, æ— éœ€ç¼–è¯‘, åªè¦å®‰è£…ç›¸åº” gem å³å¯.</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ ruby -v <span class="comment"># &gt; 1.9.3</span></span><br><span class="line">$ gem install fir-cli</span><br></pre></td></tr></table></figure>
<h3 id="å¸¸è§çš„å®‰è£…é—®é¢˜"><a href="#å¸¸è§çš„å®‰è£…é—®é¢˜" class="headerlink" title="å¸¸è§çš„å®‰è£…é—®é¢˜"></a>å¸¸è§çš„å®‰è£…é—®é¢˜</h3><ul>
<li><p>ä½¿ç”¨ç³»ç»Ÿè‡ªå¸¦çš„ Ruby å®‰è£…, éœ€ç¡®ä¿ ruby-dev å·²è¢«æ­£ç¡®çš„å®‰è£…:</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ xcode-select --install        <span class="comment"># OS X ç³»ç»Ÿ</span></span><br><span class="line">$ sudo apt-get install ruby-dev <span class="comment"># Linux ç³»ç»Ÿ</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>å‡ºç° <code>Permission denied</code> ç›¸å…³é”™è¯¯:</p>
<p>åœ¨å‘½ä»¤å‰åŠ ä¸Š <code>sudo</code></p>
</li>
<li><p>å‡ºç° <code>Gem::RemoteFetcher::FetchError</code> ç›¸å…³é”™è¯¯:</p>
<p>æ›´æ¢ Ruby çš„æ·˜å®æº(ç”±äºå›½å†…ç½‘ç»œåŸå› , ä½ æ‡‚çš„), å¹¶å‡çº§ä¸‹ç³»ç»Ÿè‡ªå¸¦çš„ gem</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">$ gem sources --remove https://rubygems.org/</span><br><span class="line">$ gem sources <span class="_">-a</span> https://ruby.taobao.org/</span><br><span class="line">$ gem sources <span class="_">-l</span></span><br><span class="line">*** CURRENT SOURCES ***</span><br><span class="line"></span><br><span class="line">https://ruby.taobao.org</span><br><span class="line"><span class="comment"># è¯·ç¡®ä¿åªæœ‰ ruby.taobao.org, å¦‚æœæœ‰å…¶ä»–çš„æº, è¯· remove æ‰</span></span><br><span class="line"></span><br><span class="line">gem update --system</span><br><span class="line">gem install fir-cli</span><br></pre></td></tr></table></figure>
</li>
<li><p>Mac OS X 10.11 ä»¥åçš„ç‰ˆæœ¬, ç”±äº10.11å¼•å…¥äº† <code>rootless</code>, æ— æ³•ç›´æ¥å®‰è£… fir-cli, æœ‰ä»¥ä¸‹ä¸‰ç§è§£å†³åŠæ³•:</p>
<p>1. ä½¿ç”¨ <a href="http://brew.sh/" target="_blank" rel="external">Homebrew</a> åŠ <a href="https://rvm.io/" target="_blank" rel="external">RVM</a> å®‰è£… Ruby, å†å®‰è£… fir-cli(æ¨è)</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Install Homebrew:</span></span><br><span class="line">$ ruby <span class="_">-e</span> <span class="string">"<span class="variable">$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)</span>"</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># Install RVM:</span></span><br><span class="line">$ \curl <span class="_">-s</span>SL https://get.rvm.io | bash <span class="_">-s</span> stable --ruby</span><br><span class="line"></span><br><span class="line">$ gem install fir-cli</span><br></pre></td></tr></table></figure>
<p>2. æŒ‡å®š fir-cli ä¸­ bin æ–‡ä»¶çš„ PATH</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">export</span> PATH=/usr/<span class="built_in">local</span>/bin:<span class="variable">$PATH</span>;gem install -n /usr/<span class="built_in">local</span>/bin fir-cli</span><br></pre></td></tr></table></figure>
<p>3. é‡å†™ Ruby Gem çš„ bindir</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ <span class="built_in">echo</span> <span class="string">'gem: --bindir /usr/local/bin'</span> &gt;&gt; ~/.gemrc</span><br><span class="line">$ gem install fir-cli</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p><span id="login"></span></p>
<h2 id="ç¬¬äºŒæ­¥ç™»å½•fir-im"><a href="#ç¬¬äºŒæ­¥ç™»å½•fir-im" class="headerlink" title="ç¬¬äºŒæ­¥ç™»å½•fir.im"></a>ç¬¬äºŒæ­¥ç™»å½•fir.im</h2><p>ç™»å½•æŒ‡ä»¤éå¸¸ç®€å•ï¼Œåªéœ€è¦<code>fir login API Token</code>ï¼Œè¿™é‡Œé¢çš„API Tokenå°±æ˜¯ä½ firå¸å·ä¸‹çš„API Tokenï¼Œç„¶åé€šè¿‡<code>fir me</code>æŸ¥çœ‹ä½ æ˜¯å¦ç™»å½•æˆåŠŸ.</p>
<h3 id="é¦–å…ˆè·å–API-Token"><a href="#é¦–å…ˆè·å–API-Token" class="headerlink" title="é¦–å…ˆè·å–API Token"></a>é¦–å…ˆè·å–API Token</h3><p><img src="http://img.blog.csdn.net/20160824112123496" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<p><img src="http://img.blog.csdn.net/20160824112210549" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h3 id="åœ¨ç»ˆç«¯é‡Œç™»å½•ä½ çš„fir"><a href="#åœ¨ç»ˆç«¯é‡Œç™»å½•ä½ çš„fir" class="headerlink" title="åœ¨ç»ˆç«¯é‡Œç™»å½•ä½ çš„fir"></a>åœ¨ç»ˆç«¯é‡Œç™»å½•ä½ çš„fir</h3><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">fir login API Token</span><br><span class="line">fir me</span><br></pre></td></tr></table></figure>
<p>å¦‚æœå‡ºç°ä¸€ä¸‹ç±»ä¼¼çš„æƒ…å†µè¯´æ˜ç™»å½•æˆåŠŸäº†.<br><img src="http://img.blog.csdn.net/20160824112506519" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h3 id="è·å–éœ€è¦ä¸Šä¼ åº”ç”¨çš„appID"><a href="#è·å–éœ€è¦ä¸Šä¼ åº”ç”¨çš„appID" class="headerlink" title="è·å–éœ€è¦ä¸Šä¼ åº”ç”¨çš„appID"></a>è·å–éœ€è¦ä¸Šä¼ åº”ç”¨çš„appID</h3><p><img src="http://img.blog.csdn.net/20160824113027211" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="ç¬¬ä¸‰æ­¥ä½¿ç”¨ä¸‹è½½ä¸‹æ¥çš„shellè„šæœ¬è¿›è¡Œæ‰“åŒ…ä¸Šä¼ "><a href="#ç¬¬ä¸‰æ­¥ä½¿ç”¨ä¸‹è½½ä¸‹æ¥çš„shellè„šæœ¬è¿›è¡Œæ‰“åŒ…ä¸Šä¼ " class="headerlink" title="ç¬¬ä¸‰æ­¥ä½¿ç”¨ä¸‹è½½ä¸‹æ¥çš„shellè„šæœ¬è¿›è¡Œæ‰“åŒ…ä¸Šä¼ "></a>ç¬¬ä¸‰æ­¥ä½¿ç”¨ä¸‹è½½ä¸‹æ¥çš„shellè„šæœ¬è¿›è¡Œæ‰“åŒ…ä¸Šä¼ </h2><p>å…ˆçœ‹ä¸€ä¸‹è„šæœ¬ä»£ç ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#! bin/bash</span></span><br><span class="line"><span class="comment">#Author:Bruce http://www.heyuan110.com</span></span><br><span class="line"><span class="comment">#Update Date:2015.06.23</span></span><br><span class="line"><span class="comment">#Use:å‘½ä»¤è¡Œè¿›å…¥ç›®å½•ç›´æ¥æ‰§è¡Œsh Build+DeployToFir.shå³å¯å®Œæˆæ‰“åŒ…å‘å¸ƒåˆ°fir.im</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">export</span> LC_ALL=zh_CN.GB2312;</span><br><span class="line"><span class="built_in">export</span> LANG=zh_CN.GB2312</span><br><span class="line"></span><br><span class="line"><span class="comment">###############è®¾ç½®éœ€ç¼–è¯‘çš„é¡¹ç›®é…ç½®åç§°</span></span><br><span class="line">buildConfig=<span class="string">"Release"</span> <span class="comment">#ç¼–è¯‘çš„æ–¹å¼,æœ‰Release,Debugï¼Œè‡ªå®šä¹‰çš„AdHocç­‰</span></span><br><span class="line"></span><br><span class="line"><span class="comment">##########################################################################################</span></span><br><span class="line"><span class="comment">##############################ä»¥ä¸‹éƒ¨åˆ†ä¸ºè‡ªåŠ¨ç”Ÿäº§éƒ¨åˆ†ï¼Œä¸éœ€è¦æ‰‹åŠ¨ä¿®æ”¹############################</span></span><br><span class="line"><span class="comment">##########################################################################################</span></span><br><span class="line">projectName=`find . -name *.xcodeproj | awk -F <span class="string">"[/.]"</span> <span class="string">'&#123;print $(NF-1)&#125;'</span>` <span class="comment">#é¡¹ç›®åç§°</span></span><br><span class="line">projectDir=`<span class="built_in">pwd</span>` <span class="comment">#é¡¹ç›®æ‰€åœ¨ç›®å½•çš„ç»å¯¹è·¯å¾„</span></span><br><span class="line">wwwIPADir=~/Desktop/<span class="variable">$projectName</span>-IPA <span class="comment">#ipaï¼Œiconæœ€åæ‰€åœ¨çš„ç›®å½•ç»å¯¹è·¯å¾„</span></span><br><span class="line">isWorkSpace=<span class="literal">true</span>  <span class="comment">#åˆ¤æ–­æ˜¯ç”¨çš„workspaceè¿˜æ˜¯ç›´æ¥projectï¼Œworkspaceè®¾ç½®ä¸ºtrueï¼Œå¦åˆ™è®¾ç½®ä¸ºfalse</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"~~~~~~~~~~~~~~~~~~~å¼€å§‹ç¼–è¯‘~~~~~~~~~~~~~~~~~~~"</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="_">-d</span> <span class="string">"<span class="variable">$wwwIPADir</span>"</span> ]; <span class="keyword">then</span></span><br><span class="line">    <span class="built_in">echo</span> <span class="variable">$wwwIPADir</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"æ–‡ä»¶ç›®å½•å­˜åœ¨"</span> </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"æ–‡ä»¶ç›®å½•ä¸å­˜åœ¨"</span> </span><br><span class="line">    mkdir -pv <span class="variable">$wwwIPADir</span></span><br><span class="line">	<span class="built_in">echo</span> <span class="string">"åˆ›å»º<span class="variable">$&#123;wwwIPADir&#125;</span>ç›®å½•æˆåŠŸ"</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############è¿›å…¥é¡¹ç›®ç›®å½•</span></span><br><span class="line"><span class="built_in">cd</span> <span class="variable">$projectDir</span></span><br><span class="line">rm -rf ./build</span><br><span class="line">buildAppToDir=<span class="variable">$projectDir</span>/build <span class="comment">#ç¼–è¯‘æ‰“åŒ…å®Œæˆå.appæ–‡ä»¶å­˜æ”¾çš„ç›®å½•</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############è·å–ç‰ˆæœ¬å·,bundleID</span></span><br><span class="line">infoPlist=<span class="string">"<span class="variable">$projectName</span>/Info.plist"</span></span><br><span class="line">bundleVersion=`/usr/libexec/PlistBuddy -c <span class="string">"Print CFBundleShortVersionString"</span> <span class="variable">$infoPlist</span>`</span><br><span class="line">bundleIdentifier=`/usr/libexec/PlistBuddy -c <span class="string">"Print CFBundleIdentifier"</span> <span class="variable">$infoPlist</span>`</span><br><span class="line">bundleBuildVersion=`/usr/libexec/PlistBuddy -c <span class="string">"Print CFBundleVersion"</span> <span class="variable">$infoPlist</span>`</span><br><span class="line"></span><br><span class="line"><span class="comment">###############å¼€å§‹ç¼–è¯‘app</span></span><br><span class="line"><span class="keyword">if</span> <span class="variable">$isWorkSpace</span> ; <span class="keyword">then</span>  <span class="comment">#åˆ¤æ–­ç¼–è¯‘æ–¹å¼</span></span><br><span class="line">    <span class="built_in">echo</span>  <span class="string">"å¼€å§‹ç¼–è¯‘workspace...."</span> </span><br><span class="line">    xcodebuild  -workspace <span class="variable">$projectName</span>.xcworkspace -scheme <span class="variable">$projectName</span>  -configuration <span class="variable">$buildConfig</span> clean build SYMROOT=<span class="variable">$buildAppToDir</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line">    <span class="built_in">echo</span>  <span class="string">"å¼€å§‹ç¼–è¯‘target...."</span></span><br><span class="line">    xcodebuild  -target  <span class="variable">$projectName</span>  -configuration <span class="variable">$buildConfig</span> clean build SYMROOT=<span class="variable">$buildAppToDir</span></span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"><span class="comment">#åˆ¤æ–­ç¼–è¯‘ç»“æœ</span></span><br><span class="line"><span class="keyword">if</span> <span class="built_in">test</span> $? <span class="_">-eq</span> 0</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"~~~~~~~~~~~~~~~~~~~ç¼–è¯‘æˆåŠŸ~~~~~~~~~~~~~~~~~~~"</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"~~~~~~~~~~~~~~~~~~~ç¼–è¯‘å¤±è´¥~~~~~~~~~~~~~~~~~~~"</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############å¼€å§‹æ‰“åŒ…æˆ.ipa</span></span><br><span class="line">ipaName=`<span class="built_in">echo</span> <span class="variable">$projectName</span> | tr <span class="string">"[:upper:]"</span> <span class="string">"[:lower:]"</span>` <span class="comment">#å°†é¡¹ç›®åè½¬å°å†™</span></span><br><span class="line">findFolderName=`find . -name <span class="string">"<span class="variable">$buildConfig</span>-*"</span> -type d |xargs basename` <span class="comment">#æŸ¥æ‰¾ç›®å½•</span></span><br><span class="line">appDir=<span class="variable">$buildAppToDir</span>/<span class="variable">$findFolderName</span>/  <span class="comment">#appæ‰€åœ¨è·¯å¾„</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"å¼€å§‹æ‰“åŒ…<span class="variable">$projectName</span>.appæˆ<span class="variable">$projectName</span>.ipa....."</span></span><br><span class="line">xcrun -sdk iphoneos PackageApplication -v <span class="variable">$appDir</span>/<span class="variable">$projectName</span>.app -o <span class="variable">$appDir</span>/<span class="variable">$ipaName</span>.ipa <span class="comment">#å°†appæ‰“åŒ…æˆipa</span></span><br><span class="line"></span><br><span class="line"><span class="comment">###############å¼€å§‹æ‹·è´åˆ°ç›®æ ‡ä¸‹è½½ç›®å½•</span></span><br><span class="line"><span class="comment">#æ£€æŸ¥æ–‡ä»¶æ˜¯å¦å­˜åœ¨</span></span><br><span class="line"><span class="keyword">if</span> [ <span class="_">-f</span> <span class="string">"<span class="variable">$appDir</span>/<span class="variable">$ipaName</span>.ipa"</span> ]</span><br><span class="line"><span class="keyword">then</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ‰“åŒ…<span class="variable">$ipaName</span>.ipaæˆåŠŸ."</span></span><br><span class="line"><span class="keyword">else</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ‰“åŒ…<span class="variable">$ipaName</span>.ipaå¤±è´¥."</span></span><br><span class="line"><span class="built_in">exit</span> 1</span><br><span class="line"><span class="keyword">fi</span></span><br><span class="line"></span><br><span class="line">path=<span class="variable">$wwwIPADir</span>/<span class="variable">$projectName</span>$(date +%Y%m%d%H%M%S).ipa</span><br><span class="line">cp <span class="_">-f</span> -p <span class="variable">$appDir</span>/<span class="variable">$ipaName</span>.ipa <span class="variable">$path</span>   <span class="comment">#æ‹·è´ipaæ–‡ä»¶</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"å¤åˆ¶<span class="variable">$ipaName</span>.ipaåˆ°<span class="variable">$&#123;wwwIPADir&#125;</span>æˆåŠŸ"</span></span><br><span class="line"><span class="built_in">echo</span> <span class="string">"~~~~~~~~~~~~~~~~~~~ç»“æŸç¼–è¯‘ï¼Œå¤„ç†æˆåŠŸ~~~~~~~~~~~~~~~~~~~"</span></span><br><span class="line"><span class="comment">#open $wwwIPADir</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#####å¼€å§‹ä¸Šä¼ ï¼Œå¦‚æœåªéœ€è¦æ‰“ipaåŒ…å‡ºæ¥ä¸éœ€è¦ä¸Šä¼ ï¼Œå¯ä»¥åˆ é™¤ä¸‹é¢çš„ä»£ç </span></span><br><span class="line"><span class="built_in">export</span> LANG=en_US</span><br><span class="line"><span class="built_in">export</span> LC_ALL=en_US;</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"æ­£åœ¨ä¸Šä¼ åˆ°fir.im...."</span></span><br><span class="line"><span class="comment">#####http://fir.im/api/v2/app/appID?token=APITokenï¼Œé‡Œé¢çš„appIDæ˜¯ä½ è¦ä¸Šä¼ åº”ç”¨çš„appIDï¼ŒAPITokenæ˜¯ä½ firä¸Šçš„APIToken</span></span><br><span class="line">fir p <span class="variable">$path</span></span><br><span class="line">changelog=`cat <span class="variable">$projectDir</span>/README`</span><br><span class="line">curl -X PUT --data <span class="string">"changelog=<span class="variable">$changelog</span>"</span> http://fir.im/api/v2/app/appID?token=APIToken</span><br><span class="line"><span class="built_in">echo</span> <span class="string">"\næ‰“åŒ…ä¸Šä¼ æ›´æ–°æˆåŠŸï¼"</span></span><br><span class="line">rm -rf <span class="variable">$buildAppToDir</span></span><br><span class="line">rm -rf <span class="variable">$projectDir</span>/tmp</span><br></pre></td></tr></table></figure></p>
<p>ä¸Šé¢å¯¹å…³é”®ä»£ç éƒ½åšäº†è¯¦ç»†è§£é‡Šï¼Œä¸‹é¢åªéœ€è¦æ‰§è¡Œshellè„šæœ¬å°±èƒ½æ‰“åŒ…ä¸Šä¼ äº†ã€‚</p>
<h3 id="æ‰§è¡Œshellè„šæœ¬ï¼Œæ‰“åŒ…ä¸Šä¼ "><a href="#æ‰§è¡Œshellè„šæœ¬ï¼Œæ‰“åŒ…ä¸Šä¼ " class="headerlink" title="æ‰§è¡Œshellè„šæœ¬ï¼Œæ‰“åŒ…ä¸Šä¼ "></a>æ‰§è¡Œshellè„šæœ¬ï¼Œæ‰“åŒ…ä¸Šä¼ </h3><ul>
<li><p>é¦–å…ˆæŠŠè¿™ä¸ªè„šæœ¬æ–‡ä»¶æ”¾åˆ°ä½ çš„é¡¹ç›®å·¥ç¨‹ç›®å½•ä¸‹</p>
</li>
<li><p>ç„¶åæ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°è„šæœ¬æ–‡ä»¶åœ¨çš„ç›®å½•ä¸‹ï¼Œæ‰§è¡Œå‘½å<code>sh build_deployto_fir.sh</code></p>
</li>
</ul>
<p>ç„¶åçœ‹åˆ°ä¸€ä¸‹ç±»ä¼¼çš„ç”»é¢è¯´æ˜ä¸Šä¼ æˆåŠŸï¼š</p>
<p><img src="http://img.blog.csdn.net/20160824113740683" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="æ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"><a href="#æ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ" class="headerlink" title="æ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ"></a>æ‰§è¡Œè„šæœ¬è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜å’Œè§£å†³æ–¹æ¡ˆ</h2><h3 id="fir-command-not-found"><a href="#fir-command-not-found" class="headerlink" title="fir: command not found"></a>fir: command not found</h3><p>è¿™ä¸ªæ˜¯å› ä¸ºæ²¡æœ‰å®‰è£…fir-cilï¼Œå¯¼è‡´æ‰¾ä¸åˆ°ç›¸åº”çš„å‘½ä»¤è¡Œï¼Œåªéœ€è¦å®‰è£…ä¸€ä¸‹å°±è¡Œäº†ï¼Œè¯¦æƒ…è§ä¸Šæ–‡å†™çš„<a href="#APA">å¦‚ä½•å®‰è£…fir-cil</a>ã€‚</p>
<h3 id="README-No-such-file-or-directory"><a href="#README-No-such-file-or-directory" class="headerlink" title="README: No such file or directory"></a>README: No such file or directory</h3><p>é‚£æ˜¯å› ä¸ºä½ çš„è„šæœ¬ç›®å½•ä¸‹æ²¡æœ‰READMEçš„æ–‡ä»¶ï¼Œåªéœ€è¦å»ºä¸€ä¸ªREADMEçš„æ–‡ä»¶å°±è¡Œäº†ï¼Œæ‰“å¼€ç»ˆç«¯ï¼Œcdåˆ°å½“å‰ä½ç½®ï¼Œç„¶åæ‰§è¡Œä¸‹é¢çš„å‘½ä»¤ï¼š<br><figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">touch README</span><br></pre></td></tr></table></figure></p>
<h3 id="ERROR-â€“-Token-can-not-be-blank"><a href="#ERROR-â€“-Token-can-not-be-blank" class="headerlink" title="ERROR â€“ : Token can not be blank"></a>ERROR â€“ : Token can not be blank</h3><p>è¿™ä¸ªåŸå› æ˜¯å› ä¸ºä½ æ²¡æœ‰ç™»å½•firå¯¼è‡´çš„ï¼Œä½ æ‰§è¡Œè¿™ä¸ªè„šæœ¬ä¹‹å‰åº”è¯¥å…ˆç™»å½•ä¸€ä¸‹firï¼Œè¯¦æƒ…è¯·çœ‹ä¸Šæ–‡å†™çš„<a href="#login">ç™»å½•fir.im</a>ã€‚</p>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘å¯¹äºæ‰“åŒ…ä¸Šä¼ åˆ°firä¸Šçš„è„šæœ¬ä½¿ç”¨çš„æ€»ç»“ï¼Œå¦‚æœå¤§å®¶æœ‰é—®é¢˜å¯ä»¥éšæ—¶é—®æˆ‘ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»ã€‚</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 08æœˆ 24æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - å®ç°ç±»ä¼¼ç¾é¢œç›¸æœºçš„ç›¸æœºå¯åŠ¨åŠ¨ç”»]]></title>
      <url>http://imwcl.com/2016/08/16/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E5%AE%9E%E7%8E%B0%E7%B1%BB%E4%BC%BC%E7%BE%8E%E9%A2%9C%E7%9B%B8%E6%9C%BA%E7%9A%84%E7%9B%B8%E6%9C%BA%E5%90%AF%E5%8A%A8%E5%8A%A8%E7%94%BB/</url>
      <content type="html"><![CDATA[<blockquote>
<p>æœ€è¿‘åœ¨å†™ä¸€ä¸ªç›¸å†Œçš„demoï¼Œå¶å°”çœ‹åˆ°äº†ç¾æ‹çš„ç›¸æœºè¿‡è½½åŠ¨ç”»è§‰å¾—å¾ˆæœ‰æ„æ€ï¼Œå°±æƒ³åœ¨æˆ‘çš„ç›¸å†Œdemoä¸­åŠ å…¥ä¸€ä¸ªè¿™ç§ç‰¹æ•ˆï¼Œä¸‹é¢æŠŠæˆ‘çš„æƒ³æ³•å’Œå®ç°è¿‡ç¨‹ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹</p>
</blockquote>
<p>å…ˆä¸Šæ•ˆæœå›¾ï¼šï¼ˆ<a href="https://github.com/631106979/WCLLaunchView" target="_blank" rel="external">demoåœ°å€</a>ï¼‰</p>
<p><img src="http://img.blog.csdn.net/20160816151650272" alt="æ•ˆæœå›¾"></p>
<a id="more"></a>
<h2 id="æ­¥éª¤åˆ†æ"><a href="#æ­¥éª¤åˆ†æ" class="headerlink" title="æ­¥éª¤åˆ†æ"></a>æ­¥éª¤åˆ†æ</h2><p>è¿™ä¸ªåŠ¨æ•ˆçœ‹èµ·æ¥å¾ˆæœ‰ç‰¹è‰²ä½†æ˜¯å®ç°èµ·æ¥æ˜¯éå¸¸ç®€å•çš„ï¼Œåªéœ€è¦ç”¨åˆ°<code>CALayer</code>å’Œ<code>CAShapeLayer</code>åšä¸ºå±•ç¤ºå±‚ï¼Œç„¶åé€šè¿‡<code>CABasicAnimation</code>å®ç°åŠ¨ç”»å°±è¡Œäº†~</p>
<ul>
<li>ç”¨ä¸¤ä¸ª<code>CALayer</code>æ¥å‘ˆç°å¯åŠ¨çš„image</li>
<li>é€šè¿‡<code>UIBezierPath</code>å’Œ<code>CAShapeLayer</code>æ¥ç”»å‡ºå…·æœ‰æ›²çº¿çš„CAShapeLayer</li>
<li>ç„¶åå°†æ›²çº¿çš„<code>CAShapeLayer</code>åšä¸º<code>CALayer</code>çš„mask</li>
<li>æœ€åé€šè¿‡<code>CABasicAnimation</code>åšä¸€ä¸ªç®€å•çš„ä½ç§»åŠ¨ç”»</li>
</ul>
<h2 id="å…ˆç»˜åˆ¶ä¸ŠåŠéƒ¨åˆ†çš„layer"><a href="#å…ˆç»˜åˆ¶ä¸ŠåŠéƒ¨åˆ†çš„layer" class="headerlink" title="å…ˆç»˜åˆ¶ä¸ŠåŠéƒ¨åˆ†çš„layer"></a>å…ˆç»˜åˆ¶ä¸ŠåŠéƒ¨åˆ†çš„layer</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     ç»˜åˆ¶ä¸ŠåŠéƒ¨åˆ†çš„layer</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">configTopShapeLayer</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//ç»˜åˆ¶è´æ–¯å°”æ›²çº¿</span></span><br><span class="line">        <span class="keyword">let</span> topBezier:<span class="type">UIBezierPath</span> = <span class="type">UIBezierPath</span>()</span><br><span class="line">        topBezier.moveToPoint(<span class="type">CGPointMake</span>(-<span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">        topBezier.addLineToPoint(<span class="type">CGPointMake</span>(bounds.width+<span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">        topBezier.addCurveToPoint(<span class="type">CGPointMake</span>(bounds.width/<span class="number">2.0</span>+<span class="number">1</span>, bounds.height/<span class="number">2.0</span>+<span class="number">1</span>), controlPoint1: <span class="type">CGPointMake</span>(bounds.width+<span class="number">1</span>, <span class="number">0</span>+<span class="number">1</span>), controlPoint2: <span class="type">CGPointMake</span>(<span class="number">343.5</span>+<span class="number">1</span>, <span class="number">242.5</span>+<span class="number">1</span>))</span><br><span class="line">        topBezier.addCurveToPoint(<span class="type">CGPointMake</span>(-<span class="number">1</span>, bounds.height+<span class="number">2</span>), controlPoint1: <span class="type">CGPointMake</span>(<span class="number">31.5</span>+<span class="number">2</span>, <span class="number">424.5</span>+<span class="number">2</span>), controlPoint2: <span class="type">CGPointMake</span>(<span class="number">0</span>+<span class="number">2</span>, bounds.height+<span class="number">2</span>))</span><br><span class="line">        topBezier.addLineToPoint(<span class="type">CGPointMake</span>(-<span class="number">1</span>, -<span class="number">1</span>))</span><br><span class="line">        topBezier.closePath()</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªCAShapeLayerï¼Œå°†ç»˜åˆ¶çš„è´æ–¯å°”æ›²çº¿çš„pathç»™CAShapeLayer</span></span><br><span class="line">        <span class="keyword">let</span> topShape = <span class="type">CAShapeLayer</span>()</span><br><span class="line">        topShape.path = topBezier.<span class="type">CGPath</span></span><br><span class="line">        <span class="comment">//ç»™topLayerè®¾ç½®contentsä¸ºå¯åŠ¨å›¾</span></span><br><span class="line">        topLayer.contents = launchImage?.<span class="type">CGImage</span></span><br><span class="line">        topLayer.frame = bounds</span><br><span class="line">        layer.addSublayer(topLayer)</span><br><span class="line">        <span class="comment">//å°†ç»˜åˆ¶åçš„CAShapeLayeråšä¸ºtopLayerçš„mask</span></span><br><span class="line">        topLayer.mask = topShape</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>ç»˜åˆ¶åçš„ç»“æœæ˜¯è¿™æ ·çš„ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160816153408858" alt="ç»˜åˆ¶åçš„ç»“æœ"></p>
<h2 id="ç„¶åä»¥åŒæ ·çš„åŸç†ç»˜åˆ¶ä¸‹åŠéƒ¨åˆ†çš„layer"><a href="#ç„¶åä»¥åŒæ ·çš„åŸç†ç»˜åˆ¶ä¸‹åŠéƒ¨åˆ†çš„layer" class="headerlink" title="ç„¶åä»¥åŒæ ·çš„åŸç†ç»˜åˆ¶ä¸‹åŠéƒ¨åˆ†çš„layer"></a>ç„¶åä»¥åŒæ ·çš„åŸç†ç»˜åˆ¶ä¸‹åŠéƒ¨åˆ†çš„layer</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     ç»˜åˆ¶ä¸‹åŠéƒ¨åˆ†çš„layer</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="function"><span class="keyword">func</span> <span class="title">configBottomShapeLayer</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//ç»˜åˆ¶è´æ–¯å°”æ›²çº¿</span></span><br><span class="line">        <span class="keyword">let</span> bottomBezier:<span class="type">UIBezierPath</span> = <span class="type">UIBezierPath</span>()</span><br><span class="line">        bottomBezier.moveToPoint(<span class="type">CGPointMake</span>(bounds.width, <span class="number">0</span>))</span><br><span class="line">        bottomBezier.addCurveToPoint(<span class="type">CGPointMake</span>(bounds.width/<span class="number">2.0</span>, bounds.height/<span class="number">2.0</span>), controlPoint1: <span class="type">CGPointMake</span>(bounds.width, <span class="number">0</span>), controlPoint2: <span class="type">CGPointMake</span>(<span class="number">343.5</span>, <span class="number">242.5</span>))</span><br><span class="line">        bottomBezier.addCurveToPoint(<span class="type">CGPointMake</span>(<span class="number">0</span>, bounds.height), controlPoint1: <span class="type">CGPointMake</span>(<span class="number">31.5</span>, <span class="number">424.5</span>), controlPoint2: <span class="type">CGPointMake</span>(<span class="number">0</span>, bounds.height))</span><br><span class="line">        bottomBezier.addLineToPoint(<span class="type">CGPointMake</span>(bounds.width, bounds.height))</span><br><span class="line">        bottomBezier.addLineToPoint(<span class="type">CGPointMake</span>(bounds.width, <span class="number">0</span>))</span><br><span class="line">        bottomBezier.closePath()</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªCAShapeLayerï¼Œå°†ç»˜åˆ¶çš„è´æ–¯å°”æ›²çº¿çš„pathç»™CAShapeLayer</span></span><br><span class="line">        <span class="keyword">let</span> bottomShape = <span class="type">CAShapeLayer</span>()</span><br><span class="line">        bottomShape.path = bottomBezier.<span class="type">CGPath</span></span><br><span class="line">        <span class="comment">//ç»™bottomLayerè®¾ç½®contentsä¸ºå¯åŠ¨å›¾</span></span><br><span class="line">        bottomLayer.contents = launchImage?.<span class="type">CGImage</span></span><br><span class="line">        bottomLayer.frame = bounds</span><br><span class="line">        layer.addSublayer(bottomLayer)</span><br><span class="line">        <span class="comment">//å°†ç»˜åˆ¶åçš„CAShapeLayeråšä¸ºbottomLayerçš„mask</span></span><br><span class="line">        bottomLayer.mask = bottomShape</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œæ³¨æ„çš„æ˜¯ç”»çš„è´æ–¯å°”æ›²çº¿ä¸ŠåŠéƒ¨åˆ†çš„è¦æ•´ä½“å‘ä¸‹å¹³ç§»1åˆ°2ä¸ªåƒç´ ï¼Œä¸ºäº†é˜²æ­¢è´æ–¯å°”æ›²çº¿ç”»æ›²çº¿å¯¼è‡´çš„é”¯é½¿æ•ˆæœï¼Œä¸‹é¢æ˜¯ä¸‹åŠéƒ¨åˆ†å®Œæˆåçš„æ•ˆæœå›¾ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160816154025336" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<h2 id="æœ€åç»™ä¸¤ä¸ªlayerä¸€ä¸ªä½ç§»åŠ¨ç”»"><a href="#æœ€åç»™ä¸¤ä¸ªlayerä¸€ä¸ªä½ç§»åŠ¨ç”»" class="headerlink" title="æœ€åç»™ä¸¤ä¸ªlayerä¸€ä¸ªä½ç§»åŠ¨ç”»"></a>æœ€åç»™ä¸¤ä¸ªlayerä¸€ä¸ªä½ç§»åŠ¨ç”»</h2><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line">     å±•å¼€çš„åŠ¨ç”»</span><br><span class="line">     */</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">starAnimation</span><span class="params">()</span></span> &#123;</span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªCABasicAnimationä½œç”¨äºCALayerçš„anchorPoint</span></span><br><span class="line">        <span class="keyword">let</span> topAnimation = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: <span class="string">"anchorPoint"</span>)</span><br><span class="line">        <span class="comment">//è®¾ç½®ç§»åŠ¨è·¯å¾„</span></span><br><span class="line">        topAnimation.toValue = <span class="type">NSValue</span>.<span class="keyword">init</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="number">1</span>, <span class="number">1</span>))</span><br><span class="line">        <span class="comment">//åŠ¨ç”»æ—¶é—´</span></span><br><span class="line">        topAnimation.duration = <span class="number">0.6</span></span><br><span class="line">        <span class="comment">//è®¾ç½®ä»£ç†ï¼Œæ–¹ä¾¿å®ŒæˆåŠ¨ç”»åç§»é™¤å½“å‰view</span></span><br><span class="line">        topAnimation.delegate = <span class="keyword">self</span></span><br><span class="line">        <span class="comment">//è®¾ç½®åŠ¨ç”»é€Ÿåº¦ä¸ºåŒ€é€Ÿ</span></span><br><span class="line">        topAnimation.timingFunction = <span class="type">CAMediaTimingFunction</span>.<span class="keyword">init</span>(name: kCAMediaTimingFunctionLinear)</span><br><span class="line">        <span class="comment">//è®¾ç½®åŠ¨ç”»ç»“æŸåä¸ç§»é™¤ç‚¹ï¼Œä¿æŒç§»åŠ¨åçš„ä½ç½®</span></span><br><span class="line">        topAnimation.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">        topAnimation.fillMode = kCAFillModeForwards</span><br><span class="line">        topLayer.addAnimation(topAnimation, forKey: <span class="string">"topAnimation"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//åˆ›å»ºä¸€ä¸ªCABasicAnimationä½œç”¨äºCALayerçš„anchorPoint</span></span><br><span class="line">        <span class="keyword">let</span> bottomAnimation = <span class="type">CABasicAnimation</span>.<span class="keyword">init</span>(keyPath: <span class="string">"anchorPoint"</span>)</span><br><span class="line">        <span class="comment">//è®¾ç½®ç§»åŠ¨è·¯å¾„</span></span><br><span class="line">        bottomAnimation.toValue = <span class="type">NSValue</span>.<span class="keyword">init</span>(<span class="type">CGPoint</span>: <span class="type">CGPointMake</span>(<span class="number">0</span>, <span class="number">0</span>))</span><br><span class="line">        <span class="comment">//åŠ¨ç”»æ—¶é—´</span></span><br><span class="line">        bottomAnimation.duration = <span class="number">0.6</span></span><br><span class="line">        <span class="comment">//è®¾ç½®åŠ¨ç”»é€Ÿåº¦ä¸ºåŒ€é€Ÿ</span></span><br><span class="line">        bottomAnimation.timingFunction = <span class="type">CAMediaTimingFunction</span>.<span class="keyword">init</span>(name: kCAMediaTimingFunctionLinear)</span><br><span class="line">        <span class="comment">//è®¾ç½®åŠ¨ç”»ç»“æŸåä¸ç§»é™¤ç‚¹ï¼Œä¿æŒç§»åŠ¨åçš„ä½ç½®</span></span><br><span class="line">        bottomAnimation.removedOnCompletion = <span class="literal">false</span></span><br><span class="line">        bottomAnimation.fillMode = kCAFillModeForwards</span><br><span class="line">        bottomLayer.addAnimation(bottomAnimation, forKey: <span class="string">"topAnimation"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">        <span class="comment">/**</span><br><span class="line">     åŠ¨ç”»å®Œæˆåç§»é™¤å½“å‰view</span><br><span class="line">     */</span></span><br><span class="line">    <span class="keyword">internal</span> <span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">animationDidStop</span><span class="params">(anim: CAAnimation, finished flag: Bool)</span></span>           </span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">if</span> flag &#123;</span><br><span class="line">            removeFromSuperview()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p>è¿™é‡Œä¸ºäº†æ–¹ä¾¿è§‚å¯Ÿï¼Œæˆ‘å°†åŠ¨ç”»æ—¶é—´å˜é•¿äº†ï¼Œä¸‹é¢æ˜¯å®Œæˆåçš„æ•ˆæœå›¾ï¼š</p>
<p><img src="http://img.blog.csdn.net/20160816154817167" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<blockquote>
<p>åˆ°è¿™é‡Œè¿™ä¸ªåŠ¨æ•ˆå°±å®Œæˆçš„å·®ä¸å¤šäº†ï¼Œå¸Œæœ›å¤§å®¶èƒ½å­¦åˆ°ä¸œè¥¿ï¼Œå¦‚æœå¤§å®¶æœ‰æ›´å¥½çš„å®ç°åŠæ³•ä¹Ÿå¯ä»¥ç»™æˆ‘ææ„è§ï¼Œæˆ‘å­¦ä¹ å­¦ä¹ ï¼Œè°¢è°¢å¤§å®¶è§‚çœ‹ï¼Œå¦å¤–é™„åŠ <a href="https://github.com/631106979/WCLLaunchView" target="_blank" rel="external">demoåœ°å€</a>ï¼Œå–œæ¬¢çš„å¯ä»¥å…³æ³¨ä¸€ä¸‹</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 08æœˆ 16æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - éšè—UINavigationBarçš„å°æŠ€å·§]]></title>
      <url>http://imwcl.com/2016/07/28/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E9%9A%90%E8%97%8FUINavigationBar%E7%9A%84%E5%B0%8F%E6%8A%80%E5%B7%A7/</url>
      <content type="html"><![CDATA[<blockquote>
<p>åœ¨å¼€å‘è¿‡ç¨‹ä¸­ï¼Œä¸ºè®©å±å¹•æ˜¾ç¤ºæ›´å¤šçš„å†…å®¹ï¼Œæœ‰æ—¶å€™è®¾è®¡å¸ˆä¼šè®©æˆ‘ä»¬éšè—UINavigationBarï¼Œé€šè¿‡æµè§ˆå¤§ç¥ä»¬å†™çš„æ–‡ç« å’Œå·¥ä½œä¸Šç”¨åˆ°çš„ï¼Œæ€»ç»“äº†ä¸€ä¸‹éšè—UINavigationBarçš„ä¸‰ç§æ•ˆæœï¼Œç”¨swiftå†™äº†ä¸€ä»½ï¼Œä¾›å­¦ä¹ ä½¿ç”¨~~~</p>
</blockquote>
<p><a href="https://github.com/631106979/WCLHideNavBar" target="_blank" rel="external">demoåœ°å€</a></p>
<h3 id="ç¬¬ä¸€ç§è®©UINavigationBaré€æ˜æ¸å˜æ¶ˆå¤±"><a href="#ç¬¬ä¸€ç§è®©UINavigationBaré€æ˜æ¸å˜æ¶ˆå¤±" class="headerlink" title="ç¬¬ä¸€ç§è®©UINavigationBaré€æ˜æ¸å˜æ¶ˆå¤±"></a>ç¬¬ä¸€ç§è®©UINavigationBaré€æ˜æ¸å˜æ¶ˆå¤±</h3><p><img src="http://img.blog.csdn.net/20160728230823825" alt="ç¬¬ä¸€ç§æ¸å˜"></p>
<p>æ€è·¯æ˜¯å†™ä¸€ä¸ªæ‰©å±•ï¼Œå…ˆç»™UINavigationBarçš„backGroudImageè®¾ç½®ä¸ºç©ºï¼Œç„¶ååœ¨UINavigationBarä¸Šé€šè¿‡runtimeæ’å…¥ä¸€ä¸ªUIViewï¼Œç„¶åç›‘å¬æ»šåŠ¨äº‹ä»¶ï¼Œè°ƒæ•´è¿™ä¸ªUIViewçš„é€æ˜åº¦æ¥è¾¾åˆ°è¿™ä¸ªæ•ˆæœï¼Œä¸‹é¢è´´ä»£ç ï¼š<br><a id="more"></a><br><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">    <span class="comment">/**</span><br><span class="line"> ç»™UINavigationBaræ·»åŠ èƒŒæ™¯è‰²ï¼Œç”¨runtimeæ’å…¥ä¸€ä¸ªbackView</span><br><span class="line"> </span><br><span class="line"> - parameter color: backViewçš„èƒŒæ™¯é¢œè‰²</span><br><span class="line"> </span><br><span class="line"> - returns: è¿”å›UINavigationBaræœ¬èº«</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setWclBackGroundColor</span><span class="params">(color:UIColor)</span></span> -&gt; <span class="type">UINavigationBar</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> wclBackGroundColorView = objc_getAssociatedObject(<span class="keyword">self</span>, &amp;wclBackView) <span class="keyword">as</span>? <span class="type">UIView</span></span><br><span class="line">    <span class="keyword">if</span> wclBackGroundColorView == <span class="literal">nil</span> &#123;</span><br><span class="line">        setBackgroundImage(<span class="type">UIImage</span>.<span class="keyword">init</span>(), forBarMetrics: .<span class="type">Default</span>)</span><br><span class="line">        shadowImage = <span class="type">UIImage</span>.<span class="keyword">init</span>()</span><br><span class="line">        <span class="keyword">let</span> backView = <span class="type">UIView</span>.<span class="keyword">init</span>(frame: <span class="type">CGRectMake</span>(<span class="number">0</span>, -<span class="number">20</span>, bounds.width, bounds.height+<span class="number">20</span>))</span><br><span class="line">        backView.backgroundColor = color</span><br><span class="line">        backView.userInteractionEnabled = <span class="literal">false</span></span><br><span class="line">        backView.autoresizingMask = [.<span class="type">FlexibleHeight</span>, .<span class="type">FlexibleWidth</span>]</span><br><span class="line">        insertSubview(backView, atIndex: <span class="number">0</span>)</span><br><span class="line">        objc_setAssociatedObject(<span class="keyword">self</span>, &amp;wclBackView, backView, .<span class="type">OBJC_ASSOCIATION_RETAIN_NONATOMIC</span>)</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        wclBackGroundColorView!.backgroundColor = color</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span><br><span class="line"> è®¾ç½®backViewçš„é€æ˜åº¦</span><br><span class="line"> </span><br><span class="line"> - parameter alpha: backViewçš„é€æ˜åº¦</span><br><span class="line"> </span><br><span class="line"> - returns: è¿”å›UINavigationBaræœ¬èº«</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setWclBackViewAlpha</span><span class="params">(alpha:CGFloat)</span></span> -&gt; <span class="type">UINavigationBar</span> &#123;</span><br><span class="line">    <span class="keyword">let</span> wclBackGroundColorView = objc_getAssociatedObject(<span class="keyword">self</span>, &amp;wclBackView) <span class="keyword">as</span>? <span class="type">UIView</span></span><br><span class="line">    wclBackGroundColorView?.alpha = alpha</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h3 id="ç¬¬äºŒç§è®©UINavigationBarå‘ä¸Šä½ç§»ï¼Œå¹¶ä¸”UINavigationBarä¸Šçš„viewé€æ˜æ¸å˜"><a href="#ç¬¬äºŒç§è®©UINavigationBarå‘ä¸Šä½ç§»ï¼Œå¹¶ä¸”UINavigationBarä¸Šçš„viewé€æ˜æ¸å˜" class="headerlink" title="ç¬¬äºŒç§è®©UINavigationBarå‘ä¸Šä½ç§»ï¼Œå¹¶ä¸”UINavigationBarä¸Šçš„viewé€æ˜æ¸å˜"></a>ç¬¬äºŒç§è®©UINavigationBarå‘ä¸Šä½ç§»ï¼Œå¹¶ä¸”UINavigationBarä¸Šçš„viewé€æ˜æ¸å˜</h3><p><img src="http://img.blog.csdn.net/20160728231529840" alt="ç¬¬äºŒç§æ•ˆæœ"></p>
<p>ä¸»è¦æ€è·¯ä¹Ÿæ˜¯é€šè¿‡æ‰©å±•å®ç°ï¼Œé€šè¿‡æ”¹å˜UINavigationBarçš„transformæ¥è¾¾åˆ°ä½ç§»çš„æ•ˆæœï¼Œç„¶åé€šè¿‡KVCæ¥è·å–åˆ°UINavigationBarä¸Šçš„subViewsæ¥è¾¾åˆ°å®ƒçš„å­viewçš„é€æ˜æ¸å˜æ•ˆæœï¼Œä¸‹é¢ä¸Šä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> å‘ä¸Šéšè—NavigationBar</span><br><span class="line"> </span><br><span class="line"> - parameter progress: éšè—çš„è¿›åº¦ï¼Œé»˜è®¤æ˜¯0ï¼ŒèŒƒå›´0~1</span><br><span class="line"> </span><br><span class="line"> - returns: è¿”å›UINavigationBaræœ¬èº«</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setWclNavBarHide</span><span class="params">(progress:CGFloat)</span></span> -&gt; <span class="type">UINavigationBar</span> &#123;</span><br><span class="line">    <span class="built_in">print</span>(progress)</span><br><span class="line">    <span class="keyword">if</span> progress &gt; <span class="number">0</span> &#123;</span><br><span class="line">        transform = <span class="type">CGAffineTransformTranslate</span>(<span class="type">CGAffineTransformIdentity</span>, <span class="number">0</span>, -bounds.height*progress)</span><br><span class="line">    &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">        transform = <span class="type">CGAffineTransformTranslate</span>(<span class="type">CGAffineTransformIdentity</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> leftViews = valueForKey(<span class="string">"_leftViews"</span>) <span class="keyword">as</span>? [<span class="type">UIView</span>] &#123;</span><br><span class="line">        <span class="keyword">for</span> leftView <span class="keyword">in</span> leftViews &#123;</span><br><span class="line">            leftView.alpha = <span class="number">1</span> - progress</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> rightViews = valueForKey(<span class="string">"_rightViews"</span>) <span class="keyword">as</span>? [<span class="type">UIView</span>] &#123;</span><br><span class="line">        <span class="keyword">for</span> rightView <span class="keyword">in</span> rightViews &#123;</span><br><span class="line">            rightView.alpha = <span class="number">1</span> - progress</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> titleView = valueForKey(<span class="string">"_titleView"</span>) <span class="keyword">as</span>? <span class="type">UIView</span> &#123;</span><br><span class="line">        titleView.alpha = <span class="number">1</span> - progress</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="ç¬¬ä¸‰ç§UINavigationBarå’Œwindowçš„çŠ¶æ€æ ä¸€èµ·å‘ä¸Šä½ç§»"><a href="#ç¬¬ä¸‰ç§UINavigationBarå’Œwindowçš„çŠ¶æ€æ ä¸€èµ·å‘ä¸Šä½ç§»" class="headerlink" title="ç¬¬ä¸‰ç§UINavigationBarå’Œwindowçš„çŠ¶æ€æ ä¸€èµ·å‘ä¸Šä½ç§»"></a>ç¬¬ä¸‰ç§UINavigationBarå’Œwindowçš„çŠ¶æ€æ ä¸€èµ·å‘ä¸Šä½ç§»</h3><p><img src="http://img.blog.csdn.net/20160728232320140" alt="ç¬¬ä¸‰ç§"></p>
<p>ä¸»è¦æ€è·¯ä¹Ÿæ˜¯é€šè¿‡æ‰©å±•å®ç°ï¼Œé€šè¿‡æ”¹å˜UINavigationBarçš„transformæ¥è¾¾åˆ°ä½ç§»çš„æ•ˆæœï¼Œç„¶åé€šè¿‡KVCæ¥è·å–windowçš„çŠ¶æ€æ ä¸€èµ·è¿›è¡Œåç§»ï¼Œä¸‹é¢ä¸Šä»£ç ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span><br><span class="line"> å‘ä¸Šéšè—NavigationBarå’ŒStateView</span><br><span class="line"> </span><br><span class="line"> - parameter progress: éšè—çš„è¿›åº¦ï¼Œé»˜è®¤æ˜¯0ï¼ŒèŒƒå›´0~1</span><br><span class="line"> </span><br><span class="line"> - returns: è¿”å›UINavigationBaræœ¬èº«</span><br><span class="line"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">setWclNavBarAndStateHide</span><span class="params">(progress:CGFloat)</span></span> -&gt; <span class="type">UINavigationBar</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> <span class="keyword">let</span> stateView = <span class="type">UIApplication</span>.sharedApplication().valueForKey(<span class="string">"statusBarWindow"</span>) <span class="keyword">as</span>? <span class="type">UIView</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> progress &gt; <span class="number">0</span> &#123;</span><br><span class="line">            transform = <span class="type">CGAffineTransformTranslate</span>(<span class="type">CGAffineTransformIdentity</span>, <span class="number">0</span>, -(bounds.height+<span class="number">20</span>)*progress)</span><br><span class="line">            stateView.transform = <span class="type">CGAffineTransformTranslate</span>(<span class="type">CGAffineTransformIdentity</span>, <span class="number">0</span>, -(bounds.height+<span class="number">20</span>)*progress)</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            transform = <span class="type">CGAffineTransformTranslate</span>(<span class="type">CGAffineTransformIdentity</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line">            stateView.transform = <span class="type">CGAffineTransformTranslate</span>(<span class="type">CGAffineTransformIdentity</span>, <span class="number">0</span>, <span class="number">0</span>)</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">self</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><a href="https://github.com/631106979/WCLHideNavBar" target="_blank" rel="external">demoåœ°å€</a></p>
<p><a href="https://github.com/ltebean/LTNavigationBar" target="_blank" rel="external">å‚è€ƒæ–‡æ¡£</a></p>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯æˆ‘æ€»ç»“çš„å…³äºä¸‰ç§éšè—UINavigationBarçš„ä¸‰ç§å‘é€ï¼Œæ¬¢è¿å¤§å®¶ä¸€èµ·äº¤æµï¼Œå¦‚æœæœ‰æ›´å¥½çš„å¯ä»¥ä¸€èµ·å­¦ä¹ </p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 07æœˆ 28æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[GCDæ·±å…¥å­¦ä¹ ä¹‹GCDçš„åˆè¯†]]></title>
      <url>http://imwcl.com/2016/06/27/GCD%E6%B7%B1%E5%85%A5%E5%AD%A6%E4%B9%A0%E4%B9%8BGCD%E7%9A%84%E5%88%9D%E8%AF%86/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ç°åœ¨ç½‘ä¸Šå…³äºGCDçš„ä»‹ç»å·²ç»å¾ˆå¤šäº†ï¼Œåœ¨é¡¹ç›®ä¸­ä¹Ÿç»å¸¸ç”¨åˆ°ï¼Œä½†æ˜¯æ²¡æ€ä¹ˆæ·±å…¥ç ”ç©¶è¿‡ï¼Œæ‰“ç®—å†™ä¸€ç³»åˆ—å…³äºGCDä½¿ç”¨ï¼Œå‚è€ƒå…¶ä»–å¤§ç¥å†™çš„åšå®¢å’ŒAppleçš„æŠ€æœ¯æ–‡æ¡£æ€»ç»“ä¸€ä¸‹ï¼Œä¸€æ˜¯è‡ªå·±æ·±å…¥å­¦ä¹ ä¸€ä¸‹ï¼ŒäºŒæ˜¯ä»¥åå¿˜äº†å¯ä»¥å›è¿‡å¤´æ¥æ¸©ä¹ ä¸€ä¸‹~</p>
</blockquote>
<h2 id="ä»€ä¹ˆæ˜¯GCD"><a href="#ä»€ä¹ˆæ˜¯GCD" class="headerlink" title="ä»€ä¹ˆæ˜¯GCD?"></a>ä»€ä¹ˆæ˜¯GCD?</h2><p>GCDå…¨åæ˜¯Grand Central Dispatchï¼ˆå¤§ä¸­å¤®è°ƒåº¦å™¨ï¼‰ï¼Œæ˜¯ç³»ç»Ÿçº§çš„ï¼Œå­˜åœ¨äºlibdispatch.dylibè¿™ä¸ªåº“é‡Œï¼Œæ˜¯Appleå¼€å‘çš„ä¸€ä¸ªå¤šæ ¸ç¼–ç¨‹çš„è§£å†³æ–¹æ³•ï¼Œå®ƒæä¾›äº†ä¸€ä¸‹å‡ ç§å¥½å¤„ï¼š</p>
<ul>
<li>GCDç”¨çº¯Cç¼–å†™ï¼Œå¯ä»¥æé«˜åº”ç”¨ç¨‹åºçš„å“åº”èƒ½åŠ›ï¼Œæ›´åŠ é«˜æ•ˆï¼›</li>
<li>GCDä½¿ç”¨ç®€å•ï¼Œä¼šè‡ªåŠ¨åˆ©ç”¨æ›´å¤šçš„CPUå†…æ ¸ï¼ˆæ¯”å¦‚åŒæ ¸ã€å››æ ¸ï¼‰ï¼Œè‡ªåŠ¨ç®¡ç†çº¿ç¨‹çš„ç”Ÿå‘½å‘¨æœŸï¼ˆåˆ›å»ºçº¿ç¨‹ã€è°ƒåº¦ä»»åŠ¡ã€é”€æ¯çº¿ç¨‹ï¼‰ï¼Œç¨‹åºå‘˜åªéœ€è¦å‘Šè¯‰GCDæƒ³è¦æ‰§è¡Œä»€ä¹ˆä»»åŠ¡ï¼Œä¸éœ€è¦ç¼–å†™ä»»ä½•çº¿ç¨‹ç®¡ç†ä»£ç ï¼Œæä¾›æ›´å®¹æ˜“å¹¶å‘æ¨¡å‹ï¼Œæœ‰åŠ©äºé¿å…å¹¶å‘é”™è¯¯ã€‚</li>
</ul>
<a id="more"></a>
<h2 id="GCDçš„ç›¸å…³æœ¯è¯­"><a href="#GCDçš„ç›¸å…³æœ¯è¯­" class="headerlink" title="GCDçš„ç›¸å…³æœ¯è¯­"></a>GCDçš„ç›¸å…³æœ¯è¯­</h2><p>è¦äº†è§£GCDï¼Œä½ å¿…é¡»ç†Ÿæ‚‰ç›¸å…³çš„çº¿ç¨‹å’Œå¹¶å‘çš„å‡ ä¸ªæ¦‚å¿µã€‚è¿™äº›æ—¢å¯ä»¥æ˜¯æ¨¡ç³Šçš„ï¼Œå¾®å¦™çš„ï¼Œæ‰€ä»¥èŠ±ç‚¹æ—¶é—´åœ¨GCDçš„èƒŒæ™¯ä¸‹ç®€è¦å›é¡¾ä¸€ä¸‹ä»–ä»¬ã€‚</p>
<h3 id="ä¸²è¡Œå’Œå¹¶å‘"><a href="#ä¸²è¡Œå’Œå¹¶å‘" class="headerlink" title="ä¸²è¡Œå’Œå¹¶å‘"></a>ä¸²è¡Œå’Œå¹¶å‘</h3><p>åœ¨æ‰§è¡Œä»»åŠ¡æ—¶ï¼Œä¸²è¡Œæ˜¯ä»»åŠ¡é¡ºåºæ‰§è¡Œï¼Œæ‰§è¡Œå®Œä¸€ä¸ªä¸‹ä¸€ä¸ªã€‚å¹¶å‘å°±æ˜¯ä»»åŠ¡å¯èƒ½åŒæ—¶æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚åœ¨GCDä¸­ä¸€ä¸ªä»»åŠ¡å°±æ˜¯ä¸€ä¸ªé—­åŒ…ï¼Œè¿™æ¯”NSOperationä¸­çš„ä»»åŠ¡æ›´åŠ å®¹æ˜“ç†è§£ã€‚</p>
<h3 id="åŒæ­¥å’Œå¼‚æ­¥"><a href="#åŒæ­¥å’Œå¼‚æ­¥" class="headerlink" title="åŒæ­¥å’Œå¼‚æ­¥"></a>åŒæ­¥å’Œå¼‚æ­¥</h3><p>åœ¨è®¡ç®—æœºé¢†åŸŸï¼ŒåŒæ­¥å°±æ˜¯æŒ‡ä¸€ä¸ªè¿›ç¨‹åœ¨æ‰§è¡ŒæŸä¸ªè¯·æ±‚çš„æ—¶å€™ï¼Œè‹¥è¯¥è¯·æ±‚éœ€è¦ä¸€æ®µæ—¶é—´æ‰èƒ½è¿”å›ä¿¡æ¯ï¼Œé‚£ä¹ˆè¿™ä¸ªè¿›ç¨‹å°†ä¼šä¸€ç›´ç­‰å¾…ä¸‹å»ï¼Œç›´åˆ°æ”¶åˆ°è¿”å›ä¿¡æ¯æ‰ç»§ç»­æ‰§è¡Œä¸‹å»ï¼›å¼‚æ­¥æ˜¯æŒ‡è¿›ç¨‹ä¸éœ€è¦ä¸€ç›´ç­‰ä¸‹å»ï¼Œè€Œæ˜¯ç»§ç»­æ‰§è¡Œä¸‹é¢çš„æ“ä½œï¼Œä¸ç®¡å…¶ä»–è¿›ç¨‹çš„çŠ¶æ€ã€‚å½“æœ‰æ¶ˆæ¯è¿”å›æ—¶ç³»ç»Ÿä¼šé€šçŸ¥è¿›ç¨‹è¿›è¡Œå¤„ç†ï¼Œè¿™æ ·å¯ä»¥æé«˜æ‰§è¡Œçš„æ•ˆç‡ã€‚</p>
<h3 id="ä¸´ç•ŒåŒº"><a href="#ä¸´ç•ŒåŒº" class="headerlink" title="ä¸´ç•ŒåŒº"></a>ä¸´ç•ŒåŒº</h3><p>é€šè¿‡å¯¹å¤šçº¿ç¨‹çš„ä¸²è¡ŒåŒ–æ¥è®¿é—®å…¬å…±èµ„æºæˆ–ä¸€æ®µä»£ç ï¼Œé€Ÿåº¦å¿«ï¼Œé€‚åˆæ§åˆ¶æ•°æ®è®¿é—®ã€‚åœ¨ä»»æ„æ—¶åˆ»åªå…è®¸ä¸€ä¸ªçº¿ç¨‹å¯¹å…±äº«èµ„æºè¿›è¡Œè®¿é—®ï¼Œå¦‚æœæœ‰å¤šä¸ªçº¿ç¨‹è¯•å›¾è®¿é—®å…¬å…±èµ„ æºï¼Œé‚£ä¹ˆåœ¨æœ‰ä¸€ä¸ªçº¿ç¨‹è¿›å…¥åï¼Œå…¶ä»–è¯•å›¾è®¿é—®å…¬å…±èµ„æºçš„çº¿ç¨‹å°†è¢«æŒ‚èµ·ï¼Œå¹¶ä¸€ç›´ç­‰åˆ°è¿›å…¥ä¸´ç•ŒåŒºçš„çº¿ç¨‹ç¦»å¼€ï¼Œä¸´ç•ŒåŒºåœ¨è¢«é‡Šæ”¾åï¼Œå…¶ä»–çº¿ç¨‹æ‰å¯ä»¥æŠ¢å ã€‚</p>
<h3 id="æ­»é”"><a href="#æ­»é”" class="headerlink" title="æ­»é”"></a>æ­»é”</h3><p>æ˜¯æŒ‡ä¸¤ä¸ªæˆ–ä¸¤ä¸ªä»¥ä¸Šçš„è¿›ç¨‹åœ¨æ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œç”±äºç«äº‰èµ„æºæˆ–è€…ç”±äºå½¼æ­¤é€šä¿¡è€Œé€ æˆçš„ä¸€ç§é˜»å¡çš„ç°è±¡ï¼Œè‹¥æ— å¤–åŠ›ä½œç”¨ï¼Œå®ƒä»¬éƒ½å°†æ— æ³•æ¨è¿›ä¸‹å»ã€‚æ­¤æ—¶ç§°ç³»ç»Ÿå¤„äºæ­»é”çŠ¶æ€æˆ–ç³»ç»Ÿäº§ç”Ÿäº†æ­»é”ï¼Œè¿™äº›æ°¸è¿œåœ¨äº’ç›¸ç­‰å¾…çš„è¿›ç¨‹ç§°ä¸ºæ­»é”è¿›ç¨‹ï¼Œç®€å•æ¥è¯´å°±æ˜¯Açº¿ç¨‹åœ¨ç­‰å¾…Bçº¿ç¨‹å®Œæˆåæ‰§è¡Œï¼ŒBçº¿ç¨‹ä¹Ÿåœ¨ç­‰å¾…Açº¿ç¨‹å®Œæˆåæ‰§è¡Œï¼Œè¿™æ ·å°±å‡ºç°äº†æ­»é”çš„ç°è±¡ã€‚</p>
<h3 id="çº¿ç¨‹å®‰å…¨"><a href="#çº¿ç¨‹å®‰å…¨" class="headerlink" title="çº¿ç¨‹å®‰å…¨"></a>çº¿ç¨‹å®‰å…¨</h3><p>çº¿ç¨‹å®‰å…¨çš„ä»£ç å¯ä»¥ä»å¤šä¸ªçº¿ç¨‹æˆ–å¹¶å‘ä»»åŠ¡å®‰å…¨åœ°è°ƒç”¨ï¼Œè€Œä¸ä¼šé€ æˆä»»ä½•é—®é¢˜ï¼ˆæ•°æ®æŸåï¼Œç³»ç»Ÿå´©æºƒç­‰ï¼‰ã€‚ä¾‹å¦‚å½“ä½ å¤šçº¿ç¨‹ç¼–ç¨‹æ—¶ï¼Œä½ ç”¨letå®šä¹‰ä¸€ä¸ªæ•°ç»„ï¼Œå› ä¸ºå®ƒæ˜¯åªè¯»çš„ï¼Œä½ èƒ½åœ¨åŒä¸€æ—¶é—´ä¸åŒçº¿ç¨‹å»ä½¿ç”¨å®ƒï¼Œè€Œä¸ä¼šé€ æˆçº¿ç¨‹å®‰å…¨çš„é—®é¢˜ï¼Œç„¶è€Œå½“ä½ ç”¨varå®šä¹‰ä¸€ä¸ªæ•°ç»„æ—¶å°±ä¸ä¸€æ ·äº†ï¼Œå®ƒä¸æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œå½“å¤šä¸ªçº¿ç¨‹åœ¨åŒä¸€æ—¶é—´è®¿é—®å’Œä¿®æ”¹æ•°ç»„æ—¶ä¼šäº§ç”Ÿä¸å¯é¢„çŸ¥çš„ç»“æœã€‚</p>
<h3 id="ä¸Šä¸‹æ–‡åˆ‡æ¢"><a href="#ä¸Šä¸‹æ–‡åˆ‡æ¢" class="headerlink" title="ä¸Šä¸‹æ–‡åˆ‡æ¢"></a>ä¸Šä¸‹æ–‡åˆ‡æ¢</h3><p>ä¸Šä¸‹æ–‡åˆ‡æ¢æ˜¯å­˜å‚¨å’Œæ¢å¤æ‰§è¡Œçš„çŠ¶æ€ï¼Œæ˜¯ä½ åœ¨ä¸€ä¸ªè¿›ç¨‹ä¸­æ‰§è¡Œä¸åŒçš„çº¿ç¨‹ä¹‹é—´åˆ‡æ¢çš„è¿‡ç¨‹ã€‚è¿™ä¸ªè¿‡ç¨‹æ˜¯ç¼–å†™å¤šä»»åŠ¡å¤„ç†åº”ç”¨ç¨‹åºæ—¶å¾ˆå¸¸è§ï¼Œä½†ä¹Ÿå¸¦æ¥äº†ä¸€äº›é¢å¤–çš„å¼€é”€æˆæœ¬ã€‚å°±åƒå¹¶å‘å°±æ˜¯é€šè¿‡åˆ‡æ¢ä¸Šä¸‹æ–‡æ¥å®ç°çš„ã€‚</p>
<h3 id="å¹¶å‘å’Œå¹¶è¡Œ"><a href="#å¹¶å‘å’Œå¹¶è¡Œ" class="headerlink" title="å¹¶å‘å’Œå¹¶è¡Œ"></a>å¹¶å‘å’Œå¹¶è¡Œ</h3><p>åœ¨å¤šæ ¸è®¾å¤‡ä¸Šæ‰§è¡Œä»»åŠ¡æ—¶ï¼Œæ¯ä¸ªCPUå¯ä»¥å•ç‹¬å·¥ä½œï¼Œæ¯ä¸ªCPUåŒæ—¶æ‰§è¡Œä¸åŒçš„ä»»åŠ¡ï¼Œè¿™å°±æ˜¯å¹¶è¡Œï¼Œç„¶è€Œä¸ºäº†ä½¿å•æ ¸çš„è®¾å¤‡å®ç°è¿™ç§æ•ˆæœè¾¾åˆ°ç±»ä¼¼çš„æ•ˆæœï¼Œåº”ä¸ºå®ƒä»¬åªæœ‰ä¸€ä¸ªçº¿ç¨‹ï¼Œå®ƒä»¬åªèƒ½é€šè¿‡å¿«é€Ÿçš„ä¸Šä¸‹æ–‡åˆ‡æ¢æ¥è¾¾åˆ°å¹¶è¡Œçš„å‡è±¡ï¼Œè¿™å°±æ˜¯å¹¶å‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://www.raywenderlich.com/wp-content/uploads/2014/01/Concurrency_vs_Parallelism.png" alt="å¹¶å‘"></p>
<h2 id="GCDé˜Ÿåˆ—"><a href="#GCDé˜Ÿåˆ—" class="headerlink" title="GCDé˜Ÿåˆ—"></a>GCDé˜Ÿåˆ—</h2><p>GCDç”¨<strong>dispatch queues</strong>æ¥å¤„ç†æäº¤çš„ä»»åŠ¡ï¼Œé˜Ÿåˆ—ç”¨æ¥FIFOï¼ˆå…ˆè¿›å…ˆå‡ºï¼‰çš„åŸç†æ¥ç®¡ç†è¿™äº›ä»»åŠ¡ï¼Œæ‰€æœ‰çš„<strong>dispatch queues</strong>æœ¬èº«æ˜¯çº¿ç¨‹å®‰å…¨çš„ï¼Œä½ å¯ä»¥ä»å¤šä¸ªçº¿ç¨‹å»è®¿é—®å®ƒä»¬ï¼Œåœ¨GCD ä¸­æä¾›äº†ä¸¤ç§é˜Ÿåˆ—ï¼Œåˆ†åˆ«æ˜¯ä¸²è¡Œé˜Ÿåˆ—å’Œå¹¶å‘é˜Ÿåˆ—ã€‚</p>
<h3 id="ä¸²è¡Œé˜Ÿåˆ—"><a href="#ä¸²è¡Œé˜Ÿåˆ—" class="headerlink" title="ä¸²è¡Œé˜Ÿåˆ—"></a>ä¸²è¡Œé˜Ÿåˆ—</h3><p>ä¸²è¡Œé˜Ÿåˆ—ä¿è¯åŒä¸€æ—¶é—´é˜Ÿåˆ—é‡Œåªæœ‰ä¸€ä¸ªä»»åŠ¡åœ¨æ‰§è¡Œï¼Œåªæœ‰ç­‰å¾…ç¬¬ä¸€ä¸ªä»»åŠ¡æ‰§è¡Œå®Œæˆåæ‰ä¼šæ‰§è¡Œä¸‹ä¸€ä¸ªä»»åŠ¡ï¼Œä½ ä¹Ÿä¸çŸ¥é“ä¸¤ä¸ªä»»åŠ¡ä¹‹é—´çš„é—´éš”æ—¶é—´æ˜¯å¤šå°‘ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://www.raywenderlich.com/wp-content/uploads/2014/09/Serial-Queue-Swift.png" alt="ä¸²å·é˜Ÿåˆ—"></p>
<p>ä½¿ç”¨ä¸²è¡Œé˜Ÿåˆ—æœ‰ä¸€ä¸‹çš„ä¼˜ç‚¹ï¼š</p>
<ol>
<li>èƒ½ç¡®ä¿å¯¹ä¸€ä¸ªå…±äº«èµ„æºè¿›è¡Œä¸²è¡ŒåŒ–çš„è®¿é—®ï¼Œé¿å…äº†æ•°æ®ç«äº‰ï¼›</li>
<li>ä»»åŠ¡çš„æ‰§è¡Œé¡ºåºæ˜¯å¯é¢„çŸ¥çš„ï¼Œä½ å‘ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—æäº¤ä»»åŠ¡æ—¶ï¼Œå®ƒä»¬è¢«æ‰§è¡Œçš„é¡º  åºä¸å®ƒä»¬è¢«æäº¤çš„é¡ºåºç›¸åŒï¼›</li>
</ol>
<h3 id="å¹¶å‘é˜Ÿåˆ—"><a href="#å¹¶å‘é˜Ÿåˆ—" class="headerlink" title="å¹¶å‘é˜Ÿåˆ—"></a>å¹¶å‘é˜Ÿåˆ—</h3><p>å¹¶å‘é˜Ÿåˆ—å¯ä»¥è®©ä½ å¹¶è¡Œçš„æ‰§è¡Œå¤šä¸ªä»»åŠ¡ã€‚ä»»åŠ¡æŒ‰ç…§å®ƒä»¬è¢«åŠ å…¥åˆ°é˜Ÿåˆ—ä¸­çš„é¡ºåºä¾æ¬¡å¼€å§‹ï¼Œä½†æ˜¯å®ƒä»¬éƒ½æ˜¯å¹¶å‘çš„è¢«æ‰§è¡Œï¼Œå¹¶ä¸éœ€è¦å½¼æ­¤ç­‰å¾…æ‰å¼€å§‹ã€‚å¹¶å‘é˜Ÿåˆ—èƒ½ä¿è¯ä»»åŠ¡æŒ‰åŒä¸€é¡ºåºå¼€å§‹ï¼Œä½†ä½ ä¸èƒ½çŸ¥é“æ‰§è¡Œçš„é¡ºåºã€æ‰§è¡Œçš„æ—¶é—´ä»¥åŠåœ¨æŸä¸€æ—¶åˆ»æ­£åœ¨è¢«æ‰§è¡Œä»»åŠ¡çš„æ•°é‡ï¼Œå…·ä½“å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š</p>
<p><img src="http://www.raywenderlich.com/wp-content/uploads/2014/09/Concurrent-Queue-Swift.png" alt="å¹¶å‘é˜Ÿåˆ—"></p>
<h2 id="GCD-çš„é˜Ÿåˆ—ç±»å‹"><a href="#GCD-çš„é˜Ÿåˆ—ç±»å‹" class="headerlink" title="GCD çš„é˜Ÿåˆ—ç±»å‹"></a>GCD çš„é˜Ÿåˆ—ç±»å‹</h2><p>åœ¨ä½¿ç”¨è¿‡ç¨‹ä¸­ç³»ç»Ÿä¼šè‡ªåŠ¨ç»™æ¯ä¸ªåº”ç”¨æä¾›ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—å’Œå››ä¸ªå¹¶å‘é˜Ÿåˆ—ï¼Œå…¶ä¸­ä¸²è¡Œé˜Ÿåˆ—ä¸ºå…¨å±€å¯ç”¨çš„ä¸²è¡Œé˜Ÿåˆ—ï¼Œåœ¨åº”ç”¨çš„ä¸»çº¿ç¨‹ä¸­æ‰§è¡Œä»»åŠ¡ä¸”åªæœ‰ä¸€ä¸ªï¼Œè¿™ä¸ªé˜Ÿåˆ—è¢«ç”¨æ¥æ›´æ–° App çš„ UIï¼Œæ‰§è¡Œæ‰€æœ‰ä¸æ›´æ–° UIViews ç›¸å…³çš„ä»»åŠ¡ã€‚è¯¥é˜Ÿåˆ—ä¸­åŒä¸€æ—¶åˆ»åªæ‰§è¡Œä¸€ä¸ªä»»åŠ¡ï¼Œè¿™å°±æ˜¯ä¸ºä»€ä¹ˆå½“ä½ åœ¨ä¸»é˜Ÿåˆ—ä¸­è¿è¡Œä¸€ä¸ªç¹é‡çš„ä»»åŠ¡æ—¶UIä¼šè¢«é˜»å¡çš„åŸå› ã€‚GCDæä¾›äº†ä¸€ä¸‹ä¸‰ç§é˜Ÿåˆ—ï¼š</p>
<ul>
<li><strong>ä¸»é˜Ÿåˆ—ï¼š</strong>ä»»åŠ¡ä»¥ä¸²è¡Œçš„æ–¹å¼æ‰§è¡Œåœ¨æ‚¨çš„åº”ç”¨ç¨‹åºçš„ä¸»çº¿ç¨‹ï¼›</li>
<li><strong>å¹¶å‘é˜Ÿåˆ—ï¼š</strong>ä»»åŠ¡åœ¨å…ˆè¿›å…ˆå‡ºçš„é¡ºåºåˆ—ä¸­ç§»é™¤,ä½†å¹¶å‘è¿è¡Œ,å¯ä»¥æŒ‰ç…§ä»»ä½•é¡ºåºå®Œæˆï¼›</li>
<li><strong>ä¸²è¡Œé˜Ÿåˆ—ï¼š</strong>ä»¥å…ˆè¿›å…ˆå‡ºé¡ºåºæ‰§è¡Œä¸€æ¬¡ä»»åŠ¡ã€‚</li>
</ul>
<p>é™¤ä¸»é˜Ÿåˆ—ä¹‹å¤–ï¼Œç³»ç»Ÿè¿˜æä¾›äº†4ä¸ªå¹¶å‘é˜Ÿåˆ—ã€‚æˆ‘ä»¬ç®¡å®ƒä»¬å« Global Dispatch queuesï¼ˆå…¨å±€æ´¾å‘é˜Ÿåˆ—ï¼‰ã€‚è¿™äº›é˜Ÿåˆ—å¯¹æ•´ä¸ªåº”ç”¨æ¥è¯´æ˜¯å…¨å±€å¯ç”¨çš„ï¼Œå½¼æ­¤åªæœ‰ä¼˜å…ˆçº§é«˜ä½çš„åŒºåˆ«ã€‚è¦ä½¿ç”¨å…¶ä¸­ä¸€ä¸ªå…¨å±€å¹¶å‘é˜Ÿåˆ—çš„è¯ï¼Œä½ å¾—ä½¿ç”¨ dispatch_get_global_queue å‡½æ•°è·å¾—ä¸€ä¸ªä½ æƒ³è¦çš„é˜Ÿåˆ—çš„å¼•ç”¨ï¼Œè¯¥å‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°å–å¦‚ä¸‹å€¼ï¼š</p>
<ul>
<li><strong>DISPATCH_QUEUE_PRIORITY_HIGHï¼š</strong>é«˜ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ï¼Œé«˜äºå…¶ä»–ä»»åŠ¡ä¼˜å…ˆçº§çš„é˜Ÿåˆ—ã€‚</li>
</ul>
<ul>
<li><strong>DISPATCH_QUEUE_PRIORITY_DEFAULTï¼š</strong>é»˜è®¤ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œé«˜äºä¸‹é¢ä¸¤ä¸ªä¼˜å…ˆçº§ï¼Œ</li>
<li><strong>DISPATCH_QUEUE_PRIORITY_LOWï¼š</strong>ä½ä¼˜å…ˆçº§é˜Ÿåˆ—ï¼Œä½äºä¸Šé¢ä¸¤ä¸ªä¼˜å…ˆçº§ã€‚</li>
<li><strong>DISPATCH_QUEUE_PRIORITY_BACKGROUNDï¼š</strong>æœ€ä½çš„ä¼˜å…ˆçº§ï¼Œä½¿ç”¨å®ƒå¯ä»¥å°½å¯èƒ½çš„å‡å°‘å¯¹ç³»ç»Ÿçš„å½±å“ã€‚</li>
</ul>
<p>ä½ å¯ä»¥åˆ›å»ºä»»ä½•æ•°é‡çš„ä¸²è¡Œæˆ–å¹¶å‘é˜Ÿåˆ—ã€‚ä½¿ç”¨å¹¶å‘é˜Ÿåˆ—çš„æƒ…å†µä¸‹ï¼Œå³ä½¿ä½ å¯ä»¥è‡ªå·±åˆ›å»ºï¼Œä½†æ˜¯è¿˜æ˜¯å¼ºçƒˆå»ºè®®ä½ ä½¿ç”¨ä¸Šé¢é‚£å››ä¸ªå…¨å±€é˜Ÿåˆ—ï¼Œé¿å…å¸¦æ¥æ²¡å¿…è¦çš„éº»çƒ¦ã€‚</p>
<h2 id="åˆ›å»ºå’Œç®¡ç†GCDé˜Ÿåˆ—"><a href="#åˆ›å»ºå’Œç®¡ç†GCDé˜Ÿåˆ—" class="headerlink" title="åˆ›å»ºå’Œç®¡ç†GCDé˜Ÿåˆ—"></a>åˆ›å»ºå’Œç®¡ç†GCDé˜Ÿåˆ—</h2><h3 id="dispatch-get-main-queue-gt-dispatch-queue-t"><a href="#dispatch-get-main-queue-gt-dispatch-queue-t" class="headerlink" title="dispatch_get_main_queue() -&gt; dispatch_queue_t!"></a>dispatch_get_main_queue() -&gt; dispatch_queue_t!</h3><h4 id="è¿”å›å€¼"><a href="#è¿”å›å€¼" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>é€šè¿‡è¿™ä¸ªå‡½æ•°æ¥è·å–ä¸»çº¿ç¨‹é˜Ÿåˆ—ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›ä¸»çº¿ç¨‹é˜Ÿåˆ—</span></span><br><span class="line">dispatch_get_main_queue()</span><br></pre></td></tr></table></figure>
<h3 id="dispatch-get-globalqueue-identifier-Int-flags-UInt-gt-dispatch-queue-t"><a href="#dispatch-get-globalqueue-identifier-Int-flags-UInt-gt-dispatch-queue-t" class="headerlink" title="dispatch_get_globalqueue(identifier: Int,  flags: UInt) -&gt; dispatch_queue_t!"></a>dispatch_get_global<em>queue(identifier: Int, </em> flags: UInt) -&gt; dispatch_queue_t!</h3><h4 id="è¿”å›å€¼-1"><a href="#è¿”å›å€¼-1" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>é€šè¿‡è¿™ä¸ªå‡½æ•°æ¥è·å–ç³»ç»Ÿæä¾›çš„4ä¸ªå¹¶å‘é˜Ÿåˆ—</p>
<h4 id="å‚æ•°åˆ—è¡¨"><a href="#å‚æ•°åˆ—è¡¨" class="headerlink" title="å‚æ•°åˆ—è¡¨"></a>å‚æ•°åˆ—è¡¨</h4><table>
<thead>
<tr>
<th>å‚æ•°å</th>
<th>å‚æ•°æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>identifier</td>
<td>ä»£è¡¨çš„é˜Ÿåˆ—çš„ä¼˜å…ˆçº§ï¼Œä¸º<code>DISPATCH_QUEUE_PRIORITY_HIGHã€DISPATCH_QUEUE_PRIORITY_DEFAULTã€DISPATCH_QUEUE_PRIORITY_LOWã€DISPATCH_QUEUE_PRIORITY_BACKGROUND</code>ä¸­çš„ä¸€ä¸ª</td>
</tr>
<tr>
<td>flags</td>
<td>è‹¹æœå®˜æ–¹è§£é‡Šæ˜¯ä¿ç•™å·²æä¾›å°†æ¥ä½¿ç”¨ï¼Œç›®å‰è®©è¿™ä¸ªå‚æ•°ä¸º0</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›DISPATCH_QUEUE_PRIORITY_HIGHä¼˜å…ˆçº§çš„é˜Ÿåˆ—</span></span><br><span class="line">dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_HIGH</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment">//è¿”å›DISPATCH_QUEUE_PRIORITY_DEFAULTä¼˜å…ˆçº§çš„é˜Ÿåˆ—</span></span><br><span class="line">dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_DEFAULT</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment">//è¿”å›DISPATCH_QUEUE_PRIORITY_LOWä¼˜å…ˆçº§çš„é˜Ÿåˆ—</span></span><br><span class="line">dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_LOW</span>, <span class="number">0</span>)</span><br><span class="line"><span class="comment">//è¿”å›DISPATCH_QUEUE_PRIORITY_BACKGROUNDä¼˜å…ˆçº§çš„é˜Ÿåˆ—</span></span><br><span class="line">dispatch_get_global_queue(<span class="type">DISPATCH_QUEUE_PRIORITY_BACKGROUND</span>, <span class="number">0</span>)</span><br></pre></td></tr></table></figure>
<h3 id="dispatch-queuecreate-label-UnsafePointer-attr-dispatch-queue-attr-t-gt-dispatch-queue-t"><a href="#dispatch-queuecreate-label-UnsafePointer-attr-dispatch-queue-attr-t-gt-dispatch-queue-t" class="headerlink" title="dispatch_queuecreate(label: UnsafePointer,  attr: dispatch_queue_attr_t!) -&gt; dispatch_queue_t!"></a>dispatch_queue<em>create(label: UnsafePointer<int8>, </int8></em> attr: dispatch_queue_attr_t!) -&gt; dispatch_queue_t!</h3><h4 id="è¿”å›å€¼-2"><a href="#è¿”å›å€¼-2" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>é€šè¿‡è¿™å‡½æ•°æ¥åˆ›å»ºä¸€ä¸ªæ–°çš„é˜Ÿåˆ—ã€‚</p>
<h4 id="å‚æ•°åˆ—è¡¨-1"><a href="#å‚æ•°åˆ—è¡¨-1" class="headerlink" title="å‚æ•°åˆ—è¡¨"></a>å‚æ•°åˆ—è¡¨</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å‚æ•°æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>label</td>
<td>ä¸ºä½ åˆ›å»ºçš„é˜Ÿåˆ—çš„æ ‡ç­¾ï¼Œå»ºè®®ç”¨åå‘DNSçš„å‘½åé£æ ¼ï¼ˆcom.example.myqueueï¼‰ï¼Œè¿™ä¸ªå‚æ•°æ˜¯å¯é€‰çš„ï¼Œå¯ä»¥ä¸ºNULLã€‚</td>
</tr>
<tr>
<td>attr</td>
<td>GCDé˜Ÿåˆ—çš„å±æ€§ï¼Œè¿™ä¸ªå‚æ•°æ¥é€‰æ‹©åˆ›å»ºçš„æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼ˆ<strong>DISPATCH_QUEUE_SERIAL</strong>ï¼‰è¿˜æ˜¯å¹¶å‘é˜Ÿåˆ—ï¼ˆ<strong>DISPATCH_QUEUE_CONCURRENT</strong>ï¼‰å’Œé˜Ÿåˆ—çš„ä¼˜å…ˆçº§åˆ«ã€‚</td>
</tr>
</tbody>
</table>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæ ‡è¯†ä¸ºcom.wcl.wwwçš„å¹¶å‘é˜Ÿåˆ—</span></span><br><span class="line">dispatch_queue_create(<span class="string">"com.wcl.www"</span>, <span class="type">DISPATCH_QUEUE_CONCURRENT</span>)</span><br><span class="line"><span class="comment">//åˆ›å»ºä¸€ä¸ªæ ‡è¯†ä¸ºcom.imwcl.wwwçš„ä¸²è¡Œé˜Ÿåˆ—</span></span><br><span class="line">dispatch_queue_create(<span class="string">"com.imwcl.www"</span>, <span class="type">DISPATCH_QUEUE_SERIAL</span>)</span><br></pre></td></tr></table></figure>
<h3 id="dispatch-get-current-queueï¼ˆï¼‰"><a href="#dispatch-get-current-queueï¼ˆï¼‰" class="headerlink" title="dispatch_get_current_queueï¼ˆï¼‰"></a>dispatch_get_current_queueï¼ˆï¼‰</h3><h4 id="è¿”å›å€¼-3"><a href="#è¿”å›å€¼-3" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>è¿”å›å½“å‰ä»»åŠ¡ä¸­çš„é˜Ÿåˆ—ã€‚</p>
<h3 id="dispatch-queue-attr-make-with-qos-class-attr-dispatch-queue-attrt-qos-class-dispatch-qos-classt-relative-priority-Int32-gt-dispatch-queue-attr-t"><a href="#dispatch-queue-attr-make-with-qos-class-attr-dispatch-queue-attrt-qos-class-dispatch-qos-classt-relative-priority-Int32-gt-dispatch-queue-attr-t" class="headerlink" title="dispatch_queue_attr_make_with_qos_class(attr: dispatch_queue_attrt!,  qos_class: dispatch_qos_classt,  relative_priority: Int32) -&gt; dispatch_queue_attr_t!"></a>dispatch_queue_attr_make_with_qos_class(attr: dispatch_queue_attr<em>t!, </em> qos_class: dispatch_qos_class<em>t, </em> relative_priority: Int32) -&gt; dispatch_queue_attr_t!</h3><h4 id="è¿”å›å€¼-4"><a href="#è¿”å›å€¼-4" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>è¿”å›ä¸€ä¸ªé€‚ç”¨äºåˆ›å»ºä¸€ä¸ªæƒ³è¦çš„æœåŠ¡è´¨é‡ä¿¡æ¯çš„GCDé˜Ÿåˆ—çš„å±æ€§ã€‚ä¸»è¦ç”¨äºdispatch_queue_createå‡½æ•°ã€‚</p>
<h4 id="å‚æ•°åˆ—è¡¨-2"><a href="#å‚æ•°åˆ—è¡¨-2" class="headerlink" title="å‚æ•°åˆ—è¡¨"></a>å‚æ•°åˆ—è¡¨</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å‚æ•°æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>attr</td>
<td>GCDé˜Ÿåˆ—çš„å±æ€§ï¼Œè¿™ä¸ªå‚æ•°æ¥é€‰æ‹©åˆ›å»ºçš„æ˜¯ä¸²è¡Œé˜Ÿåˆ—ï¼ˆ<strong>DISPATCH_QUEUE_SERIAL</strong>ï¼‰è¿˜æ˜¯å¹¶å‘é˜Ÿåˆ—ï¼ˆ<strong>DISPATCH_QUEUE_CONCURRENT</strong>ï¼‰å’Œé˜Ÿåˆ—çš„ä¼˜å…ˆçº§åˆ«ã€‚</td>
</tr>
<tr>
<td>qos_class</td>
<td>è¿™ä¸ªå‚æ•°ä¸ºé˜Ÿåˆ—ä¼˜å…ˆçº§ï¼ŒåŒæ ·ä¸º<code>DISPATCH_QUEUE_PRIORITY_HIGHã€DISPATCH_QUEUE_PRIORITY_DEFAULTã€DISPATCH_QUEUE_PRIORITY_LOWã€DISPATCH_QUEUE_PRIORITY_BACKGROUND</code>ä¸­çš„ä¸€ä¸ªã€‚</td>
</tr>
<tr>
<td>relative_priority</td>
<td>è¿™ä¸ªå‚æ•°ä¸ºQOSç±»ä¸­ç›¸å¯¹ä¼˜å…ˆçº§ï¼Œè¿™ä¸ªå€¼å¿…é¡»å°äº0ï¼Œå¤§äº<code>QOS_MIN_RELATIVE_PRIORITY</code>ï¼Œæ ¹æ®logæ•°æ®å‘ç°<code>QOS_MIN_RELATIVE_PRIORITY</code>çš„å€¼ä¸º-15ï¼Œé‚£è¯´æ˜ç¬¬äºŒä¸ªå‚æ•°çš„å€¼åœ¨0~-15ä¹‹é—´ã€‚</td>
</tr>
</tbody>
</table>
<p>ç¬¬ä¸‰ä¸ªå‚æ•°ä¸ºQOSç±»ä¸­ç›¸å¯¹ä¼˜å…ˆçº§ï¼Œä¹Ÿå°±æ˜¯ç¬¬äºŒä¸ªå‚æ•°çš„ç±»ï¼Œè¿™ä¸ªå€¼å¿…é¡»å°äº0ï¼Œå¤§äº<code>QOS_MIN_RELATIVE_PRIORITY</code>ã€‚</p>
<p><code>global queue</code>ä¼˜å…ˆçº§æ˜ å°„åˆ°ä»¥ä¸‹<code>quality-of-service</code>ç±»:</p>
<ul>
<li><code>DISPATCH_QUEUE_PRIORITY_HIG</code>æ˜ å°„åˆ°<code>QOS_CLASS_USER_INITIATED</code>ã€‚</li>
<li><code>DISPATCH_QUEUE_PRIORITY_DEFAULT</code>æ˜ å°„åˆ°<code>QOS_CLASS_DEFAULT</code></li>
<li><code>DISPATCH_QUEUE_PRIORITY_LOW</code>æ˜ å°„åˆ°<code>QOS_CLASS_UTILITY</code></li>
<li><code>DISPATCH_QUEUE_PRIORITY_BACKGROUND</code>æ˜ å°„åˆ°<code>QOS_CLASS_BACKGROUND</code></li>
</ul>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> att = dispatch_queue_attr_make_with_qos_class(<span class="type">DISPATCH_QUEUE_SERIAL</span>, <span class="type">QOS_CLASS_DEFAULT</span>, <span class="type">QOS_MIN_RELATIVE_PRIORITY</span>)</span><br><span class="line"><span class="comment">//æ ¹æ®attæ¥åˆ›å»ºä¸€ä¸ªé˜Ÿåˆ—</span></span><br><span class="line">dispatch_queue_create(<span class="string">"com.wcl.www"</span>, att)</span><br></pre></td></tr></table></figure>
<h3 id="dispatch-queue-get-label-dispatch-queue-t-queue"><a href="#dispatch-queue-get-label-dispatch-queue-t-queue" class="headerlink" title="dispatch_queue_get_label(dispatch_queue_t queue)"></a>dispatch_queue_get_label(dispatch_queue_t queue)</h3><h4 id="è¿”å›å€¼-5"><a href="#è¿”å›å€¼-5" class="headerlink" title="è¿”å›å€¼"></a>è¿”å›å€¼</h4><p>è¿”å›å·²ç»åˆ›å»ºé˜Ÿåˆ—çš„æŒ‡å®šæ ‡ç­¾ã€‚å¦‚æœé˜Ÿåˆ—åœ¨åˆ›å»ºè¿‡ç¨‹ä¸­æ²¡æœ‰æä¾›æ ‡ç­¾ï¼Œåˆ™å¯èƒ½è¿”å›NULLã€‚</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//è¿”å›é˜Ÿåˆ—çš„æ ‡ç­¾</span></span><br><span class="line">dispatch_queue_get_label(dispatch_get_main_queue())</span><br></pre></td></tr></table></figure>
<h3 id="dispatch-main-void"><a href="#dispatch-main-void" class="headerlink" title="dispatch_main( void)"></a>dispatch_main( void)</h3><p>æ‰§è¡Œä¸»é˜Ÿåˆ—ä¸Šè¢«æäº¤çš„æ‰€æœ‰blockã€‚è¿™ä¸ªå‡½æ•°æ˜¯ä¸ºä¸»çº¿ç¨‹è€Œå­˜åœ¨çš„å¹¶ä¸”ç­‰å¾…æ‰§è¡Œæäº¤åˆ°ä¸»é˜Ÿåˆ—ä¸­çš„blockã€‚åœ¨ä¸»çº¿ç¨‹ä¸­è°ƒç”¨äº†UIApplicationMain(iOS) ï¼ŒNSApplicationMain(OS X)ï¼Œæˆ–è€…CFrunLoopRunçš„åº”ç”¨ç¨‹åºä¸€å®šä¸è¦è°ƒç”¨dispatch_mainã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">int main(int argc, const charchar * argv[])  </span><br><span class="line">&#123;  </span><br><span class="line">  </span><br><span class="line">    @autoreleasepool &#123;  </span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;  </span><br><span class="line">            NSLog(@&quot;ç­‰å¾…1ã€‚ã€‚ã€‚ã€‚&quot;);  </span><br><span class="line">        &#125;);  </span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;  </span><br><span class="line">            NSLog(@&quot;ç­‰å¾…1ã€‚ã€‚ã€‚ã€‚&quot;);  </span><br><span class="line">        &#125;);  </span><br><span class="line">        dispatch_main();  </span><br><span class="line">    &#125;  </span><br><span class="line">    return 0;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>å¦‚ä¸Šï¼šå¦‚æœä¸è°ƒç”¨dispatch_main()å‡½æ•°ï¼Œåˆ™ä¸ä¼šæ‰“å°å‡ºç»“æœã€‚</p>
<h3 id="dispatch-set-target-queue-object-dispatch-objectt-queue-dispatch-queue-t"><a href="#dispatch-set-target-queue-object-dispatch-objectt-queue-dispatch-queue-t" class="headerlink" title="dispatch_set_target_queue(object: dispatch_objectt!,  queue: dispatch_queue_t!)"></a>dispatch_set_target_queue(object: dispatch_object<em>t!, </em> queue: dispatch_queue_t!)</h3><h4 id="å‚æ•°åˆ—è¡¨-3"><a href="#å‚æ•°åˆ—è¡¨-3" class="headerlink" title="å‚æ•°åˆ—è¡¨"></a>å‚æ•°åˆ—è¡¨</h4><table>
<thead>
<tr>
<th>å‚æ•°</th>
<th>å‚æ•°æè¿°</th>
</tr>
</thead>
<tbody>
<tr>
<td>object</td>
<td>è¦ä¿®æ”¹çš„å¯¹è±¡ï¼Œè¯¥å‚æ•°ä¸èƒ½ä¸ºç©ºã€‚</td>
</tr>
<tr>
<td>queue</td>
<td>å¤„ç†è¿™ä¸ªå¯¹è±¡çš„ç›®æ ‡é˜Ÿåˆ—ï¼Œè¿™ä¸ªå‚æ•°ä¸èƒ½ä¸ºNULL</td>
</tr>
</tbody>
</table>
<p>ç»™GCDå¯¹è±¡è®¾ç½®ç›®æ ‡é˜Ÿåˆ—ï¼Œè¿™ä¸ªç›®æ ‡é˜Ÿåˆ—è´Ÿè´£å¤„ç†è¿™ä¸ªå¯¹è±¡ã€‚å¤„ç†çš„å¯¹è±¡åˆ†åˆ«æœ‰ä¸€ä¸‹å‡ ç§ï¼š</p>
<ul>
<li><p><strong>GCDé˜Ÿåˆ—ï¼š</strong><code>dispatch_queue_t</code>ï¼Œä¸€ä¸ªGCDé˜Ÿåˆ—çš„ä¼˜å…ˆçº§æ˜¯ç»§æ‰¿è‡ªå®ƒçš„ç›®æ ‡é˜Ÿåˆ—çš„ã€‚ä½¿ç”¨dispatch_get_global_queueå‡½æ•°å»è·å¾—ä¸€ä¸ªåˆé€‚çš„ç›®æ ‡é˜Ÿåˆ—ï¼Œè¿™ä¸ªç›®æ ‡é˜Ÿåˆ—å°±æ˜¯ä½ æ‰€éœ€çš„ä¼˜å…ˆçº§ã€‚</p>
<p>å¦‚æœä½ æäº¤ä¸€ä¸ªblockåˆ°ä¸€ä¸ªä¸²è¡Œé˜Ÿåˆ—ä¸­ï¼Œå¹¶ä¸”è¿™ä¸ªä¸²è¡Œé˜Ÿåˆ—çš„ç›®æ ‡é˜Ÿåˆ—æ˜¯ä¸€ä¸ªä¸åŒçš„ä¸²è¡Œé˜Ÿåˆ—ï¼Œé‚£ä¹ˆè¿™ä¸ªblockå°†ä¸ä¼šä¸å…¶ä»–è¢«æäº¤åˆ°è¿™ä¸ªç›®æ ‡é˜Ÿåˆ—çš„blockæˆ–è€…ä»»ä½•å…¶ä»–æœ‰ç›¸åŒç›®æ ‡é˜Ÿåˆ—çš„é˜Ÿåˆ—åŒæ—¶è°ƒç”¨ã€‚</p>
</li>
</ul>
<ul>
<li><strong>GCDæ•°æ®æºï¼š</strong><code>dispatch_source_t</code>ï¼Œä¸ºä¸€ä¸ªGCDæ•°æ®æºçš„ç›®æ ‡é˜Ÿåˆ—æŒ‡å®šäº†å®ƒçš„äº‹ä»¶å¤„ç†è€…çš„blockå’Œå–æ¶ˆäº‹ä»¶å¤„ç†çš„blockã€‚</li>
<li><strong>GCD I/Oé€šé“ï¼š</strong><code>dispatch_io_t</code>ï¼Œä¸€ä¸ªGCD I/Oé€šé“çš„ç›®æ ‡é˜Ÿåˆ—æŒ‡å®šäº†è¢«æ‰§è¡Œçš„I/Oæ“ä½œã€‚è¿™å¯èƒ½ä¼šå½±å“I/Oæ“ä½œç»“æœçš„ä¼˜å…ˆçº§ã€‚ä¾‹å¦‚ï¼Œå¦‚æœè¿™ä¸ªé€šé“çš„ç›®æ ‡é˜Ÿåˆ—çš„ä¼˜å…ˆçº§è¢«è®¾ç½®ä¸ºDISPATCH_QUEUE_PRIORITY_BACKGROUNDï¼Œé‚£ä¹ˆå½“æœ‰I/Oæ“ä½œäº‰å¤ºçš„æ—¶å€™ï¼Œä»»ä½•åœ¨è¿™ä¸ªé˜Ÿåˆ—ä¸Šé€šè¿‡dispatch_io_readæˆ–dispatch_io_writeæ‰§è¡Œçš„I/Oæ“ä½œéƒ½ä¼šè¢«å‹åˆ¶ã€‚</li>
</ul>
<p>å…³äº<code>dispatch_source_t</code>å’Œ<code>dispatch_io_t</code>çš„ç”¨æ³•ä¼šåœ¨ä»¥åçš„ç« èŠ‚å»ä»‹ç»ã€‚</p>
<blockquote>
<p>æ€»ç»“ï¼šè¿™ç¯‡æ–‡ç« ä¸»è¦è¯¦ç»†çš„ä»‹ç»äº†ä¸€ä¸‹å…³äºå¤šçº¿ç¨‹çš„çŸ¥è¯†å’ŒGCDé˜Ÿåˆ—çš„çš„åˆ›å»ºï¼Œå…³äºGCDçš„ç”¨æ³•å’Œå…¶ä»–æ–¹é¢çš„çŸ¥è¯†ä¼šåœ¨åç»­æ–‡ç« é‡Œé¢å»æè¿°ï¼Œç»™è‡ªå·±ç«‹ä¸€ä¸ªflagï¼Œäº‰å–å®Œå…¨å¼„æ‡‚ä»¥åå†™å‡ºå¥½çš„åšå®¢æ¥ã€‚</p>
</blockquote>
<h3 id="å‚è€ƒæ–‡æ¡£"><a href="#å‚è€ƒæ–‡æ¡£" class="headerlink" title="å‚è€ƒæ–‡æ¡£"></a>å‚è€ƒæ–‡æ¡£</h3><p><a href="https://developer.apple.com/library/mac/documentation/Performance/Reference/GCD_libdispatch_Ref/index.html#//apple_ref/c/func/dispatch_async" target="_blank" rel="external">è‹¹æœå®˜æ–¹GCDå‚è€ƒæ–‡æ¡£</a></p>
<p><a href="https://www.raywenderlich.com/79149/grand-central-dispatch-tutorial-swift-part-1" target="_blank" rel="external">å›½å¤–ä¸€ç¯‡å¥½çš„å…³äºGCDçš„æ–‡æ¡£</a></p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 06æœˆ 27æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - CAKeyframeAnimationå®ç°è¿‡å±±è½¦åŠ¨ç”»]]></title>
      <url>http://imwcl.com/2016/06/22/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6%20-%20CAKeyframeAnimation%E5%AE%9E%E7%8E%B0%E8%BF%87%E5%B1%B1%E8%BD%A6%E5%8A%A8%E7%94%BB/</url>
      <content type="html"><![CDATA[<blockquote>
<p>å¶ç„¶é—´åœ¨ç½‘é¡µä¸Šçœ‹åˆ°ä¸€ä¸ª<a href="http://www.html5tricks.com/demo/html5-svg-shanche-animation/index.html" target="_blank" rel="external">è¿‡å±±è½¦åŠ¨ç”»</a>è§‰å¾—å¾ˆç‚«ï¼Œå°±æƒ³ç”¨<code>swift</code>çº¯ä»£ç å®ç°äº†ä¸€ä¸ªç±»ä¼¼çš„æ•ˆæœï¼Œå› ä¸ºæ²¡æœ‰è®¾è®¡å¤©èµ‹ï¼Œæ‰€ä»¥å°±å®Œå…¨é«˜ä»¿çš„äººå®¶çš„æ•ˆæœ-.-ä¸‹é¢ä¸Šæ•ˆæœå›¾ï¼š</p>
</blockquote>
<p><img src="http://ww4.sinaimg.cn/large/006tNbRwgw1f53ahi8vslg30if0a8e81" alt="wcl.gif"></p>
<a id="more"></a>
<p>ç»™å¤§å®¶ä»‹ç»ä¸€ä¸‹é¡¹ç›®ä¸­ä¸»è¦ä¼šç”¨åˆ°çš„ç±»ï¼š</p>
<ul>
<li><code>CAShapeLayer</code></li>
<li><code>CAGradientLayer</code></li>
<li><code>CAKeyframeAnimation</code></li>
</ul>
<h3 id="å®ç°çš„ä¸»è¦æ€è·¯"><a href="#å®ç°çš„ä¸»è¦æ€è·¯" class="headerlink" title="å®ç°çš„ä¸»è¦æ€è·¯"></a>å®ç°çš„ä¸»è¦æ€è·¯</h3><p>æ¸å˜çš„èƒŒæ™¯ç”¨<code>CAGradientLayer</code>å®ç°ï¼Œå…¶ä»–ä¾‹å¦‚å±±å³°ï¼Œè‰åªå’Œè½¨é“å¯ä»¥ç”¨<code>CAShapeLayer</code>é…åˆ<code>UIBezierPath</code>å®ç°ï¼Œç„¶åäº‘æœµï¼Œæ ‘æœ¨å’Œå¤§åœ°ç›´æ¥ç”¨<code>CALayer</code>é€šè¿‡è®¾ç½®<code>contents</code>å®ç°ï¼Œç„¶åäº‘æœµå’Œè¿‡å±±è½¦çš„åŠ¨ç”»å®ç°ç”¨<code>CAKeyframeAnimation</code>ï¼Œè¿™æ ·åˆ†æå…¶å®åšä¸€ä¸ªè¿™æ ·çš„åŠ¨æ€æ•ˆæœå¹¶ä¸æ˜¯å¾ˆéš¾ï¼Œä¸‹é¢å°±æ˜¯å®ç°è¿‡ç¨‹å’Œç®€å•çš„ä»£ç ç¤ºä¾‹ã€‚<a href="https://github.com/631106979/RollerCoasterAnimation" target="_blank" rel="external">ä¸‹è½½demoæœ‰å®Œæ•´ä»£ç </a></p>
<h3 id="CAGradientLayer"><a href="#CAGradientLayer" class="headerlink" title="CAGradientLayer"></a>CAGradientLayer</h3><p><code>CAGradientLayer</code>æ˜¯ç”¨æ¥ç”Ÿæˆä¸¤ç§æˆ–æ›´å¤šé¢œè‰²å¹³æ»‘æ¸å˜çš„ã€‚ç›¸æ¯”äº<code>Core Graphics</code>æ¥è¯´<code>CAGradientLayer</code>çš„çœŸæ­£å¥½å¤„åœ¨äºç»˜åˆ¶ä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿã€‚è¿™è¯´æ˜é€šè¿‡<code>CAGradientLayer</code>æ¥ç»˜åˆ¶æ¸å˜çš„æ•ˆæœæ¯”ç”¨<code>Core Graphics</code>çš„æ•ˆç‡æ›´é«˜ã€‚æˆ‘ä»¬é€šè¿‡<code>CAGradientLayer</code>æ¥å®ç°è¿™ä¸ªé¡¹ç›®ä¸­çš„èƒŒæ™¯<a href="https://github.com/631106979/RollerCoasterAnimation" target="_blank" rel="external">ä¸‹è½½demoæœ‰å®Œæ•´ä»£ç </a>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–èƒŒæ™¯</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">initGradientLayer</span><span class="params">(size:CGSize)</span></span> -&gt; <span class="type">CAGradientLayer</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> layer:<span class="type">CAGradientLayer</span> = <span class="type">CAGradientLayer</span>()</span><br><span class="line">        layer.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: size.width, height: size.height - <span class="number">20</span>)</span><br><span class="line">        <span class="comment">//è®¾ç½®æ¸å˜çš„é¢œè‰²</span></span><br><span class="line">        layer.colors = [<span class="type">UIColor</span>.<span class="keyword">init</span>(colorLiteralRed: <span class="number">178.0</span>/<span class="number">255.0</span>, green: <span class="number">226.0</span>/<span class="number">255.0</span>, blue: <span class="number">248.0</span>/<span class="number">255.0</span>, alpha: <span class="number">1.0</span>).<span class="type">CGColor</span>, <span class="type">UIColor</span>.<span class="keyword">init</span>(colorLiteralRed: <span class="number">232.0</span>/<span class="number">255.0</span>, green: <span class="number">244.0</span>/<span class="number">255.0</span>, blue: <span class="number">193.0</span>/<span class="number">255.0</span>, alpha: <span class="number">1.0</span>).<span class="type">CGColor</span>]</span><br><span class="line">        <span class="comment">//è®¾ç½®æ¸å˜çš„æ–¹å‘ä¸ºä»å·¦ä¸Šåˆ°å³ä¸‹</span></span><br><span class="line">        layer.startPoint = <span class="type">CGPoint</span>(x: <span class="number">0</span>, y: <span class="number">0</span>)</span><br><span class="line">        layer.endPoint = <span class="type">CGPoint</span>(x: <span class="number">1</span>, y: <span class="number">1</span>)</span><br><span class="line">        view.layer.addSublayer(layer)</span><br><span class="line">        <span class="keyword">return</span> layer</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww4.sinaimg.cn/large/006tNbRwgw1f53ax28scyj30ij09w74d" alt="å±å¹•å¿«ç…§ 2016-06-22 ä¸Šåˆ12.16.14.png"></p>
<h3 id="CAShapeLayer"><a href="#CAShapeLayer" class="headerlink" title="CAShapeLayer"></a>CAShapeLayer</h3><p><code>CAShapeLayer</code>æ˜¯ä¸€ä¸ªé€šè¿‡çŸ¢é‡å›¾å½¢è€Œä¸æ˜¯<code>bitmap</code>æ¥ç»˜åˆ¶çš„å›¾å±‚å­ç±»ã€‚ä½ æŒ‡å®šè¯¸å¦‚é¢œè‰²å’Œçº¿å®½ç­‰å±æ€§ï¼Œç”¨<code>CGPath</code>æ¥å®šä¹‰æƒ³è¦ç»˜åˆ¶çš„å›¾å½¢ï¼Œæœ€åCAShapeLayerå°±è‡ªåŠ¨æ¸²æŸ“å‡ºæ¥äº†ã€‚å½“ç„¶ï¼Œä½ ä¹Ÿå¯ä»¥ç”¨<code>Core Graphics</code>ç›´æ¥å‘åŸå§‹çš„CALyerçš„å†…å®¹ä¸­ç»˜åˆ¶ä¸€ä¸ªè·¯å¾„ï¼Œç›¸æ¯”ç›´ä¸‹ï¼Œä½¿ç”¨<code>CAShapeLayer</code>æœ‰ä»¥ä¸‹ä¸€äº›ä¼˜ç‚¹ï¼š</p>
<ul>
<li>æ¸²æŸ“å¿«é€Ÿã€‚<code>CAShapeLayer</code>ä½¿ç”¨äº†ç¡¬ä»¶åŠ é€Ÿï¼Œç»˜åˆ¶åŒä¸€å›¾å½¢ä¼šæ¯”ç”¨<code>Core Graphics</code>å¿«å¾ˆå¤šã€‚</li>
</ul>
<ul>
<li>é«˜æ•ˆä½¿ç”¨å†…å­˜ã€‚ä¸€ä¸ª<code>CAShapeLayer</code>ä¸éœ€è¦åƒæ™®é€š<code>CALayer</code>ä¸€æ ·åˆ›å»ºä¸€ä¸ªå¯„å®¿å›¾å½¢ï¼Œæ‰€ä»¥æ— è®ºæœ‰å¤šå¤§ï¼Œéƒ½ä¸ä¼šå ç”¨å¤ªå¤šçš„å†…å­˜ã€‚</li>
</ul>
<ul>
<li>ä¸ä¼šè¢«å›¾å±‚è¾¹ç•Œå‰ªè£æ‰ã€‚ä¸€ä¸ª<code>CAShapeLayer</code>å¯ä»¥åœ¨è¾¹ç•Œä¹‹å¤–ç»˜åˆ¶ã€‚ä½ çš„å›¾å±‚è·¯å¾„ä¸ä¼šåƒåœ¨ä½¿ç”¨<code>Core Graphics</code>çš„æ™®é€š<code>CALayer</code>ä¸€æ ·è¢«å‰ªè£æ‰ï¼ˆå¦‚æˆ‘ä»¬åœ¨ç¬¬äºŒç« æ‰€è§ï¼‰ã€‚</li>
</ul>
<ul>
<li>ä¸ä¼šå‡ºç°åƒç´ åŒ–ã€‚å½“ä½ ç»™<code>CAShapeLayer</code>åš<code>3D</code>å˜æ¢æ—¶ï¼Œå®ƒä¸åƒä¸€ä¸ªæœ‰å¯„å®¿å›¾çš„æ™®é€šå›¾å±‚ä¸€æ ·å˜å¾—åƒç´ åŒ–ã€‚</li>
</ul>
<p>æˆ‘ä»¬ç”¨<code>CAShapeLayer</code>æ¥ç»˜åˆ¶è‰åœ°ï¼Œå±±å¡å’Œè¿‡å±±è½¦çš„è½¨é“ï¼Œä¸‹é¢ç»™å¤§å®¶é€šè¿‡ç»˜åˆ¶è‰åªçš„ä»£ç ç®€å•ä»‹ç»ä¸€ä¸‹ç”¨æ³•<a href="https://github.com/631106979/RollerCoasterAnimation" target="_blank" rel="external">ä¸‹è½½demoæœ‰å®Œæ•´ä»£ç </a>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//åˆå§‹åŒ–è‰åª</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">initGrasslandlayer</span><span class="params">(size:CGSize)</span></span> -&gt; <span class="type">CAShapeLayer</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> grasslandOne = <span class="type">CAShapeLayer</span>()</span><br><span class="line">        <span class="comment">//é€šè¿‡UIBezierPathæ¥ç»˜åˆ¶è·¯å¾„</span></span><br><span class="line">        <span class="keyword">let</span> pathOne:<span class="type">UIBezierPath</span> = <span class="type">UIBezierPath</span>()</span><br><span class="line">        pathOne.moveToPoint(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: size.height - <span class="number">20</span>))</span><br><span class="line">        pathOne.addLineToPoint(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: size.height - <span class="number">100</span>))</span><br><span class="line">        pathOne.addQuadCurveToPoint(<span class="type">CGPoint</span>(x: size.width/<span class="number">3.0</span>, y: size.height - <span class="number">20</span>), controlPoint: <span class="type">CGPoint</span>(x: size.width/<span class="number">6.0</span>, y: size.height - <span class="number">100</span>))</span><br><span class="line">        grasslandOne.path = pathOne.<span class="type">CGPath</span></span><br><span class="line">        <span class="comment">//è®¾ç½®è‰åªçš„é¢œè‰²</span></span><br><span class="line">        grasslandOne.fillColor = <span class="type">UIColor</span>.<span class="keyword">init</span>(colorLiteralRed: <span class="number">82.0</span>/<span class="number">255.0</span>, green: <span class="number">177.0</span>/<span class="number">255.0</span>, blue: <span class="number">44.0</span>/<span class="number">255.0</span>, alpha: <span class="number">1.0</span>).<span class="type">CGColor</span></span><br><span class="line">        view.layer.addSublayer(grasslandOne)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<p><img src="http://ww4.sinaimg.cn/large/006tNbRwgw1f53ba1snf4j30ij0agtc7" alt="å±å¹•å¿«ç…§ 2016-06-22 ä¸Šåˆ12.28.53.png"></p>
<h3 id="CAKeyframeAnimation"><a href="#CAKeyframeAnimation" class="headerlink" title="CAKeyframeAnimation"></a>CAKeyframeAnimation</h3><p><code>CAKeyframeAnimation</code>ç±»ä¸ºå¯¹è±¡æä¾›äº†å…³é”®å¸§åŠ¨ç”»çš„åŠŸèƒ½ã€‚ä½ åˆ›å»ºä¸€ä¸ª<code>CAKeyframeAnimation</code>å¯¹è±¡ä½¿ç”¨<code>animationWithKeyPath:</code>æŒ‡å®šå±æ€§çš„å…³é”®è·¯å¾„ï¼Œä½ å¯ä»¥æŒ‡å®šè¦ä½¿ç”¨å…³é”®å¸§çš„å€¼æ¥æ§åˆ¶æ—¶é—´å’ŒåŠ¨ç”»çš„è¡Œä¸ºã€‚æˆ‘ä»¬å¯ä»¥é€šè¿‡<code>CAKeyframeAnimation</code>æ¥å®ç°è¿‡å±±è½¦åœ¨è½¨é“ä¸Šçš„çš„åŠ¨ç”»å’Œäº‘æœµçš„åŠ¨ç”»ï¼Œä¸‹é¢æ˜¯ä¸€å°æ®µç¤ºä¾‹ä»£ç <a href="https://github.com/631106979/RollerCoasterAnimation" target="_blank" rel="external">ä¸‹è½½demoæœ‰å®Œæ•´ä»£ç </a>ï¼š</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//æ·»åŠ ç»¿è‰²è½¨é“çš„åŠ¨ç”»</span></span><br><span class="line">    <span class="function"><span class="keyword">func</span> <span class="title">addGreenCarPathAnimation</span><span class="params">(size:CGSize)</span></span> &#123;</span><br><span class="line">        <span class="keyword">let</span> carLayer:<span class="type">CALayer</span> = <span class="type">CALayer</span>()</span><br><span class="line">        carLayer.frame = <span class="type">CGRect</span>(x: <span class="number">0</span>, y: <span class="number">0</span>, width: <span class="number">17</span>, height: <span class="number">11</span>)</span><br><span class="line">        carLayer.contents = <span class="type">UIImage</span>.<span class="keyword">init</span>(named: <span class="string">"otherCar"</span>)!.<span class="type">CGImage</span></span><br><span class="line">        </span><br><span class="line">        <span class="comment">//ç»˜åˆ¶è·¯å¾„</span></span><br><span class="line">        <span class="keyword">let</span> path:<span class="type">UIBezierPath</span> = <span class="type">UIBezierPath</span>()</span><br><span class="line">        path.lineCapStyle = .<span class="type">Round</span></span><br><span class="line">        path.lineJoinStyle = .<span class="type">Round</span></span><br><span class="line">        path.moveToPoint(<span class="type">CGPoint</span>(x: size.width + <span class="number">10</span>, y: size.height - <span class="number">7</span>))</span><br><span class="line">        path.addLineToPoint(<span class="type">CGPoint</span>(x: size.width + <span class="number">10</span>, y: size.height - <span class="number">77</span>))</span><br><span class="line">        path.addQuadCurveToPoint(<span class="type">CGPoint</span>(x: size.width/<span class="number">1.8</span>, y: size.height - <span class="number">77</span>), controlPoint: <span class="type">CGPoint</span>(x: size.width - <span class="number">120</span>, y: <span class="number">193</span>))</span><br><span class="line">        path.addArcWithCenter(<span class="type">CGPoint</span>(x: size.width/<span class="number">1.9</span>, y: size.height - <span class="number">140</span>), radius: <span class="number">63</span>, startAngle: <span class="type">CGFloat</span>(<span class="number">0.5</span>*<span class="type">M_PI</span>), endAngle: <span class="type">CGFloat</span>(<span class="number">2.5</span>*<span class="type">M_PI</span>), clockwise: <span class="literal">true</span>)</span><br><span class="line">        path.addCurveToPoint(<span class="type">CGPoint</span>(x: <span class="number">0</span>, y: size.height - <span class="number">107</span>), controlPoint1: <span class="type">CGPoint</span>(x: size.width/<span class="number">1.8</span> - <span class="number">60</span>, y: size.height - <span class="number">67</span>), controlPoint2: <span class="type">CGPoint</span>(x: <span class="number">150</span>, y: size.height/<span class="number">2.3</span>-<span class="number">7</span>))</span><br><span class="line">        path.addLineToPoint(<span class="type">CGPoint</span>(x: -<span class="number">100</span>, y: size.height + <span class="number">7</span>))</span><br><span class="line">        </span><br><span class="line">        <span class="comment">//å…³é”®å¸§åŠ¨ç”»ä½œç”¨äºposition</span></span><br><span class="line">        <span class="keyword">let</span> animation:<span class="type">CAKeyframeAnimation</span> = <span class="type">CAKeyframeAnimation</span>.<span class="keyword">init</span>(keyPath: <span class="string">"position"</span>)</span><br><span class="line">        animation.path = path.<span class="type">CGPath</span></span><br><span class="line">        <span class="comment">//åŠ¨ç”»èŠ‚å¥ä¸ºçº¿æ€§åŠ¨ç”»</span></span><br><span class="line">        animation.timingFunction = <span class="type">CAMediaTimingFunction</span>.<span class="keyword">init</span>(name: kCAMediaTimingFunctionLinear)</span><br><span class="line">        <span class="comment">//åŠ¨ç”»æ—¶é—´</span></span><br><span class="line">        animation.duration = <span class="number">6</span></span><br><span class="line">        <span class="comment">//åŠ¨ç”»é‡å¤æ¬¡æ•°</span></span><br><span class="line">        animation.repeatCount = <span class="type">MAXFLOAT</span></span><br><span class="line">        <span class="comment">//åŠ¨ç”»æ˜¯å¦é€†è½¬</span></span><br><span class="line">        animation.autoreverses = <span class="literal">false</span></span><br><span class="line">        animation.calculationMode = kCAAnimationCubicPaced</span><br><span class="line">        <span class="comment">//åŠ¨ç”»è§’åº¦æ˜¯å¦è°ƒæ•´</span></span><br><span class="line">        animation.rotationMode = kCAAnimationRotateAuto</span><br><span class="line">        view.layer.addSublayer(carLayer)</span><br><span class="line">        carLayer.addAnimation(animation, forKey: <span class="string">"carAnimation"</span>)</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä¸Šé¢çš„ä»£ç åªæ˜¯ç®€å•çš„ç¤ºä¾‹ï¼Œå®Œæ•´ä»£ç å¾—å»<a href="https://github.com/631106979/RollerCoasterAnimation" target="_blank" rel="external">æˆ‘çš„github</a>ä¸Šå»ä¸‹è½½ï¼Œåˆ°è¿™é‡Œä¹Ÿå°±åŸºæœ¬ä¸Šå®Œæˆäº†ï¼Œå¤§å®¶æœ‰ä»€ä¹ˆç–‘é—®å¯ä»¥ç•™è¨€è¯„è®ºï¼Œè°¢è°¢å¤§å®¶çš„è§‚çœ‹</p>
</blockquote>
<p><a href="https://github.com/631106979/RollerCoasterAnimation" target="_blank" rel="external">demoåœ°å€</a></p>
<p><a href="https://github.com/numbbbbb/the-swift-programming-language-in-chinese" target="_blank" rel="external">å‚è€ƒæ–‡æ¡£ï¼ˆéå¸¸å¥½çš„ä¸€ç¯‡å…³äºä»‹ç»CALayerå­¦ä¹ ä¸­æ–‡ç¿»è¯‘æ–‡æ¡£ï¼Œå­¦ä¹ å¿…çœ‹ï¼‰</a></p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 06æœˆ 22æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - å®ç°ç±»ä¼¼å¾®ä¿¡å’Œæ”¯ä»˜å®çš„å¯†ç è¾“å…¥æ¡†ï¼ˆUIKeyInputåè®®ï¼‰]]></title>
      <url>http://imwcl.com/2016/06/02/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6-%E5%AE%9E%E7%8E%B0%E7%B1%BB%E4%BC%BC%E5%BE%AE%E4%BF%A1%E5%92%8C%E6%94%AF%E4%BB%98%E5%AE%9D%E7%9A%84%E5%AF%86%E7%A0%81%E8%BE%93%E5%85%A5%E6%A1%86%EF%BC%88UIKeyInput%E5%8D%8F%E8%AE%AE%EF%BC%89/</url>
      <content type="html"><![CDATA[<p>ç›®å‰åœ¨é¡¹ç›®ä¸­éœ€è¦å®ç°å‘çº¢åŒ…çš„åŠŸèƒ½ï¼Œè‡ªå·±å°±å†™äº†ä¸€ä¸ªå¯†ç è¾“å…¥æ¡†çš„æ§ä»¶ï¼Œä¸»è¦ç”¨åˆ°äº†<code>UIKeyInput</code>åè®®å’Œ<code>CoreGraphics</code>æ¡†æ¶ï¼Œæ•ˆæœç±»ä¼¼å¾®ä¿¡æ”¯ä»˜ï¼Œæ„Ÿè§‰è¿˜è¡Œå°±æŠŠæˆ‘çš„æ€è·¯å’Œåˆ¶ä½œè¿‡ç¨‹å†™ä¸‹æ¥ç»™å¤§å®¶åˆ†äº«ä¸€ä¸‹ã€‚ï¼ˆ<a href="https://github.com/631106979/WCLPassWordView" target="_blank" rel="external">demoåœ°å€</a>è§‰å¾—æœ‰ç”¨çš„å¯ä»¥starä¸€ä¸‹ï¼‰</p>
<p><img src="http://ww2.sinaimg.cn/large/72f96cbagw1f4g3avwocig20a80ii78g" alt="wcl.gif"></p>
<a id="more"></a>
<h3 id="è®©ä½ çš„è‡ªå®šä¹‰Viewå…·å¤‡è¾“å…¥çš„åŠŸèƒ½ï¼ˆUIKeyInputåè®®ï¼‰"><a href="#è®©ä½ çš„è‡ªå®šä¹‰Viewå…·å¤‡è¾“å…¥çš„åŠŸèƒ½ï¼ˆUIKeyInputåè®®ï¼‰" class="headerlink" title="è®©ä½ çš„è‡ªå®šä¹‰Viewå…·å¤‡è¾“å…¥çš„åŠŸèƒ½ï¼ˆUIKeyInputåè®®ï¼‰"></a>è®©ä½ çš„è‡ªå®šä¹‰Viewå…·å¤‡è¾“å…¥çš„åŠŸèƒ½ï¼ˆUIKeyInputåè®®ï¼‰</h3><p>é€šè¿‡<code>UIKeyInput</code>åè®®å¯ä»¥ä¸ºå“åº”è€…æä¾›ç®€å•çš„é”®ç›˜è¾“å…¥çš„åŠŸèƒ½ï¼Œè®©éœ€è¦é”®ç›˜çš„responderæˆä¸ºç¬¬ä¸€å“åº”è€…å°±è¡Œäº†ã€‚<code>UIKeyInput</code>åè®®å¿…é¡»å®ç°çš„æœ‰ä¸‰ä¸ªæ–¹æ³•ï¼Œåˆ†åˆ«æ˜¯ä»¥ä¸‹æ–¹æ³•ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - UIKeyInput</span><br><span class="line">/**</span><br><span class="line"> *  ç”¨äºæ˜¾ç¤ºçš„æ–‡æœ¬å¯¹è±¡æ˜¯å¦æœ‰ä»»ä½•æ–‡æœ¬</span><br><span class="line"> */</span><br><span class="line">- (BOOL)hasText &#123;</span><br><span class="line">    return self.textStore.length &gt; 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  æ’å…¥æ–‡æœ¬</span><br><span class="line"> */</span><br><span class="line">- (void)insertText:(NSString *)text &#123;</span><br><span class="line">    if (self.textStore.length &lt; self.passWordNum) &#123;</span><br><span class="line">        //åˆ¤æ–­æ˜¯å¦æ˜¯æ•°å­—</span><br><span class="line">        NSCharacterSet *cs = [[NSCharacterSet characterSetWithCharactersInString:MONEYNUMBERS] invertedSet];</span><br><span class="line">        NSString*filtered = [[text componentsSeparatedByCharactersInSet:cs] componentsJoinedByString:@&quot;&quot;];</span><br><span class="line">        BOOL basicTest = [text isEqualToString:filtered];</span><br><span class="line">        if(basicTest) &#123;</span><br><span class="line">          if ([self.delegate respondsToSelector:@selector(passWordDidChange:)]) &#123;</span><br><span class="line">                [self.delegate passWordDidChange:self];</span><br><span class="line">            &#125;</span><br><span class="line">            if (self.textStore.length == self.passWordNum) &#123;</span><br><span class="line">                if ([self.delegate respondsToSelector:@selector(passWordCompleteInput:)]) &#123;</span><br><span class="line">                    [self.delegate passWordCompleteInput:self];</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            [self.textStore appendString:text];</span><br><span class="line">            [self setNeedsDisplay];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  åˆ é™¤æ–‡æœ¬</span><br><span class="line"> */</span><br><span class="line">- (void)deleteBackward &#123;</span><br><span class="line">    if (self.textStore.length &gt; 0) &#123;</span><br><span class="line">        [self.textStore deleteCharactersInRange:NSMakeRange(self.textStore.length - 1, 1)];</span><br><span class="line">      if ([self.delegate respondsToSelector:@selector(passWordDidChange:)]) &#123;</span><br><span class="line">            [self.delegate passWordDidChange:self];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  æ˜¯å¦èƒ½æˆä¸ºç¬¬ä¸€å“åº”è€…</span><br><span class="line"> */</span><br><span class="line">- (BOOL)canBecomeFirstResponder &#123;</span><br><span class="line">    return YES;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  ç‚¹å‡»æˆä¸ºç¬¬ä¸€ç›¸åº”è€…</span><br><span class="line"> */</span><br><span class="line">- (void)touchesBegan:(NSSet&lt;UITouch *&gt; *)touches withEvent:(UIEvent *)event &#123;</span><br><span class="line">    if (![self isFirstResponder]) &#123;</span><br><span class="line">        [self becomeFirstResponder];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="å®ç°ç±»ä¼¼å¾®ä¿¡å’Œæ”¯ä»˜å®çš„å¯†ç è¾“å…¥æ¡†"><a href="#å®ç°ç±»ä¼¼å¾®ä¿¡å’Œæ”¯ä»˜å®çš„å¯†ç è¾“å…¥æ¡†" class="headerlink" title="å®ç°ç±»ä¼¼å¾®ä¿¡å’Œæ”¯ä»˜å®çš„å¯†ç è¾“å…¥æ¡†"></a>å®ç°ç±»ä¼¼å¾®ä¿¡å’Œæ”¯ä»˜å®çš„å¯†ç è¾“å…¥æ¡†</h3><p>å®ç°çš„æ€è·¯æ˜¯é€šè¿‡<code>CoreGraphics</code>æ¡†æ¶ç»˜åˆ¶å‡ºå¯†ç è¾“å…¥æ¡†çš„å¤–æ¡†å’Œé‡Œé¢çš„å°é»‘ç‚¹ï¼Œç„¶åé€šè¿‡ä»é”®ç›˜ä¸Šè·å–åˆ°çš„å­—ç¬¦ä¸²åˆ¤æ–­è¾“å…¥çš„ä½æ•°ï¼Œå…·ä½“å®ç°å¦‚ä¸‹ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">/**</span><br><span class="line"> *  è®¾ç½®æ­£æ–¹å½¢çš„è¾¹é•¿</span><br><span class="line"> */</span><br><span class="line">- (void)setSquareWidth:(CGFloat)squareWidth &#123;</span><br><span class="line">    _squareWidth = squareWidth;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  è®¾ç½®é”®ç›˜çš„ç±»å‹</span><br><span class="line"> */</span><br><span class="line">- (UIKeyboardType)keyboardType &#123;</span><br><span class="line">    return UIKeyboardTypeNumberPad;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  è®¾ç½®å¯†ç çš„ä½æ•°</span><br><span class="line"> */</span><br><span class="line">- (void)setPassWordNum:(NSUInteger)passWordNum &#123;</span><br><span class="line">    _passWordNum = passWordNum;</span><br><span class="line">    [self setNeedsDisplay];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/**</span><br><span class="line"> *  ç»˜åˆ¶</span><br><span class="line"> */</span><br><span class="line">- (void)drawRect:(CGRect)rect &#123;</span><br><span class="line">    CGFloat height = rect.size.height;</span><br><span class="line">    CGFloat width = rect.size.width;</span><br><span class="line">    CGFloat x = (width - self.squareWidth*self.passWordNum)/2.0;</span><br><span class="line">    CGFloat y = (height - self.squareWidth)/2.0;</span><br><span class="line">    CGContextRef context = UIGraphicsGetCurrentContext();</span><br><span class="line">    //ç”»å¤–æ¡†</span><br><span class="line">    CGContextAddRect(context, CGRectMake( x, y, self.squareWidth*self.passWordNum, self.squareWidth));</span><br><span class="line">    CGContextSetLineWidth(context, 1);</span><br><span class="line">    CGContextSetStrokeColorWithColor(context, self.rectColor.CGColor);</span><br><span class="line">    CGContextSetFillColorWithColor(context, [UIColor whiteColor].CGColor);</span><br><span class="line">    //ç”»ç«–æ¡</span><br><span class="line">    for (int i = 1; i &lt;= self.passWordNum; i++) &#123;</span><br><span class="line">        CGContextMoveToPoint(context, x+i*self.squareWidth, y);</span><br><span class="line">        CGContextAddLineToPoint(context, x+i*self.squareWidth, y+self.squareWidth);</span><br><span class="line">         CGContextClosePath(context);</span><br><span class="line">    &#125;</span><br><span class="line">    CGContextDrawPath(context, kCGPathFillStroke);</span><br><span class="line">    CGContextSetFillColorWithColor(context, self.pointColor.CGColor);</span><br><span class="line">    //ç”»é»‘ç‚¹</span><br><span class="line">    for (int i = 1; i &lt;= self.textStore.length; i++) &#123;</span><br><span class="line">        CGContextAddArc(context,  x+i*self.squareWidth - self.squareWidth/2.0, y+self.squareWidth/2, self.pointRadius, 0, M_PI*2, YES);</span><br><span class="line">        CGContextDrawPath(context, kCGPathFill);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>ä»¥ä¸Šå°±æ˜¯å®ç°çš„ä¸»è¦ä»£ç å’Œåˆ†æï¼Œå¤§å®¶éœ€è¦çœ‹<a href="https://github.com/631106979/WCLPassWordView" target="_blank" rel="external">demo</a>å¯ä»¥ç‚¹å‡»è¶…é“¾æ¥è¿›å»ä¸‹è½½è§‚çœ‹ï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»~</p>
</blockquote>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 06æœˆ 02æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - ç”¨AVFoundationè‡ªå®šä¹‰è§†é¢‘å½•åˆ¶åŠŸèƒ½]]></title>
      <url>http://imwcl.com/2016/05/25/iOS%E5%BC%80%E5%8F%91%E8%BF%9B%E9%98%B6%20-%20%E7%94%A8AVFoundation%E8%87%AA%E5%AE%9A%E4%B9%89%E8%A7%86%E9%A2%91%E5%BD%95%E5%88%B6%E5%8A%9F%E8%83%BD/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ç³»ç»Ÿè‡ªå¸¦çš„å½•åˆ¶è§†é¢‘çš„åŠŸèƒ½æ˜¾ç„¶æ— æ³•æ»¡è¶³ç¾å·¥å’Œé¡¹ç›®ç»ç†çš„è¦æ±‚ï¼Œè‡ªå®šä¹‰è§†é¢‘å½•åˆ¶å°±éå¸¸é‡è¦äº†ï¼Œé‚£ä¹ˆä¸‹é¢æ¥å¸¦å¤§å®¶åˆ¶ä½œå±äºè‡ªå·±çš„è§†é¢‘å½•åˆ¶ç•Œé¢ã€‚</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20160525152423044" alt="æ•ˆæœå›¾"></p>
<h2 id="ç®€ä»‹"><a href="#ç®€ä»‹" class="headerlink" title="ç®€ä»‹"></a>ç®€ä»‹</h2><p>è‡ªå®šä¹‰è§†é¢‘å½•åˆ¶éœ€è¦ç”¨åˆ°çš„æ¡†æ¶ä¸»è¦æ˜¯<code>AVFoundation</code>å’Œ<code>CoreMedia</code>ï¼ŒåŒ…æ‹¬è§†é¢‘è¾“å‡ºï¼Œè¾“å…¥å’Œæ–‡ä»¶çš„è¯»å†™ï¼Œä¸‹é¢ç»™å¤§å®¶ç½—åˆ—ä¸€ä¸‹å°†è¦ç”¨åˆ°çš„ç±»ï¼š</p>
<a id="more"></a>
<ul>
<li><strong>AVCaptureSession</strong></li>
<li><strong>AVCaptureVideoPreviewLayer</strong></li>
<li><strong>AVCaptureDeviceInput</strong></li>
<li><strong>AVCaptureConnection</strong></li>
<li><strong>AVCaptureVideoDataOutput</strong></li>
<li><strong>AVCaptureAudioDataOutput</strong></li>
<li><strong>AVAssetWriter</strong></li>
<li><strong>AVAssetWriterInput</strong></li>
</ul>
<blockquote>
<p>ä¸‹é¢è¯¦ç»†ä»‹ç»æ¯ä¸ªç±»å’Œä»£ç å®ç°</p>
</blockquote>
<h2 id="AVCaptureSession"><a href="#AVCaptureSession" class="headerlink" title="AVCaptureSession"></a>AVCaptureSession</h2><p><code>AVCaptureSession</code>æ˜¯<code>AVFoundation</code>æ•æ‰ç±»çš„ä¸­å¿ƒæ¢çº½ï¼Œæˆ‘ä»¬å…ˆä»è¿™ä¸ªç±»å…¥æ‰‹ï¼Œåœ¨è§†é¢‘æ•è·æ—¶,å®¢æˆ·ç«¯å¯ä»¥å®ä¾‹åŒ–<code>AVCaptureSession</code>å¹¶æ·»åŠ é€‚å½“çš„<code>AVCaptureInputs</code>ã€<code>AVCaptureDeviceInput</code>å’Œè¾“å‡ºï¼Œæ¯”å¦‚<code>AVCaptureMovieFileOutput</code>ã€‚é€šè¿‡<code>[AVCaptureSession startRunning]</code>å¼€å§‹æ•°æ®æµä»è¾“å…¥åˆ°è¾“å‡º,å’Œ<code>[AVCaptureSession stopRunning]</code>åœæ­¢è¾“å‡ºè¾“å…¥çš„æµåŠ¨ã€‚å®¢æˆ·ç«¯å¯ä»¥é€šè¿‡è®¾ç½®sessionPresetå±æ€§å®šåˆ¶å½•åˆ¶è´¨é‡æ°´å¹³æˆ–è¾“å‡ºçš„æ¯”ç‰¹ç‡ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">//æ•è·è§†é¢‘çš„ä¼šè¯</span><br><span class="line">- (AVCaptureSession *)recordSession &#123;</span><br><span class="line">    if (_recordSession == nil) &#123;</span><br><span class="line">        _recordSession = [[AVCaptureSession alloc] init];</span><br><span class="line">        //æ·»åŠ åç½®æ‘„åƒå¤´çš„è¾“å‡º</span><br><span class="line">        if ([_recordSession canAddInput:self.backCameraInput]) &#123;</span><br><span class="line">            [_recordSession addInput:self.backCameraInput];</span><br><span class="line">        &#125;</span><br><span class="line">        //æ·»åŠ åç½®éº¦å…‹é£çš„è¾“å‡º</span><br><span class="line">        if ([_recordSession canAddInput:self.audioMicInput]) &#123;</span><br><span class="line">            [_recordSession addInput:self.audioMicInput];</span><br><span class="line">        &#125;</span><br><span class="line">        //æ·»åŠ è§†é¢‘è¾“å‡º</span><br><span class="line">        if ([_recordSession canAddOutput:self.videoOutput]) &#123;</span><br><span class="line">            [_recordSession addOutput:self.videoOutput];</span><br><span class="line">            //è®¾ç½®è§†é¢‘çš„åˆ†è¾¨ç‡ä¸ºåç½®æ‘„åƒå¤´</span><br><span class="line">            NSDictionary* actual = self.videoOutput.videoSettings;</span><br><span class="line">            _cx = [[actual objectForKey:@&quot;Height&quot;] integerValue];</span><br><span class="line">            _cy = [[actual objectForKey:@&quot;Width&quot;] integerValue];</span><br><span class="line">        &#125;</span><br><span class="line">        //æ·»åŠ éŸ³é¢‘è¾“å‡º</span><br><span class="line">        if ([_recordSession canAddOutput:self.audioOutput]) &#123;</span><br><span class="line">            [_recordSession addOutput:self.audioOutput];</span><br><span class="line">        &#125;</span><br><span class="line">        //è®¾ç½®è§†é¢‘å½•åˆ¶çš„æ–¹å‘</span><br><span class="line">        self.videoConnection.videoOrientation = AVCaptureVideoOrientationPortrait;</span><br><span class="line">    &#125;</span><br><span class="line">    return _recordSession;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVCaptureDevice"><a href="#AVCaptureDevice" class="headerlink" title="AVCaptureDevice"></a>AVCaptureDevice</h2><p><code>AVCaptureDevice</code>çš„æ¯ä¸ªå®ä¾‹å¯¹åº”ä¸€ä¸ªè®¾å¤‡,å¦‚æ‘„åƒå¤´æˆ–éº¦å…‹é£ã€‚<code>AVCaptureDevice</code>çš„å®ä¾‹ä¸èƒ½ç›´æ¥åˆ›å»ºã€‚æ‰€æœ‰ç°æœ‰è®¾å¤‡å¯ä»¥ä½¿ç”¨ç±»æ–¹æ³•<code>devicesWithMediaType:defaultDeviceWithMediaType:</code>è·å–ï¼Œè®¾å¤‡å¯ä»¥æä¾›ä¸€ä¸ªæˆ–å¤šä¸ªç»™å®šæµåª’ä½“ç±»å‹ã€‚<code>AVCaptureDevice</code>å®ä¾‹å¯ç”¨äºæä¾›ç»™<code>AVCaptureSession</code>åˆ›å»ºä¸€ä¸ªä¸º<code>AVCaptureDeviceInput</code>ç±»å‹çš„è¾“å…¥æºã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">//è¿”å›å‰ç½®æ‘„åƒå¤´</span><br><span class="line">- (AVCaptureDevice *)frontCamera &#123;</span><br><span class="line">    return [self cameraWithPosition:AVCaptureDevicePositionFront];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è¿”å›åç½®æ‘„åƒå¤´</span><br><span class="line">- (AVCaptureDevice *)backCamera &#123;</span><br><span class="line">    return [self cameraWithPosition:AVCaptureDevicePositionBack];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//ç”¨æ¥è¿”å›æ˜¯å‰ç½®æ‘„åƒå¤´è¿˜æ˜¯åç½®æ‘„åƒå¤´</span><br><span class="line">- (AVCaptureDevice *)cameraWithPosition:(AVCaptureDevicePosition) position &#123;</span><br><span class="line">    //è¿”å›å’Œè§†é¢‘å½•åˆ¶ç›¸å…³çš„æ‰€æœ‰é»˜è®¤è®¾å¤‡</span><br><span class="line">    NSArray *devices = [AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo];</span><br><span class="line">    //éå†è¿™äº›è®¾å¤‡è¿”å›è·Ÿpositionç›¸å…³çš„è®¾å¤‡</span><br><span class="line">    for (AVCaptureDevice *device in devices) &#123;</span><br><span class="line">        if ([device position] == position) &#123;</span><br><span class="line">            return device;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return nil;</span><br><span class="line">&#125;</span><br><span class="line">//å¼€å¯é—ªå…‰ç¯</span><br><span class="line">- (void)openFlashLight &#123;</span><br><span class="line">    AVCaptureDevice *backCamera = [self backCamera];</span><br><span class="line">    if (backCamera.torchMode == AVCaptureTorchModeOff) &#123;</span><br><span class="line">        [backCamera lockForConfiguration:nil];</span><br><span class="line">        backCamera.torchMode = AVCaptureTorchModeOn;</span><br><span class="line">        backCamera.flashMode = AVCaptureFlashModeOn;</span><br><span class="line">        [backCamera unlockForConfiguration];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line">//å…³é—­é—ªå…‰ç¯</span><br><span class="line">- (void)closeFlashLight &#123;</span><br><span class="line">    AVCaptureDevice *backCamera = [self backCamera];</span><br><span class="line">    if (backCamera.torchMode == AVCaptureTorchModeOn) &#123;</span><br><span class="line">        [backCamera lockForConfiguration:nil];</span><br><span class="line">        backCamera.torchMode = AVCaptureTorchModeOff;</span><br><span class="line">        backCamera.flashMode = AVCaptureTorchModeOff;</span><br><span class="line">        [backCamera unlockForConfiguration];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVCaptureDeviceInput"><a href="#AVCaptureDeviceInput" class="headerlink" title="AVCaptureDeviceInput"></a>AVCaptureDeviceInput</h2><p><code>AVCaptureDeviceInput</code> æ˜¯AVCaptureSessionè¾“å…¥æº,æä¾›åª’ä½“æ•°æ®ä»è®¾å¤‡è¿æ¥åˆ°ç³»ç»Ÿï¼Œé€šè¿‡<code>AVCaptureDevice</code>çš„å®ä¾‹åŒ–å¾—åˆ°ï¼Œå°±æ˜¯æˆ‘ä»¬å°†è¦ç”¨åˆ°çš„è®¾å¤‡è¾“å‡ºæºè®¾å¤‡ï¼Œä¹Ÿå°±æ˜¯å‰åæ‘„åƒå¤´ï¼Œé€šè¿‡<code>[AVCaptureDevice devicesWithMediaType:AVMediaTypeVideo]</code>æ–¹æ³•è·å¾—ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">//åç½®æ‘„åƒå¤´è¾“å…¥</span><br><span class="line">- (AVCaptureDeviceInput *)backCameraInput &#123;</span><br><span class="line">    if (_backCameraInput == nil) &#123;</span><br><span class="line">        NSError *error;</span><br><span class="line">        _backCameraInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self backCamera] error:&amp;error];</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            [SVProgressHUD showErrorWithStatus:@&quot;è·å–åç½®æ‘„åƒå¤´å¤±è´¥~&quot;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return _backCameraInput;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å‰ç½®æ‘„åƒå¤´è¾“å…¥</span><br><span class="line">- (AVCaptureDeviceInput *)frontCameraInput &#123;</span><br><span class="line">    if (_frontCameraInput == nil) &#123;</span><br><span class="line">        NSError *error;</span><br><span class="line">        _frontCameraInput = [[AVCaptureDeviceInput alloc] initWithDevice:[self frontCamera] error:&amp;error];</span><br><span class="line">        if (error) &#123;</span><br><span class="line">            [SVProgressHUD showErrorWithStatus:@&quot;è·å–å‰ç½®æ‘„åƒå¤´å¤±è´¥~&quot;];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return _frontCameraInput;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVCaptureVideoPreviewLayer"><a href="#AVCaptureVideoPreviewLayer" class="headerlink" title="AVCaptureVideoPreviewLayer"></a>AVCaptureVideoPreviewLayer</h2><p>æ˜¯<code>CoreAnimation</code>é‡Œé¢layerçš„ä¸€ä¸ªå­ç±»ï¼Œç”¨æ¥åšä¸º<code>AVCaptureSession</code>é¢„è§ˆè§†é¢‘è¾“å‡ºï¼Œç®€å•æ¥è¯´å°±æ˜¯æ¥åšä¸ºæ‹æ‘„çš„è§†é¢‘å‘ˆç°çš„ä¸€ä¸ªlayerã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">//æ•è·åˆ°çš„è§†é¢‘å‘ˆç°çš„layer</span><br><span class="line">- (AVCaptureVideoPreviewLayer *)previewLayer &#123;</span><br><span class="line">    if (_previewLayer == nil) &#123;</span><br><span class="line">        //é€šè¿‡AVCaptureSessionåˆå§‹åŒ–</span><br><span class="line">        AVCaptureVideoPreviewLayer *preview = [[AVCaptureVideoPreviewLayer alloc] initWithSession:self.recordSession];</span><br><span class="line">        //è®¾ç½®æ¯”ä¾‹ä¸ºé“ºæ»¡å…¨å±</span><br><span class="line">        preview.videoGravity = AVLayerVideoGravityResizeAspectFill;</span><br><span class="line">        _previewLayer = preview;</span><br><span class="line">    &#125;</span><br><span class="line">    return _previewLayer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVCaptureMovieFileOutput"><a href="#AVCaptureMovieFileOutput" class="headerlink" title="AVCaptureMovieFileOutput"></a>AVCaptureMovieFileOutput</h2><p><code>AVCaptureMovieFileOutput</code>æ˜¯<code>AVCaptureFileOutput</code>çš„å­ç±»ï¼Œç”¨æ¥å†™å…¥<code>QuickTime</code>è§†é¢‘ç±»å‹çš„åª’ä½“æ–‡ä»¶ã€‚å› ä¸ºè¿™ä¸ªç±»åœ¨iphoneä¸Šå¹¶ä¸èƒ½å®ç°æš‚åœå½•åˆ¶ï¼Œå’Œä¸èƒ½å®šä¹‰è§†é¢‘æ–‡ä»¶çš„ç±»å‹ï¼Œæ‰€ä»¥åœ¨è¿™é‡Œå¹¶ä¸ä½¿ç”¨ï¼Œè€Œæ˜¯ç”¨çµæ´»æ€§æ›´å¼ºçš„<code>AVCaptureVideoDataOutput</code>å’Œ<code>AVCaptureAudioDataOutput</code>æ¥å®ç°è§†é¢‘çš„å½•åˆ¶ã€‚</p>
<h2 id="AVCaptureVideoDataOutput"><a href="#AVCaptureVideoDataOutput" class="headerlink" title="AVCaptureVideoDataOutput"></a>AVCaptureVideoDataOutput</h2><p><code>AVCaptureVideoDataOutput</code>æ˜¯<code>AVCaptureOutput</code>ä¸€ä¸ªå­ç±»ï¼Œå¯ä»¥ç”¨äºç”¨æ¥è¾“å‡ºæœªå‹ç¼©æˆ–å‹ç¼©çš„è§†é¢‘æ•è·çš„å¸§ï¼Œ<code>AVCaptureVideoDataOutput</code>äº§ç”Ÿçš„å®ä¾‹å¯ä»¥ä½¿ç”¨å…¶ä»–åª’ä½“è§†é¢‘å¸§é€‚åˆçš„apiå¤„ç†ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç”¨<code>captureOutput:didOutputSampleBuffer:fromConnection:</code>ä»£ç†æ–¹æ³•æ¥è·å–å¸§æ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">//è§†é¢‘è¾“å‡º</span><br><span class="line">- (AVCaptureVideoDataOutput *)videoOutput &#123;</span><br><span class="line">    if (_videoOutput == nil) &#123;</span><br><span class="line">        _videoOutput = [[AVCaptureVideoDataOutput alloc] init];</span><br><span class="line">        [_videoOutput setSampleBufferDelegate:self queue:self.captureQueue];</span><br><span class="line">        NSDictionary* setcapSettings = [NSDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">                                        [NSNumber numberWithInt:kCVPixelFormatType_420YpCbCr8BiPlanarVideoRange], kCVPixelBufferPixelFormatTypeKey,</span><br><span class="line">                                        nil];</span><br><span class="line">        _videoOutput.videoSettings = setcapSettings;</span><br><span class="line">    &#125;</span><br><span class="line">    return _videoOutput;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVCaptureAudioDataOutput"><a href="#AVCaptureAudioDataOutput" class="headerlink" title="AVCaptureAudioDataOutput"></a>AVCaptureAudioDataOutput</h2><p><code>AVCaptureAudioDataOutput</code>æ˜¯<code>AVCaptureOutput</code>çš„å­ç±»ï¼Œå¯ç”¨äºç”¨æ¥è¾“å‡ºæ•è·æ¥çš„éå‹ç¼©æˆ–å‹ç¼©çš„éŸ³é¢‘æ ·æœ¬ï¼Œ<code>AVCaptureAudioDataOutput</code>äº§ç”Ÿçš„å®ä¾‹å¯ä»¥ä½¿ç”¨å…¶ä»–åª’ä½“è§†é¢‘å¸§é€‚åˆçš„apiå¤„ç†ï¼Œåº”ç”¨ç¨‹åºå¯ä»¥ç”¨<code>captureOutput:didOutputSampleBuffer:fromConnection:</code>ä»£ç†æ–¹æ³•æ¥è·å–éŸ³é¢‘æ•°æ®ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">//éŸ³é¢‘è¾“å‡º</span><br><span class="line">- (AVCaptureAudioDataOutput *)audioOutput &#123;</span><br><span class="line">    if (_audioOutput == nil) &#123;</span><br><span class="line">        _audioOutput = [[AVCaptureAudioDataOutput alloc] init];</span><br><span class="line">        [_audioOutput setSampleBufferDelegate:self queue:self.captureQueue];</span><br><span class="line">    &#125;</span><br><span class="line">    return _audioOutput;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVCaptureConnection"><a href="#AVCaptureConnection" class="headerlink" title="AVCaptureConnection"></a>AVCaptureConnection</h2><p><code>AVCaptureConnection</code>ä»£è¡¨<code>AVCaptureInputPort</code>æˆ–ç«¯å£ä¹‹é—´çš„è¿æ¥ï¼Œå’Œä¸€ä¸ª<code>AVCaptureOutput</code>æˆ–<code>AVCaptureVideoPreviewLayer</code>åœ¨<code>AVCaptureSession</code>ä¸­çš„å‘ˆç°ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//è§†é¢‘è¿æ¥</span><br><span class="line">- (AVCaptureConnection *)videoConnection &#123;</span><br><span class="line">    _videoConnection = [self.videoOutput connectionWithMediaType:AVMediaTypeVideo];</span><br><span class="line">    return _videoConnection;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//éŸ³é¢‘è¿æ¥</span><br><span class="line">- (AVCaptureConnection *)audioConnection &#123;</span><br><span class="line">    if (_audioConnection == nil) &#123;</span><br><span class="line">        _audioConnection = [self.audioOutput connectionWithMediaType:AVMediaTypeAudio];</span><br><span class="line">    &#125;</span><br><span class="line">    return _audioConnection;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVAssetWriter"><a href="#AVAssetWriter" class="headerlink" title="AVAssetWriter"></a>AVAssetWriter</h2><p><code>AVAssetWriter</code>ä¸ºå†™å…¥åª’ä½“æ•°æ®åˆ°ä¸€ä¸ªæ–°çš„æ–‡ä»¶æä¾›æœåŠ¡ï¼Œ<code>AVAssetWriter</code>çš„å®ä¾‹å¯ä»¥è§„å®šå†™å…¥åª’ä½“æ–‡ä»¶çš„æ ¼å¼ï¼Œå¦‚<code>QuickTime</code>ç”µå½±æ–‡ä»¶æ ¼å¼æˆ–<code>MPEG-4</code>æ–‡ä»¶æ ¼å¼ç­‰ç­‰ã€‚<code>AVAssetWriter</code>æœ‰å¤šä¸ªå¹¶è¡Œçš„è½¨é“åª’ä½“æ•°æ®ï¼ŒåŸºæœ¬çš„æœ‰è§†é¢‘è½¨é“å’ŒéŸ³é¢‘è½¨é“ï¼Œå°†ä¼šåœ¨ä¸‹é¢ä»‹ç»ã€‚<code>AVAssetWriter</code>çš„å•ä¸ªå®ä¾‹å¯ç”¨äºä¸€æ¬¡å†™å…¥ä¸€ä¸ªå•ä¸€çš„æ–‡ä»¶ã€‚é‚£äº›å¸Œæœ›å†™å…¥å¤šæ¬¡æ–‡ä»¶çš„å®¢æˆ·ç«¯å¿…é¡»æ¯ä¸€æ¬¡ç”¨ä¸€ä¸ªæ–°çš„<code>AVAssetWriter</code>å®ä¾‹ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">//åˆå§‹åŒ–æ–¹æ³•</span><br><span class="line">- (instancetype)initPath:(NSString*)path Height:(NSInteger)cy width:(NSInteger)cx channels:(int)ch samples:(Float64) rate &#123;</span><br><span class="line">    self = [super init];</span><br><span class="line">    if (self) &#123;</span><br><span class="line">        self.path = path;</span><br><span class="line">        //å…ˆæŠŠè·¯å¾„ä¸‹çš„æ–‡ä»¶ç»™åˆ é™¤æ‰ï¼Œä¿è¯å½•åˆ¶çš„æ–‡ä»¶æ˜¯æœ€æ–°çš„</span><br><span class="line">        [[NSFileManager defaultManager] removeItemAtPath:self.path error:nil];</span><br><span class="line">        NSURL* url = [NSURL fileURLWithPath:self.path];</span><br><span class="line">        //åˆå§‹åŒ–å†™å…¥åª’ä½“ç±»å‹ä¸ºMP4ç±»å‹</span><br><span class="line">        _writer = [AVAssetWriter assetWriterWithURL:url fileType:AVFileTypeMPEG4 error:nil];</span><br><span class="line">        //ä½¿å…¶æ›´é€‚åˆåœ¨ç½‘ç»œä¸Šæ’­æ”¾</span><br><span class="line">        _writer.shouldOptimizeForNetworkUse = YES;</span><br><span class="line">        //åˆå§‹åŒ–è§†é¢‘è¾“å‡º</span><br><span class="line">        [self initVideoInputHeight:cy width:cx];</span><br><span class="line">        //ç¡®ä¿é‡‡é›†åˆ°rateå’Œch</span><br><span class="line">        if (rate != 0 &amp;&amp; ch != 0) &#123;</span><br><span class="line">            //åˆå§‹åŒ–éŸ³é¢‘è¾“å‡º</span><br><span class="line">            [self initAudioInputChannels:ch samples:rate];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return self;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="AVAssetWriterInput"><a href="#AVAssetWriterInput" class="headerlink" title="AVAssetWriterInput"></a>AVAssetWriterInput</h2><p>ç”¨<code>AVAssetWriterInput</code>å»æ‹¼æ¥ä¸€ä¸ªå¤šåª’ä½“æ ·æœ¬ç±»å‹ä¸º<code>CMSampleBuffer</code>çš„å®ä¾‹åˆ°<code>AVAssetWriter</code>å¯¹è±¡çš„è¾“å‡ºæ–‡ä»¶çš„ä¸€ä¸ªè½¨é“ï¼›å½“æœ‰å¤šä¸ªè¾“å…¥æ—¶ï¼Œ <code>AVAssetWriter</code>è¯•å›¾åœ¨ç”¨äºå­˜å‚¨å’Œæ’­æ”¾æ•ˆç‡çš„ç†æƒ³æ¨¡å¼å†™åª’ä½“æ•°æ®ã€‚å®ƒçš„æ¯ä¸€ä¸ªè¾“å…¥ä¿¡å·ï¼Œæ˜¯å¦èƒ½æ¥å—åª’ä½“çš„æ•°æ®æ ¹æ®é€šè¿‡<code>readyForMoreMediaData</code>çš„å€¼æ¥åˆ¤æ–­ã€‚å¦‚æœ<code>readyForMoreMediaData</code>æ˜¯<code>YES</code> ï¼Œè¯´æ˜è¾“å…¥å¯ä»¥æ¥å—åª’ä½“æ•°æ®ã€‚å¹¶ä¸”ä½ åªèƒ½åª’ä½“æ•°æ®è¿½åŠ åˆ°è¾“å…¥ç«¯ã€‚</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">//åˆå§‹åŒ–è§†é¢‘è¾“å…¥</span><br><span class="line">- (void)initVideoInputHeight:(NSInteger)cy width:(NSInteger)cx &#123;</span><br><span class="line">    //å½•åˆ¶è§†é¢‘çš„ä¸€äº›é…ç½®ï¼Œåˆ†è¾¨ç‡ï¼Œç¼–ç æ–¹å¼ç­‰ç­‰</span><br><span class="line">    NSDictionary* settings = [NSDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">                              AVVideoCodecH264, AVVideoCodecKey,</span><br><span class="line">                              [NSNumber numberWithInteger: cx], AVVideoWidthKey,</span><br><span class="line">                              [NSNumber numberWithInteger: cy], AVVideoHeightKey,</span><br><span class="line">                              nil];</span><br><span class="line">    //åˆå§‹åŒ–è§†é¢‘å†™å…¥ç±»</span><br><span class="line">    _videoInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeVideo outputSettings:settings];</span><br><span class="line">    //è¡¨æ˜è¾“å…¥æ˜¯å¦åº”è¯¥è°ƒæ•´å…¶å¤„ç†ä¸ºå®æ—¶æ•°æ®æºçš„æ•°æ®</span><br><span class="line">    _videoInput.expectsMediaDataInRealTime = YES;</span><br><span class="line">    //å°†è§†é¢‘è¾“å…¥æºåŠ å…¥</span><br><span class="line">    [_writer addInput:_videoInput];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//åˆå§‹åŒ–éŸ³é¢‘è¾“å…¥</span><br><span class="line">- (void)initAudioInputChannels:(int)ch samples:(Float64)rate &#123;</span><br><span class="line">    //éŸ³é¢‘çš„ä¸€äº›é…ç½®åŒ…æ‹¬éŸ³é¢‘å„ç§è¿™é‡Œä¸ºAAC,éŸ³é¢‘é€šé“ã€é‡‡æ ·ç‡å’ŒéŸ³é¢‘çš„æ¯”ç‰¹ç‡</span><br><span class="line">    NSDictionary *settings = [NSDictionary dictionaryWithObjectsAndKeys:</span><br><span class="line">                              [ NSNumber numberWithInt: kAudioFormatMPEG4AAC], AVFormatIDKey,</span><br><span class="line">                              [ NSNumber numberWithInt: ch], AVNumberOfChannelsKey,</span><br><span class="line">                              [ NSNumber numberWithFloat: rate], AVSampleRateKey,</span><br><span class="line">                              [ NSNumber numberWithInt: 128000], AVEncoderBitRateKey,</span><br><span class="line">                              nil];</span><br><span class="line">    //åˆå§‹åŒ–éŸ³é¢‘å†™å…¥ç±»</span><br><span class="line">    _audioInput = [AVAssetWriterInput assetWriterInputWithMediaType:AVMediaTypeAudio outputSettings:settings];</span><br><span class="line">    //è¡¨æ˜è¾“å…¥æ˜¯å¦åº”è¯¥è°ƒæ•´å…¶å¤„ç†ä¸ºå®æ—¶æ•°æ®æºçš„æ•°æ®</span><br><span class="line">    _audioInput.expectsMediaDataInRealTime = YES;</span><br><span class="line">    //å°†éŸ³é¢‘è¾“å…¥æºåŠ å…¥</span><br><span class="line">    [_writer addInput:_audioInput];</span><br><span class="line">    </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<blockquote>
<p>ä¸Šé¢æ˜¯å½•åˆ¶ä¹‹å‰çš„ä¸€äº›éœ€è¦çš„ç±»å’Œé…ç½®ï¼Œä¸‹é¢ä»‹ç»çš„æ˜¯å¦‚ä½•å°†è·å–åˆ°çš„æ•°æ®å‘ˆç°å‡ºæ¥å’Œæ€æ ·è¿›è¡Œæ–‡ä»¶å†™å…¥</p>
</blockquote>
<h2 id="å†™å…¥æ•°æ®"><a href="#å†™å…¥æ•°æ®" class="headerlink" title="å†™å…¥æ•°æ®"></a>å†™å…¥æ•°æ®</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br></pre></td><td class="code"><pre><span class="line">#pragma mark - å†™å…¥æ•°æ®</span><br><span class="line">- (void) captureOutput:(AVCaptureOutput *)captureOutput didOutputSampleBuffer:(CMSampleBufferRef)sampleBuffer fromConnection:(AVCaptureConnection *)connection &#123;</span><br><span class="line">    BOOL isVideo = YES;</span><br><span class="line">    @synchronized(self) &#123;</span><br><span class="line">        if (!self.isCapturing  || self.isPaused) &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line">        if (captureOutput != self.videoOutput) &#123;</span><br><span class="line">            isVideo = NO;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //åˆå§‹åŒ–ç¼–ç å™¨ï¼Œå½“æœ‰éŸ³é¢‘å’Œè§†é¢‘å‚æ•°æ—¶åˆ›å»ºç¼–ç å™¨</span><br><span class="line">        if ((self.recordEncoder == nil) &amp;&amp; !isVideo)                     </span><br><span class="line">        &#123;  </span><br><span class="line">            CMFormatDescriptionRef fmt = CMSampleBufferGetFormatDescription(sampleBuffer);</span><br><span class="line">            [self setAudioFormat:fmt];</span><br><span class="line">            NSString *videoName = [NSString getUploadFile_type:@&quot;video&quot; fileType:@&quot;mp4&quot;];</span><br><span class="line">            self.videoPath = [[self getVideoCachePath] stringByAppendingPathComponent:videoName];</span><br><span class="line">            self.recordEncoder = [WCLRecordEncoder encoderForPath:self.videoPath Height:_cy width:_cx channels:_channels samples:_samplerate];</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        //åˆ¤æ–­æ˜¯å¦ä¸­æ–­å½•åˆ¶è¿‡</span><br><span class="line">        if (self.discont) &#123;</span><br><span class="line">            if (isVideo) &#123;</span><br><span class="line">                return;</span><br><span class="line">            &#125;</span><br><span class="line">            self.discont = NO;</span><br><span class="line">            // è®¡ç®—æš‚åœçš„æ—¶é—´</span><br><span class="line">            CMTime pts = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);</span><br><span class="line">            CMTime last = isVideo ? _lastVideo : _lastAudio;</span><br><span class="line">            if (last.flags &amp; kCMTimeFlags_Valid) &#123;</span><br><span class="line">                if (_timeOffset.flags &amp; kCMTimeFlags_Valid) &#123;</span><br><span class="line">                    pts = CMTimeSubtract(pts, _timeOffset);</span><br><span class="line">                &#125;</span><br><span class="line">                CMTime offset = CMTimeSubtract(pts, last);</span><br><span class="line">                if (_timeOffset.value == 0) &#123;</span><br><span class="line">                    _timeOffset = offset;</span><br><span class="line">                &#125;else &#123;</span><br><span class="line">                    _timeOffset = CMTimeAdd(_timeOffset, offset);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            _lastVideo.flags = 0;</span><br><span class="line">            _lastAudio.flags = 0;</span><br><span class="line">        &#125;</span><br><span class="line">        // å¢åŠ sampleBufferçš„å¼•ç”¨è®¡æ—¶,è¿™æ ·æˆ‘ä»¬å¯ä»¥é‡Šæ”¾è¿™ä¸ªæˆ–ä¿®æ”¹è¿™ä¸ªæ•°æ®ï¼Œé˜²æ­¢åœ¨ä¿®æ”¹æ—¶è¢«é‡Šæ”¾</span><br><span class="line">        CFRetain(sampleBuffer);</span><br><span class="line">        if (_timeOffset.value &gt; 0) &#123;</span><br><span class="line">            CFRelease(sampleBuffer);</span><br><span class="line">            //æ ¹æ®å¾—åˆ°çš„timeOffsetè°ƒæ•´</span><br><span class="line">            sampleBuffer = [self adjustTime:sampleBuffer by:_timeOffset];</span><br><span class="line">        &#125;</span><br><span class="line">        // è®°å½•æš‚åœä¸Šä¸€æ¬¡å½•åˆ¶çš„æ—¶é—´</span><br><span class="line">        CMTime pts = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);</span><br><span class="line">        CMTime dur = CMSampleBufferGetDuration(sampleBuffer);</span><br><span class="line">        if (dur.value &gt; 0) &#123;</span><br><span class="line">            pts = CMTimeAdd(pts, dur);</span><br><span class="line">        &#125;</span><br><span class="line">        if (isVideo) &#123;</span><br><span class="line">            _lastVideo = pts;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            _lastAudio = pts;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    CMTime dur = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);</span><br><span class="line">    if (self.startTime.value == 0) &#123;</span><br><span class="line">        self.startTime = dur;</span><br><span class="line">    &#125;</span><br><span class="line">    CMTime sub = CMTimeSubtract(dur, self.startTime);</span><br><span class="line">    self.currentRecordTime = CMTimeGetSeconds(sub);</span><br><span class="line">    if (self.currentRecordTime &gt; self.maxRecordTime) &#123;</span><br><span class="line">        if (self.currentRecordTime - self.maxRecordTime &lt; 0.1) &#123;</span><br><span class="line">            if ([self.delegate respondsToSelector:@selector(recordProgress:)]) &#123;</span><br><span class="line">                dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    [self.delegate recordProgress:self.currentRecordTime/self.maxRecordTime];</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        return;</span><br><span class="line">    &#125;</span><br><span class="line">    if ([self.delegate respondsToSelector:@selector(recordProgress:)]) &#123;</span><br><span class="line">        dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">            [self.delegate recordProgress:self.currentRecordTime/self.maxRecordTime];</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">    // è¿›è¡Œæ•°æ®ç¼–ç </span><br><span class="line">    [self.recordEncoder encodeFrame:sampleBuffer isVideo:isVideo];</span><br><span class="line">    CFRelease(sampleBuffer);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è®¾ç½®éŸ³é¢‘æ ¼å¼</span><br><span class="line">- (void)setAudioFormat:(CMFormatDescriptionRef)fmt &#123;</span><br><span class="line">    const AudioStreamBasicDescription *asbd = CMAudioFormatDescriptionGetStreamBasicDescription(fmt);</span><br><span class="line">    _samplerate = asbd-&gt;mSampleRate;</span><br><span class="line">    _channels = asbd-&gt;mChannelsPerFrame;</span><br><span class="line">    </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è°ƒæ•´åª’ä½“æ•°æ®çš„æ—¶é—´</span><br><span class="line">- (CMSampleBufferRef)adjustTime:(CMSampleBufferRef)sample by:(CMTime)offset &#123;</span><br><span class="line">    CMItemCount count;</span><br><span class="line">    CMSampleBufferGetSampleTimingInfoArray(sample, 0, nil, &amp;count);</span><br><span class="line">    CMSampleTimingInfo* pInfo = malloc(sizeof(CMSampleTimingInfo) * count);</span><br><span class="line">    CMSampleBufferGetSampleTimingInfoArray(sample, count, pInfo, &amp;count);</span><br><span class="line">    for (CMItemCount i = 0; i &lt; count; i++) &#123;</span><br><span class="line">        pInfo[i].decodeTimeStamp = CMTimeSubtract(pInfo[i].decodeTimeStamp, offset);</span><br><span class="line">        pInfo[i].presentationTimeStamp = CMTimeSubtract(pInfo[i].presentationTimeStamp, offset);</span><br><span class="line">    &#125;</span><br><span class="line">    CMSampleBufferRef sout;</span><br><span class="line">    CMSampleBufferCreateCopyWithNewTiming(nil, sample, count, pInfo, &amp;sout);</span><br><span class="line">    free(pInfo);</span><br><span class="line">    return sout;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//é€šè¿‡è¿™ä¸ªæ–¹æ³•å†™å…¥æ•°æ®</span><br><span class="line">- (BOOL)encodeFrame:(CMSampleBufferRef) sampleBuffer isVideo:(BOOL)isVideo &#123;</span><br><span class="line">    //æ•°æ®æ˜¯å¦å‡†å¤‡å†™å…¥</span><br><span class="line">    if (CMSampleBufferDataIsReady(sampleBuffer)) &#123;</span><br><span class="line">        //å†™å…¥çŠ¶æ€ä¸ºæœªçŸ¥,ä¿è¯è§†é¢‘å…ˆå†™å…¥</span><br><span class="line">        if (_writer.status == AVAssetWriterStatusUnknown &amp;&amp; isVideo) &#123;</span><br><span class="line">            //è·å–å¼€å§‹å†™å…¥çš„CMTime</span><br><span class="line">            CMTime startTime = CMSampleBufferGetPresentationTimeStamp(sampleBuffer);</span><br><span class="line">            //å¼€å§‹å†™å…¥</span><br><span class="line">            [_writer startWriting];</span><br><span class="line">            [_writer startSessionAtSourceTime:startTime];</span><br><span class="line">        &#125;</span><br><span class="line">        //å†™å…¥å¤±è´¥</span><br><span class="line">        if (_writer.status == AVAssetWriterStatusFailed) &#123;</span><br><span class="line">            NSLog(@&quot;writer error %@&quot;, _writer.error.localizedDescription);</span><br><span class="line">            return NO;</span><br><span class="line">        &#125;</span><br><span class="line">        //åˆ¤æ–­æ˜¯å¦æ˜¯è§†é¢‘</span><br><span class="line">        if (isVideo) &#123;</span><br><span class="line">            //è§†é¢‘è¾“å…¥æ˜¯å¦å‡†å¤‡æ¥å—æ›´å¤šçš„åª’ä½“æ•°æ®</span><br><span class="line">            if (_videoInput.readyForMoreMediaData == YES) &#123;</span><br><span class="line">                //æ‹¼æ¥æ•°æ®</span><br><span class="line">                [_videoInput appendSampleBuffer:sampleBuffer];</span><br><span class="line">                return YES;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;else &#123;</span><br><span class="line">            //éŸ³é¢‘è¾“å…¥æ˜¯å¦å‡†å¤‡æ¥å—æ›´å¤šçš„åª’ä½“æ•°æ®</span><br><span class="line">            if (_audioInput.readyForMoreMediaData) &#123;</span><br><span class="line">                //æ‹¼æ¥æ•°æ®</span><br><span class="line">                [_audioInput appendSampleBuffer:sampleBuffer];</span><br><span class="line">                return YES;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    return NO;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="å®Œæˆå½•åˆ¶å¹¶å†™å…¥ç›¸å†Œ"><a href="#å®Œæˆå½•åˆ¶å¹¶å†™å…¥ç›¸å†Œ" class="headerlink" title="å®Œæˆå½•åˆ¶å¹¶å†™å…¥ç›¸å†Œ"></a>å®Œæˆå½•åˆ¶å¹¶å†™å…¥ç›¸å†Œ</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><span class="line">//åœæ­¢å½•åˆ¶</span><br><span class="line">- (void) stopCaptureHandler:(void (^)(UIImage *movieImage))handler &#123;</span><br><span class="line">    @synchronized(self) &#123;</span><br><span class="line">        if (self.isCapturing) &#123;</span><br><span class="line">            NSString* path = self.recordEncoder.path;</span><br><span class="line">            NSURL* url = [NSURL fileURLWithPath:path];</span><br><span class="line">            self.isCapturing = NO;</span><br><span class="line">            dispatch_async(_captureQueue, ^&#123;</span><br><span class="line">                [self.recordEncoder finishWithCompletionHandler:^&#123;</span><br><span class="line">                    self.isCapturing = NO;</span><br><span class="line">                    self.recordEncoder = nil;</span><br><span class="line">                    [[PHPhotoLibrary sharedPhotoLibrary] performChanges:^&#123;</span><br><span class="line">                        [PHAssetChangeRequest creationRequestForAssetFromVideoAtFileURL:url];</span><br><span class="line">                    &#125; completionHandler:^(BOOL success, NSError * _Nullable error) &#123;</span><br><span class="line">                        NSLog(@&quot;ä¿å­˜æˆåŠŸ&quot;);</span><br><span class="line">                    &#125;];</span><br><span class="line">                    [self movieToImageHandler:handler];</span><br><span class="line">                &#125;];</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//è·å–è§†é¢‘ç¬¬ä¸€å¸§çš„å›¾ç‰‡</span><br><span class="line">- (void)movieToImageHandler:(void (^)(UIImage *movieImage))handler &#123;</span><br><span class="line">    NSURL *url = [NSURL fileURLWithPath:self.videoPath];</span><br><span class="line">    AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:url options:nil];</span><br><span class="line">    AVAssetImageGenerator *generator = [[AVAssetImageGenerator alloc] initWithAsset:asset];</span><br><span class="line">    generator.appliesPreferredTrackTransform = TRUE;</span><br><span class="line">    CMTime thumbTime = CMTimeMakeWithSeconds(0, 60);</span><br><span class="line">    generator.apertureMode = AVAssetImageGeneratorApertureModeEncodedPixels;</span><br><span class="line">    AVAssetImageGeneratorCompletionHandler generatorHandler =</span><br><span class="line">    ^(CMTime requestedTime, CGImageRef im, CMTime actualTime, AVAssetImageGeneratorResult result, NSError *error)&#123;</span><br><span class="line">        if (result == AVAssetImageGeneratorSucceeded) &#123;</span><br><span class="line">            UIImage *thumbImg = [UIImage imageWithCGImage:im];</span><br><span class="line">            if (handler) &#123;</span><br><span class="line">                dispatch_async(dispatch_get_main_queue(), ^&#123;</span><br><span class="line">                    handler(thumbImg);</span><br><span class="line">                &#125;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    [generator generateCGImagesAsynchronouslyForTimes:</span><br><span class="line">     [NSArray arrayWithObject:[NSValue valueWithCMTime:thumbTime]] completionHandler:generatorHandler];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">//å®Œæˆè§†é¢‘å½•åˆ¶æ—¶è°ƒç”¨</span><br><span class="line">- (void)finishWithCompletionHandler:(void (^)(void))handler &#123;</span><br><span class="line">    [_writer finishWritingWithCompletionHandler: handler];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<hr>
<p>ä»¥ä¸Šå°±æ˜¯æœ¬åšå®¢å†…å®¹çš„å…¨éƒ¨å†…å®¹ï¼Œå¤§å®¶å¦‚æœæœ‰ä»€ä¹ˆç–‘é—®å¯ä»¥é—®æˆ‘ï¼Œæœ¬æ–‡é™„å¸¦æœ‰<a href="https://github.com/631106979/WCLRecordVideo" target="_blank" rel="external">demo</a>ï¼Œå¤§å®¶å¯ä»¥å»çœ‹çœ‹å…·ä½“æ€ä¹ˆä½¿ç”¨ï¼Œæœ‰ç”¨çš„è¯å¯ä»¥ç‚¹ä¸€ä¸‹starï¼Œè°¢è°¢å¤§å®¶çš„é˜…è¯»~~</p>
<h2 id="æˆ‘çš„demoåœ°å€"><a href="#æˆ‘çš„demoåœ°å€" class="headerlink" title="æˆ‘çš„demoåœ°å€"></a><a href="https://github.com/631106979/WCLRecordVideo" target="_blank" rel="external">æˆ‘çš„demoåœ°å€</a></h2><hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 05æœˆ 25æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘å°ç»“ - é€šè¿‡PUTè¯·æ±‚ä¸Šä¼ æ•°æ®]]></title>
      <url>http://imwcl.com/2016/05/17/iOS%E5%BC%80%E5%8F%91-%E9%80%9A%E8%BF%87PUT%E8%AF%B7%E6%B1%82%E4%B8%8A%E4%BC%A0%E6%95%B0%E6%8D%AE/</url>
      <content type="html"><![CDATA[<blockquote>
<p>ä¸€èˆ¬æœåŠ¡å™¨ä¸Šä¼ æ•°æ®ä¸€èˆ¬éƒ½æ˜¯ç”¨POSTè¯·æ±‚ï¼Œè¿™æ ·é€šè¿‡AFNetworkingçš„POSTè¯·æ±‚ç¨³ç¨³çš„ï¼Œä½†æ˜¯æœ‰ä¸€å¤©é‡åˆ°ä¸€ä¸ªé—®é¢˜ï¼ŒæœåŠ¡å™¨ä¸Šä¼ æ•°æ®ç”¨çš„æ˜¯PUTè¯·æ±‚ï¼Œå‘ç°ç”¨AFNetworkingå¹¶ä¸æ˜¯é‚£ä¹ˆå¥½ç”¨ï¼Œä»Šå¤©å°±æ¥è®²ä¸€ä¸‹å¦‚ä½•é€šè¿‡PUTè¯·æ±‚ä¸Šä¼ æ•°æ®ã€‚</p>
</blockquote>
<a id="more"></a>
<h2 id="ä»€ä¹ˆæ˜¯PUTè¯·æ±‚"><a href="#ä»€ä¹ˆæ˜¯PUTè¯·æ±‚" class="headerlink" title="ä»€ä¹ˆæ˜¯PUTè¯·æ±‚"></a>ä»€ä¹ˆæ˜¯PUTè¯·æ±‚</h2><p>PUTè¯·æ±‚æ˜¯è¯·æ±‚æœåŠ¡å™¨å­˜å‚¨ä¸€ä¸ªèµ„æºï¼Œå¹¶ç”¨Request-URIä½œä¸ºå…¶æ ‡è¯†ï¼Œè·ŸPOSTç±»ä¼¼ï¼Œä½†ä¸å¸¸ç”¨ï¼ŒPUTè¯·æ±‚æ¯”è¾ƒå°‘è§ã€‚HTMLè¡¨å•ä¹Ÿä¸æ”¯æŒè¿™ä¸ªã€‚æœ¬è´¨ä¸Šæ¥è®²ï¼Œ PUTå’ŒPOSTæä¸ºç›¸ä¼¼ï¼Œéƒ½æ˜¯å‘æœåŠ¡å™¨å‘é€æ•°æ®ï¼Œä½†å®ƒä»¬ä¹‹é—´æœ‰ä¸€ä¸ªé‡è¦åŒºåˆ«ï¼ŒPUTé€šå¸¸æŒ‡å®šäº†èµ„æºçš„å­˜æ”¾ä½ç½®ï¼Œè€ŒPOSTåˆ™æ²¡æœ‰ï¼ŒPOSTçš„æ•°æ®å­˜æ”¾ä½ç½®ç”±æœåŠ¡å™¨è‡ªå·±å†³å®šã€‚ä¸¾ä¸ªä¾‹å­ï¼šå¦‚ä¸€ä¸ªç”¨äºæäº¤åšæ–‡çš„URLï¼Œ/addBlogã€‚å¦‚æœç”¨PUTï¼Œåˆ™æäº¤çš„URLä¼šæ˜¯åƒè¿™æ ·çš„â€/addBlog/abc123â€ï¼Œå…¶ä¸­abc123å°±æ˜¯è¿™ä¸ªåšæ–‡çš„åœ°å€ã€‚è€Œå¦‚æœç”¨POSTï¼Œåˆ™è¿™ä¸ªåœ°å€ä¼šåœ¨æäº¤åç”±æœåŠ¡å™¨å‘ŠçŸ¥å®¢æˆ·ç«¯ã€‚ç›®å‰å¤§éƒ¨åˆ†åšå®¢éƒ½æ˜¯è¿™æ ·çš„ã€‚æ˜¾ç„¶ï¼ŒPUTå’ŒPOSTç”¨é€”æ˜¯ä¸ä¸€æ ·çš„ã€‚å…·ä½“ç”¨å“ªä¸ªè¿˜å–å†³äºå½“å‰çš„ä¸šåŠ¡åœºæ™¯ã€‚</p>
<h2 id="POSTå’ŒPUTçš„è¯·æ±‚æ ¹æœ¬åŒºåˆ«"><a href="#POSTå’ŒPUTçš„è¯·æ±‚æ ¹æœ¬åŒºåˆ«" class="headerlink" title="POSTå’ŒPUTçš„è¯·æ±‚æ ¹æœ¬åŒºåˆ«"></a>POSTå’ŒPUTçš„è¯·æ±‚æ ¹æœ¬åŒºåˆ«</h2><p>æœ‰çš„è§‚ç‚¹è®¤ä¸ºï¼Œåº”è¯¥ç”¨POSTæ¥åˆ›å»ºä¸€ä¸ªèµ„æºï¼Œç”¨PUTæ¥æ›´æ–°ä¸€ä¸ªèµ„æºï¼›æœ‰çš„è§‚ç‚¹è®¤ä¸ºï¼Œåº”è¯¥ç”¨PUTæ¥åˆ›å»ºä¸€ä¸ªèµ„æºï¼Œç”¨POSTæ¥æ›´æ–°ä¸€ä¸ªèµ„æºï¼›è¿˜æœ‰çš„è§‚ç‚¹è®¤ä¸ºå¯ä»¥ç”¨PUTå’ŒPOSTä¸­ä»»ä½•ä¸€ä¸ªæ¥åšåˆ›å»ºæˆ–è€…æ›´æ–°ä¸€ä¸ªèµ„æºã€‚è¿™äº›è§‚ç‚¹éƒ½åªçœ‹åˆ°äº†é£æ ¼ï¼Œäº‰è®ºèµ·æ¥ä¹Ÿåªæ˜¯äº‰è®ºå“ªç§é£æ ¼æ›´å¥½ï¼Œå…¶å®ï¼Œç”¨PUTè¿˜æ˜¯POSTï¼Œä¸æ˜¯çœ‹è¿™æ˜¯åˆ›å»ºè¿˜æ˜¯æ›´æ–°èµ„æºçš„åŠ¨ä½œï¼Œè¿™ä¸æ˜¯é£æ ¼çš„é—®é¢˜ï¼Œè€Œæ˜¯è¯­ä¹‰çš„é—®é¢˜ã€‚åœ¨HTTPä¸­ï¼ŒPUTè¢«å®šä¹‰ä¸ºidempotentçš„æ–¹æ³•ï¼ŒPOSTåˆ™ä¸æ˜¯ï¼Œè¿™æ˜¯ä¸€ä¸ªå¾ˆé‡è¦çš„åŒºåˆ«ã€‚</p>
<h2 id="åœ¨ä»£ç ä¸­å¦‚ä½•åº”ç”¨"><a href="#åœ¨ä»£ç ä¸­å¦‚ä½•åº”ç”¨" class="headerlink" title="åœ¨ä»£ç ä¸­å¦‚ä½•åº”ç”¨"></a>åœ¨ä»£ç ä¸­å¦‚ä½•åº”ç”¨</h2><p>æˆ‘ä»¬å…ˆæ¥çœ‹çœ‹AFNetworkingä¸­PUTå’ŒPOSTæ–¹æ³•æ€ä¹ˆç”¨ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">//POSTæ–¹æ³•</span><br><span class="line">- (nullable NSURLSessionDataTask *)POST:(NSString *)URLString</span><br><span class="line">                             parameters:(nullable id)parameters</span><br><span class="line">              constructingBodyWithBlock:(nullable void (^)(id &lt;AFMultipartFormData&gt; formData))block</span><br><span class="line">                               progress:(nullable void (^)(NSProgress *uploadProgress)) uploadProgress</span><br><span class="line">                                success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success</span><br><span class="line">                                failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;</span><br><span class="line"></span><br><span class="line">//PUTæ–¹æ³•</span><br><span class="line">- (nullable NSURLSessionDataTask *)PUT:(NSString *)URLString</span><br><span class="line">                   parameters:(nullable id)parameters</span><br><span class="line">                      success:(nullable void (^)(NSURLSessionDataTask *task, id _Nullable responseObject))success</span><br><span class="line">                      failure:(nullable void (^)(NSURLSessionDataTask * _Nullable task, NSError *error))failure;</span><br></pre></td></tr></table></figure>
<p>å‘ç°å‚æ•°ä¸­åªæœ‰<code>URLString</code>å’Œ<code>parameters</code>ï¼Œç›¸å¯¹äºPOSTè¯·æ±‚æ¥è¯´å°‘äº†ä¸€ä¸ªformDataçš„å‚æ•°ï¼Œæ²¡æœ‰åœ°æ–¹æŠŠæ•°æ®æ‹¼æ¥ä¸Šå»ï¼Œæˆ‘æ›¾ç»å°è¯•æŠŠDataæ”¾åˆ°parametersä¸­å¹¶ä¸å¥½ç”¨ï¼Œåœ¨ç½‘ä¸Šæœç´¢äº†å¾ˆå¤šä¹Ÿæ²¡æ‰¾åˆ°åˆé€‚çš„è§£å†³åŠæ³•ï¼Œåªèƒ½æ¢ä¸€ç§æ–¹å¼äº†ã€‚</p>
<h2 id="è§£å†³åŠæ³•"><a href="#è§£å†³åŠæ³•" class="headerlink" title="è§£å†³åŠæ³•"></a>è§£å†³åŠæ³•</h2><p>åœ¨ç”¨AFNetworkingè¿›è¡ŒPUTè¯·æ±‚ä¸å¥½ç”¨ä¹‹åï¼Œæˆ‘æƒ³è¿‡æ˜¯å¦ç”¨é€šè¿‡ç³»ç»ŸNSURLSessionTaskæ¥å®ç°PUTè¯·æ±‚ï¼Œä½†æ˜¯æƒ³æƒ³è‡ªå·±å†™å¤ªéº»çƒ¦äº†ï¼Œå°±å°è¯•ç€ç”¨ASIHTTPRequestæ¥å°è¯•ä¸€ä¸‹ï¼Œå‘ç°ASIHTTPRequestè¿˜æ˜¯å¾ˆå¥½ç”¨çš„ï¼Œä¸‹é¢è´´å‡ºä»£ç ï¼š</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">- (void)uploadData:(NSData *)data uploadUrl:(NSString *)uploadUrl &#123;    </span><br><span class="line">    ASIHTTPRequest * fileUpRequest = [ASIHTTPRequest requestWithURL:[NSURL URLWithString:uploadUrl]];</span><br><span class="line">    fileUpRequest.delegate = self;</span><br><span class="line">    //è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´ä¸º60ç§’</span><br><span class="line">    [fileUpRequest setTimeOutSeconds:60.f];</span><br><span class="line">    //è®¾ç½®è¯·æ±‚è¶…æ—¶æ—¶é—´åå†æ¬¡å°è¯•è¯·æ±‚çš„æ¬¡æ•°</span><br><span class="line">    [fileUpRequest setNumberOfTimesToRetryOnTimeout:2];</span><br><span class="line">    //å°†dataæ‹¼æ¥è¿›å»</span><br><span class="line">    [fileUpRequest appendPostData:data];</span><br><span class="line">    //è®¾ç½®è¯·æ±‚æ–¹å¼ä¸ºPUT</span><br><span class="line">    [fileUpRequest setRequestMethod:@&quot;PUT&quot;];</span><br><span class="line">    //è®¾ç½®ä¸Šä¼ å¤±è´¥çš„å›è°ƒæ–¹æ³•</span><br><span class="line">    [fileUpRequest setDidFailSelector:@selector(uploadFailed:)];</span><br><span class="line">    //è®¾ç½®ä¸Šä¼ æˆåŠŸçš„å›è°ƒæ–¹æ³•</span><br><span class="line">    [fileUpRequest setDidFinishSelector:@selector(uploadFinished:)];</span><br><span class="line">    //æ˜¾ç¤ºç²¾ç¡®çš„ä¸Šä¼ è¿›åº¦</span><br><span class="line">    fileUpRequest.showAccurateProgress = YES;</span><br><span class="line">    //å¼€å§‹å¼‚æ­¥è¯·æ±‚</span><br><span class="line">    [fileUpRequest startAsynchronous];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p> åˆ°è¿™é‡Œæˆ‘çš„é—®é¢˜å·²ç»è§£å†³ï¼Œå¦‚æœå¤§å®¶è¿˜æœ‰é—®é¢˜å¯ä»¥ç»™æˆ‘ç•™è¨€è§£å†³ï¼Œè°¢è°¢å¤§å®¶çš„æ”¯æŒã€‚</p>
</blockquote>
<p><a href="http://blog.csdn.net/wang631106979/article/details/51440457" target="_blank" rel="external">æˆ‘çš„CSDNåšå®¢åœ°å€</a><br><a href="https://github.com/631106979" target="_blank" rel="external">æˆ‘çš„GitHubåœ°å€</a></p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 05æœˆ 17æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘å°ç»“ - ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“]]></title>
      <url>http://imwcl.com/2016/05/16/iOS%E5%BC%80%E5%8F%91-%E4%BD%BF%E7%94%A8%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93/</url>
      <content type="html"><![CDATA[<p>APPå¼€å‘è¿‡ç¨‹ä¸­ï¼Œæ ¹æ®ç¾å·¥çš„éœ€æ±‚å¯èƒ½ä¼šç”¨åˆ°ä¸€äº›ç‰¹æ®Šçš„å­—ä½“ï¼Œç„¶è€Œåœ¨è‹¹æœè‡ªå¸¦å­—ä½“ä¸­å¹¶æ²¡æœ‰ï¼Œé‚£å°±å¿…é¡»æˆ‘ä»¬å¼€å‘æ¥æ¥å®ç°è¿™äº›åŠŸèƒ½å‘¢ï¼Œä¸‹é¢ä»¥<strong>å†¬é’é»‘ä½“ç®€ä½“ä¸­æ–‡(Hiragino Sans GB)</strong>ä¸ºä¾‹å­ç»™å¤§å®¶æ¼”ç¤ºä¸€ä¸‹è‡ªå®šä¹‰å­—ä½“çš„æ­¥éª¤ï¼š<br><a id="more"></a></p>
<ul>
<li>é¦–å…ˆå°†ä¸‹å¥½çš„å­—ä½“æ”¾åˆ°å·¥ç¨‹é‡Œé¢</li>
</ul>
<p><img src="http://img.blog.csdn.net/20160516115837202" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<ul>
<li>ç„¶ååœ¨info.pilisté‡Œé¢åŠ ä»¥ä¸‹å­—æ®µ</li>
</ul>
<p><img src="http://img.blog.csdn.net/20160516115901908" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<ul>
<li>ç„¶åå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œåœ¨xibä¸­ä½¿ç”¨ï¼š</li>
</ul>
<p><img src="http://img.blog.csdn.net/20160516115926439" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<ul>
<li>ç”¨ä»£ç ä½¿ç”¨ï¼š</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">//å¤§å®¶æ³¨æ„ï¼Œè¦æŠŠä¸­é—´çš„ç©ºæ ¼éƒ½å»æ‰</span><br><span class="line">[UIFont fontWithName:@&quot;HiraginoSansGB-W3&quot; size:12]</span><br></pre></td></tr></table></figure>
<hr>
<p>è¿™æ ·å°±å¯ä»¥ä½¿ç”¨è‡ªå®šä¹‰å­—ä½“ï¼Œä¸è¿‡ä¸å»ºè®®å¤§å®¶ä½¿ç”¨ï¼Œå› ä¸ºæ±‰å­—å­—ä½“çš„åŒ…å¤§å°å¾ˆå¤§ï¼Œä¼šå¢åŠ åº”ç”¨åŒ…çš„å¤§å°ï¼Œåƒä¸€å¥—<strong>å†¬é’é»‘ä½“ç®€ä½“ä¸­æ–‡(Hiragino Sans GB)</strong>å¤§å°æ€»å…±æœ‰26MBå·¦å³ï¼Œè¿™æ ·å¢åŠ åº”ç”¨åŒ…å¤§å°å°±å¾—ä¸å¿å¤±äº†ã€‚</p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 05æœˆ 16æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘å°ç»“ - github SSHç§˜é’¥é…ç½®]]></title>
      <url>http://imwcl.com/2016/04/22/github-SSH-Configure/</url>
      <content type="html"><![CDATA[<h2 id="github-SSHç§˜é’¥é…ç½®"><a href="#github-SSHç§˜é’¥é…ç½®" class="headerlink" title="github SSHç§˜é’¥é…ç½®"></a>github SSHç§˜é’¥é…ç½®</h2><p>ä»githubä¸Šcloneä»£ç ä¸‹æ¥ï¼Œæˆ–è€…å…³è”ä½ çš„è¿œç¨‹ä»“åº“æœ‰ä¸¤ç§é“¾æ¥ï¼Œä¸€ç§æ˜¯Httpsçš„é“¾æ¥ï¼Œä¸€ç§æ˜¯sshçš„é“¾æ¥ï¼Œä»Šå¤©è¦è®²çš„æ˜¯ç”¨sshé“¾æ—¶å‡ºç°çš„ä¸€äº›é—®é¢˜å’Œè§£å†³åŠæ³•ã€‚<br><a id="more"></a></p>
<h2 id="å¦‚ä½•åˆ›å»ºSSH"><a href="#å¦‚ä½•åˆ›å»ºSSH" class="headerlink" title="å¦‚ä½•åˆ›å»ºSSH"></a>å¦‚ä½•åˆ›å»ºSSH</h2><p>æ‰“å¼€ä½ çš„ç»ˆç«¯ï¼Œè¾“å…¥<strong>ssh-keygen -t rsa -C â€œxxxxx@xxxxx.comâ€</strong>ï¼Œé‡Œé¢çš„é‚®ç®±æ˜¯ä½ çš„githubè´¦å·ï¼Œç„¶åä¼šå¼¹å‡º<strong>Enter file in which to save the key (/Users/wangchonglei/.ssh/id_rsa):</strong>è¿™é‡Œæ˜¯ç³»ç»Ÿé»˜è®¤çš„ä¿å­˜åœ°å€å’Œæ–‡ä»¶åï¼Œä½ å¯ä»¥æ›´æ”¹ï¼Œä¾‹å¦‚ï¼š<strong>/Users/wangchonglei/.ssh/girhub_rsa</strong>ï¼ˆè®°ä½ï¼šä¸åŒçš„è´¦å·éœ€è¦èµ·ä¸ä¸€æ ·çš„åå­—ï¼‰ï¼Œç„¶åä¸€ç›´å›è½¦ä¼šå‡ºç°ç±»ä¼¼ä¸‹é¢è¿™æ ·çš„æ–‡å­—ï¼Œå°±è¯´æ˜åˆ›å»ºæˆåŠŸäº†ï¼›</p>
<p>The keyâ€™s randomart image is:<br>+â€”[RSA 2048]â€”-+<br>| o|<br>| . ..|<br>| o o o .|<br>| o + = = |<br>| . . S = o +oo|<br>| E o = + .. =|<br>| + + .+ =.|<br>| .<em> .o BB=|<br>| o=.o. o*</em>O|<br>+â€”-[SHA256]â€”â€“+</p>
<h2 id="å¦‚ä½•æŸ¥çœ‹ä½ çš„rsa"><a href="#å¦‚ä½•æŸ¥çœ‹ä½ çš„rsa" class="headerlink" title="å¦‚ä½•æŸ¥çœ‹ä½ çš„rsa"></a>å¦‚ä½•æŸ¥çœ‹ä½ çš„rsa</h2><p>æœ‰ä¸¤ç§æ–¹å¼å¯ä»¥æŸ¥çœ‹ï¼Œç¬¬ä¸€ç§æ¯”è¾ƒç®€å•ï¼Œç›´æ¥<strong>cat ~/.ssh/#####.pub</strong>ï¼Œè¿™é‡Œæ˜¯ä½ åˆšåˆšè‡ªå·±è¾“å…¥çš„æ–‡ä»¶åï¼Œç³»ç»Ÿé»˜è®¤çš„æ˜¯<strong>id_rsa.pub</strong>ï¼› ç¬¬äºŒç§ä½¿ç”¨vimç¼–è¾‘å™¨æŸ¥çœ‹ï¼Œé¦–å…ˆ<strong>cd ~/.ssh</strong>ï¼Œåˆ°æ–‡ä»¶ç›®å½•ä¸‹ï¼Œç„¶åvim ä½ çš„æ–‡ä»¶åï¼Œæ¯”å¦‚<strong>vim ####.pub</strong>å°±å¯ä»¥æŸ¥çœ‹äº†ã€‚</p>
<p>æŠŠä½ çš„SSHå¡«å†™åˆ°githubä¸Š</p>
<p>è¿™ä¸ªæ¯”è¾ƒç®€å•ï¼Œåœ¨githubä¸Šç‚¹å‡»ä½ çš„å¤´åƒï¼Œé€‰æ‹©settingï¼Œè¿›å…¥åç‚¹å‡»SSHKEYSåAdd SSH keyå°±è¡Œäº†</p>
<h2 id="æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ"><a href="#æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ" class="headerlink" title="æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ"></a>æµ‹è¯•æ˜¯å¦è®¾ç½®æˆåŠŸ</h2><p>åœ¨ç»ˆç«¯ä¸­è¾“å…¥<strong>ssh -T git@git.oschina.net</strong>ï¼Œç³»ç»Ÿè¿”å›Welcome to Git@OSCï¼Œ###æ˜¯å°±è¡¨ç¤ºæ·»åŠ æˆåŠŸäº†ï¼Œå°±ä½ å¯ä»¥ç”¨git remote add origin git@#####æ¥å…³è”ä½ çš„è¿œç¨‹åº“äº†ã€‚</p>
<hr>
<p>ä½œè€… <a href="http://imwcl.com/">@W_C__L</a><br>2016 å¹´ 04æœˆ 22æ—¥</p>
]]></content>
    </entry>
    
    <entry>
      <title><![CDATA[iOSå¼€å‘è¿›é˜¶ - å¸¸ç”¨çš„Xcodeæ’ä»¶]]></title>
      <url>http://imwcl.com/2016/04/22/Xcode-Plug-In/</url>
      <content type="html"><![CDATA[<h2 id="Alcatraz-æ’ä»¶ç®¡ç†å·¥å…·"><a href="#Alcatraz-æ’ä»¶ç®¡ç†å·¥å…·" class="headerlink" title="Alcatraz - æ’ä»¶ç®¡ç†å·¥å…·"></a><a href="https://github.com/mneorr/Alcatraz" target="_blank" rel="external">Alcatraz</a> - æ’ä»¶ç®¡ç†å·¥å…·</h2><p>Alcatrazæ˜¯ä¸€ä¸ªå¼€æºçš„Xcodeæ’ä»¶ç®¡ç†å™¨ï¼Œå¯ä»¥è®©ä½ æ›´ä¾¿æ·åœ°å‘ç°ã€å®‰è£…ä»¥åŠç®¡ç†æ’ä»¶ã€æ¨¡æ¿å’Œé…è‰²æ–¹æ¡ˆã€‚åªéœ€è¦ç®€å•åœ°ç‚¹å‡»æˆ–è€…å‹¾é€‰ï¼Œå°±èƒ½ä¸‹è½½å®‰è£…å’Œåˆ é™¤æ’ä»¶ï¼Œå»ºè®®é€‰æ‹©çš„ç¬¬ä¸€ä¸ªXcodeæ’ä»¶ã€‚<br>ä¸‹è½½å®Œæˆåé€šè¿‡Windowâ€”&gt;Package Manageræ¥æ‰“å¼€ã€‚<br><a id="more"></a><br><img src="http://img.blog.csdn.net/20160325225549776" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="VVDocumenter-è§„èŒƒæ³¨é‡Šç”Ÿæˆå™¨"><a href="#VVDocumenter-è§„èŒƒæ³¨é‡Šç”Ÿæˆå™¨" class="headerlink" title="VVDocumenter  - è§„èŒƒæ³¨é‡Šç”Ÿæˆå™¨"></a><a href="https://github.com/onevcat/VVDocumenter-Xcode" target="_blank" rel="external">VVDocumenter</a>  - è§„èŒƒæ³¨é‡Šç”Ÿæˆå™¨</h2><p> VVDocumenteræ˜¯ä¸€ä¸ªè§„èŒƒåŒ–çš„ä»£ç æ³¨é‡Šæ’ä»¶ï¼Œåœ¨ååŒå¼€å‘çš„æ—¶å€™ï¼Œæ¯ä¸ªäººçš„ä»£ç é£æ ¼ä¸ä¸€æ ·ï¼Œé‚£ä¹ˆå¿…è¦çš„ä»£ç æ³¨é‡Šå°±æ˜¾å¾—å¾ˆå…³é”®ï¼Œé‚£ä¹ˆVVDocumenterä¸€å®šæ˜¯æœ€å¥½çš„é€‰æ‹©ï¼Œåœ¨éœ€è¦å¡«å†™æ³¨é‡Šçš„å±æ€§å’Œæ–¹æ³•ä¸Šä¸‹åªéœ€è¦è¾“å…¥ä¸‰ä¸ªæ–œçº¿â€///â€œï¼Œå°±èƒ½ç”Ÿæˆç›¸åº”çš„ä»£ç æ³¨é‡Šäº†ï¼Œæ”¯æŒXcodeå’Œswiftã€‚<br><img src="http://img.blog.csdn.net/20160325234457278" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="FuzzyAutocomplete-ä»£ç è‡ªåŠ¨è¡¥å…¨æ’ä»¶"><a href="#FuzzyAutocomplete-ä»£ç è‡ªåŠ¨è¡¥å…¨æ’ä»¶" class="headerlink" title="FuzzyAutocomplete  - ä»£ç è‡ªåŠ¨è¡¥å…¨æ’ä»¶"></a><a href="https://github.com/FuzzyAutocomplete/FuzzyAutocompletePlugin" target="_blank" rel="external">FuzzyAutocomplete</a>  - ä»£ç è‡ªåŠ¨è¡¥å…¨æ’ä»¶</h2><p>FuzzyAutocompletePluginæ˜¯ä¸€ä¸ªXcodeä»£ç è¡¥å…¨æ’ä»¶çš„æ’ä»¶ï¼Œé€šè¿‡æ·»åŠ æ¨¡ç³ŠåŒ¹é…æ¥æé«˜Xcodeä»£ç è‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ï¼Œå¼€å‘è€…æ— éœ€éµå¾ªä»å¤´åŒ¹é…çš„åŸåˆ™ï¼Œåªè¦è®°å¾—æ–¹æ³•é‡ŒæŸä¸ªå…³é”®å­—å³å¯è¿›è¡ŒåŒ¹é…ï¼Œå¾ˆå¥½åœ°æé«˜äº†å·¥ä½œæ•ˆç‡ã€‚æ¯”ç³»ç»Ÿè‡ªå¸¦çš„æ›´é«˜æ•ˆï¼Œæ— éœ€è¾“å…¥é¡ºåºå³å¯åŒ¹é…åˆ°ç›¸åº”ä»£ç ã€‚<br><img src="http://img.blog.csdn.net/20160325234213322" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="ESJsonFormat-JSONæ ¼å¼åŒ–è¾“å‡ºä¸ºæ¨¡å‹çš„å±æ€§çš„æ’ä»¶"><a href="#ESJsonFormat-JSONæ ¼å¼åŒ–è¾“å‡ºä¸ºæ¨¡å‹çš„å±æ€§çš„æ’ä»¶" class="headerlink" title="ESJsonFormat -  JSONæ ¼å¼åŒ–è¾“å‡ºä¸ºæ¨¡å‹çš„å±æ€§çš„æ’ä»¶"></a><a href="https://github.com/EnjoySR/ESJsonFormat-Xcode" target="_blank" rel="external">ESJsonFormat</a> -  JSONæ ¼å¼åŒ–è¾“å‡ºä¸ºæ¨¡å‹çš„å±æ€§çš„æ’ä»¶</h2><p>å¯ä»¥é€šè¿‡jsonå­—ç¬¦ä¸²è‡ªåŠ¨ç”Ÿæˆå±æ€§ï¼ŒåŒæ—¶æ”¯æŒ<a href="https://github.com/CoderMJLee/MJExtension" target="_blank" rel="external">MJExtension</a>ï¼Œå…·ä½“æ•ˆæœè§ä¸‹å›¾ï¼š<br><img src="http://img.blog.csdn.net/20160325231545006" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="IconMaker-AppIconä¸€é”®ç”Ÿæˆç¥å™¨"><a href="#IconMaker-AppIconä¸€é”®ç”Ÿæˆç¥å™¨" class="headerlink" title="IconMaker  - AppIconä¸€é”®ç”Ÿæˆç¥å™¨"></a><a href="https://github.com/kaphacius/IconMaker" target="_blank" rel="external">IconMaker</a>  - AppIconä¸€é”®ç”Ÿæˆç¥å™¨</h2><p>åªéœ€ç®€å•å‡ éƒ¨æ“ä½œå°±èƒ½ç”Ÿæˆä¸€å¥—iconï¼Œå†ä¹Ÿä¸éœ€è¦ä¸€ä¸ªä¸ªæ‰‹åŠ¨æ›¿æ¢äº†ï¼Œå†ä¹Ÿä¸éœ€è¦åº”ä¸ºiconå¤§å°ä¸å¯¹å®¡æ ¸è¢«æ‹’ç»äº†ï¼Œåªéœ€è¦ä¸€æ­¥ä¸€é”®ç”Ÿæˆï¼Œè¦å¤šæ–¹ä¾¿æœ‰å¤šæ–¹ä¾¿ã€‚<br><img src="http://img.blog.csdn.net/20160325232225891" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="XAlign-ä¸€ä¸ªç”¨æ¥å¯¹é½å¸¸è§„ä»£ç çš„Xcodeæ’ä»¶"><a href="#XAlign-ä¸€ä¸ªç”¨æ¥å¯¹é½å¸¸è§„ä»£ç çš„Xcodeæ’ä»¶" class="headerlink" title="XAlign  - ä¸€ä¸ªç”¨æ¥å¯¹é½å¸¸è§„ä»£ç çš„Xcodeæ’ä»¶"></a><a href="https://github.com/qfish/XAlign" target="_blank" rel="external">XAlign</a>  - ä¸€ä¸ªç”¨æ¥å¯¹é½å¸¸è§„ä»£ç çš„Xcodeæ’ä»¶</h2><p>ä¸€ä¸ªç”¨æ¥å¯¹é½å¸¸è§„ä»£ç çš„Xcodeæ’ä»¶ï¼Œååˆ†å¼ºå¤§çš„è‡ªå®šä¹‰å¯¹é½æ¨¡å¼ã€‚åªéœ€é”®å…¥command+shift+xå°±èƒ½è‡ªåŠ¨å¸®ä½ å¯¹é½ä½ æ‚ä¹±çš„ä»£ç äº†ï¼Œå¼ºè¿«ç—‡ä¸“ç”¨ã€‚<br><img src="http://img.blog.csdn.net/20160325232753314" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="KSImageNamed-å›¾ç‰‡åè‡ªåŠ¨è¡¥å…¨æ’ä»¶"><a href="#KSImageNamed-å›¾ç‰‡åè‡ªåŠ¨è¡¥å…¨æ’ä»¶" class="headerlink" title="KSImageNamed - å›¾ç‰‡åè‡ªåŠ¨è¡¥å…¨æ’ä»¶"></a><a href="https://github.com/ksuther/KSImageNamed-Xcode" target="_blank" rel="external">KSImageNamed</a> - å›¾ç‰‡åè‡ªåŠ¨è¡¥å…¨æ’ä»¶</h2><p>ä¸ºé¡¹ç›®ä¸­ä½¿ç”¨çš„UIImageçš„imageNamedæä¾›æ–‡ä»¶åè‡ªåŠ¨è¡¥å…¨åŠŸèƒ½ã€‚ä½¿ç”¨[UIImage imageNamed:@â€xxxâ€]æ—¶ï¼Œè¯¥æ’ä»¶ä¼šæ‰«ææ•´ä¸ªworkspaceä¸­çš„å›¾ç‰‡æ–‡ä»¶ã€‚<br><img src="http://img.blog.csdn.net/20160325233049119" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<h2 id="Backlight-å¸®ä½ æ‰¾åˆ°å½“å‰æ­£åœ¨è¾“å…¥ä½ç½®çš„é»‘ç§‘æŠ€"><a href="#Backlight-å¸®ä½ æ‰¾åˆ°å½“å‰æ­£åœ¨è¾“å…¥ä½ç½®çš„é»‘ç§‘æŠ€" class="headerlink" title="Backlight - å¸®ä½ æ‰¾åˆ°å½“å‰æ­£åœ¨è¾“å…¥ä½ç½®çš„é»‘ç§‘æŠ€"></a><a href="https://github.com/limejelly/Backlight-for-XCode" target="_blank" rel="external">Backlight</a> - å¸®ä½ æ‰¾åˆ°å½“å‰æ­£åœ¨è¾“å…¥ä½ç½®çš„é»‘ç§‘æŠ€</h2><p>å¤§å®¶è‚¯å®šé‡åˆ°è¿‡ï¼Œå½“ä½ åœ¨è¾“å…¥æ—¶çªç„¶æ‰¾ä¸åˆ°è¾“å…¥å…‰æ ‡åœ¨å“ªé‡Œäº†ï¼Œè¿™æ—¶å€™ä½ èƒ½æ…¢æ…¢æ‰¾ï¼Œ<a href="https://github.com/limejelly/Backlight-for-XCode" target="_blank" rel="external">Backlight</a> å¸®ä½ è§£å†³äº†è¿™ä¸ªé—®é¢˜ï¼Œä½ ä¸ç”¨å†ä¸ºæ‰¾ä¸åˆ°å…‰æ ‡è€Œçƒ¦æ¼äº†ï¼Œç»å¯¹é»‘ç§‘æŠ€ã€‚<br><img src="http://img.blog.csdn.net/20160325233630208" alt="è¿™é‡Œå†™å›¾ç‰‡æè¿°"></p>
<hr>
<p>PS:ä»Šå¤©å°±ç»™å¤§å®¶åˆ†äº«åˆ°è¿™é‡Œï¼Œè¿™éƒ½æ˜¯æˆ‘ç”¨èµ·æ¥éå¸¸èˆ’æœçš„æ’ä»¶ï¼Œä»¥åæœ‰æ›´å¥½çš„æˆ‘ä¼šåœ¨è¿™é‡Œæ›´æ–°</p>
]]></content>
    </entry>
    
  
  
</search>
